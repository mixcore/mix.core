"use strict";
var appShared = angular.module("MixShared", [
  "ngRoute",
  "ngFileUpload",
  "LocalStorageModule",
  "SharedComponents",
]);
var sharedComponents = angular.module("SharedComponents", []);
window.executeFunctionByName = async function (
  functionName,
  args,
  context = window
) {
  if (functionName !== null) {
    var namespaces = functionName.split(".");
    var func = namespaces.pop();
    for (var i = 0; i < namespaces.length; i++) {
      context = context[namespaces[i]];
    }
    functionName = null;
    return context[func].apply(this, args);
  }
};

appShared.constant("AppSettings", {
  serviceBase: "",
  apiVersion: "v2",
});
appShared.constant("ngAppSettings", {
  serviceBase: "",
  encryptKey: "MbQeThWmZq4t7w!z$C&F)J@NcRfUjXn2",
  encryptIV: "3s6v9y$B&E)H@McQ",
  clientId: "ngAuthApp",
  facebookAppId: "",
  request: {
    pageSize: "20",
    pageIndex: 0,
    status: "Published",
    orderBy: "CreatedDateTime",
    direction: "Desc",
    fromDate: null,
    toDate: null,
    keyword: "",
    searchColumns: "",
    searchMethod: "Like",
  },
  restRequest: {
    pageSize: "20",
    pageIndex: 0,
    status: "Published",
    orderBy: "CreatedDateTime",
    direction: "Desc",
    fromDate: null,
    toDate: null,
    keyword: "",
  },
  privacies: ["VND", "USD"],
  pageSizes: ["", "5", "10", "15", "20"],
  directions: [
    {
      value: "Asc",
      title: "Asc",
    },
    {
      value: "Desc",
      title: "Desc",
    },
  ],
  orders: [
    {
      value: "LastModified",
      title: "Last Modified",
    },
    {
      value: "CreatedDateTime",
      title: "Created Date",
    },
    {
      value: "Priority",
      title: "Priority",
    },

    {
      value: "Title",
      title: "Title",
    },
  ],
  contentStatuses: ["Deleted", "Preview", "Published", "Draft", "Schedule"],
  dataTypes: [
    {
      title: "Custom",
      value: "Custom",
    },
    {
      title: "DateTime",
      value: "DateTime",
    },
    {
      title: "Date",
      value: "Date",
    },
    {
      title: "Time",
      value: "Time",
    },
    {
      title: "Duration",
      value: "Duration",
    },
    {
      title: "Phone Number",
      value: "PhoneNumber",
    },
    {
      title: "Currency",
      value: "Currency",
    },
    {
      title: "Text",
      value: "Text",
    },
    {
      title: "Html",
      value: "Html",
    },
    {
      title: "Multiline Text",
      value: "MultilineText",
    },
    {
      title: "Email Address",
      value: "EmailAddress",
    },
    {
      title: "Password",
      value: "Password",
    },
    {
      title: "Url",
      value: "Url",
    },
    {
      title: "Image Url",
      value: "ImageUrl",
    },
    {
      title: "Credit Card",
      value: "CreditCard",
    },
    {
      title: "PostalCode",
      value: "PostalCode",
    },
    {
      title: "Upload",
      value: "Upload",
    },
    {
      title: "Color",
      value: "Color",
    },
    {
      title: "Boolean",
      value: "Boolean",
    },
    {
      title: "Icon",
      value: "Icon",
    },
    {
      title: "Video Youtube",
      value: "VideoYoutube",
    },
    {
      title: "Tui Editor",
      value: "TuiEditor",
    },
    {
      title: "Integer",
      value: "Integer",
    },
    {
      title: "QR Code",
      value: "QRCode",
    },
    {
      title: "Reference",
      value: "Reference",
    },
  ],
  icons: [],
});
appShared.run([
  "$http",
  "$rootScope",
  "ngAppSettings",
  "$location",
  "$uibModal",
  "BaseRestService",
  "ApiService",
  "CommonService",
  "AuthService",
  "TranslatorService",
  "localStorageService",
  function (
    $http,
    $rootScope,
    ngAppSettings,
    $location,
    $uibModal,
    baseRestService,
    apiService,
    commonService,
    authService,
    translatorService,
    localStorageService
  ) {
    $rootScope.currentContext = $rootScope;
    $rootScope.isBusy = false;
    $rootScope.translator = translatorService;
    $rootScope.errors = [];
    $rootScope.breadCrumbs = [];
    $rootScope.globalSettings = localStorageService.get("globalSettings");
    $rootScope.message = {
      title: "",
      content: "",
      errors: [],
      okFuncName: null,
      okArgs: [],
      cancelFuncName: null,
      cancelArgs: [],
      lblOK: "OK",
      lblCancel: "Cancel",
      context: $rootScope,
    };
    $rootScope.isBusy = false;
    $rootScope.translator = translatorService;
    $rootScope.message = {
      title: "test",
      content: "",
      errors: [],
      okFuncName: null,
      okArgs: [],
      cancelFuncName: null,
      cancelArgs: [],
      lblOK: "OK",
      lblCancel: "Cancel",
      context: $rootScope,
    };

    $rootScope.getRequest = function (key) {
      key =
        key || `request${$rootScope.generateKeyword($location.$$path, "_")}`;
      let lstRequest = localStorageService.get("requests") ?? {};
      let request = lstRequest[key];
      if (!request) {
        request = angular.copy(ngAppSettings.request);
        lstRequest[key] = request;
        localStorageService.set("requests", lstRequest);
      }
      return request;
    };
    $rootScope.setRequest = function (req, key) {
      key =
        key || `request${$rootScope.generateKeyword($location.$$path, "_")}`;
      let lstRequest = localStorageService.get("requests") ?? {};
      if (req) {
        lstRequest[key] = req;
        localStorageService.set("requests", lstRequest);
      }
    };
    $rootScope.range = function (max) {
      var input = [];
      for (var i = 1; i <= max; i += 1) input.push(i);
      return input;
    };

    $rootScope.generateKeyword = function (
      src,
      character,
      isCamelCase = false,
      isLowerFirst = false
    ) {
      if (src) {
        src = $rootScope.parseUnsignString(src);

        if (isCamelCase) {
          src = src
            .replace(/\w\S*/g, function (txt) {
              return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
            })
            .replace(/[^a-zA-Z0-9]+/g, "");

          if (isLowerFirst) {
            src = src.replace(/^./, (str) => str.toLowerCase()); // first to lowercase
          }
        } else {
          src = src
            .replace(/[^a-zA-Z0-9]+/g, character)
            .replace(/([A-Z]+)([A-Z][a-z])/g, "$1-$2")
            .replace(/([a-z])([A-Z])/g, "$1-$2")
            // .replace(/([0-9])([^0-9])/g, "$1-$2")
            // .replace(/([^0-9])([0-9])/g, "$1-$2")
            .replace(/-+/g, character)
            .toLowerCase();
        }

        return src;
      }
    };

    $rootScope.generatePhone = function (src) {
      return src.replace(/^([0-9]{3})([0-9]{3})([0-9]{4})$/, "($1) $2-$3");
    };
    $rootScope.parseUnsignString = function (str) {
      str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, "a");
      str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, "e");
      str = str.replace(/ì|í|ị|ỉ|ĩ/g, "i");
      str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, "o");
      str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, "u");
      str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, "y");
      str = str.replace(/đ/g, "d");
      str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, "A");
      str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, "E");
      str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, "I");
      str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, "O");
      str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, "U");
      str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, "Y");
      str = str.replace(/Đ/g, "D");
      return str;
    };
    $rootScope.logOut = function () {
      authService.logOut();
    };
    $rootScope.sortArray = (arr, fieldName) => {
      return arr.sort(function (a, b) {
        return a[fieldName] - b[fieldName];
      });
    };
    $rootScope.updateSettings = function () {
      commonService.removeSettings();
      commonService
        .fillSettings($rootScope.globalSettings.lang)
        .then(function (response) {
          $rootScope.globalSettings = response;
        });
      $rootScope.isBusy = false;
    };
    $rootScope.executeFunctionByName = async function (
      functionName,
      args,
      context = window
    ) {
      if (functionName !== null) {
        var namespaces = functionName.split(".");
        var func = namespaces.pop();
        for (var i = 0; i < namespaces.length; i++) {
          context = context[namespaces[i]];
        }
        functionName = null;
        return context[func].apply(this, args);
      }
    };

    $rootScope.showConfirm = function (
      context,
      okFuncName,
      okArgs,
      cancelFuncName,
      title,
      msg,
      cancelArgs,
      lblOK,
      lblCancel
    ) {
      $rootScope.confirmMessage = {
        title: title,
        content: msg,
        context: context,
        okFuncName: okFuncName,
        okArgs: okArgs,
        cancelFuncName: cancelFuncName,
        cancelArgs: cancelArgs,
        lblOK: lblOK ? lblOK : "OK",
        lblCancel: lblCancel ? lblCancel : "Cancel",
      };

      $("#dlg-confirm-msg").modal("show");
    };

    $rootScope.preview = function (type, data, title, size, objClass) {
      $rootScope.previewObject = {
        title: title || "Preview",
        size: size || "modal-md",
        objClass: objClass,
        type: type,
        data: data,
      };
      $("#dlg-preview-popup").modal("show");
    };

    $rootScope.initEditors = function () {
      setTimeout(function () {
        $.each($(".code-editor"), function (i, e) {
          var container = $(this);
          var editor = ace.edit(e);
          if (container.hasClass("json")) {
            editor.session.setMode("ace/mode/json");
          } else {
            editor.session.setMode("ace/mode/razor");
          }
          editor.setTheme("ace/theme/chrome");
          //editor.setReadOnly(true);
          editor.$blockScrolling = Infinity;
          editor.session.setUseWrapMode(true);
          editor.setOptions({
            maxLines: Infinity,
          });
          editor.getSession().on("change", function (e) {
            // e.type, etc
            $(container).parent().find(".code-content").val(editor.getValue());
          });
        });
      }, 200);
    };
    $rootScope.handleResponse = (response) => {
      if (response.success) {
        $rootScope.showMessage("success", "success");
      } else {
        $rootScope.showErrors(response.errors);
      }
    };
    $rootScope.showErrors = function (errors) {
      if (errors.length) {
        angular.forEach(errors, function (e) {
          $rootScope.showMessage(e, "danger");
        });
      } else {
        $rootScope.showMessage("Server Errors", "danger");
      }
    };
    $rootScope.shortString = function (msg, max) {
      var data = decodeURIComponent(msg);
      if (data) {
        if (max < data.length) {
          return data.replace(/[+]/g, " ").substr(0, max) + " ...";
        } else {
          return data.replace(/[+]/g, " ");
        }
      }
    };
    $rootScope.showMessage = function (content, type) {
      // $rootScope.toast = new  bootstrap.Toast(document.getElementById('toast-msg'));
      // $rootScope.toastMsg= content;
      // $rootScope.toast.show();
      var from = "bottom";
      var align = "right";
      if (window.jQuery && $.notify) {
        $.notify(
          {
            icon: "fas fa-bell",
            message: $rootScope.translate(content),
          },
          {
            type: type,
            timer: 2000,
            placement: {
              from: from,
              align: align,
            },
          }
        );
      } else {
        alert(content);
      }
    };
    $rootScope.encrypt = function (message) {
      var keySize = 256;
      var ivSize = 128;
      var iterations = 100;
      var salt = CryptoJS.lib.WordArray.random(128 / 8);
      var pass = "secret-key";
      var key = CryptoJS.PBKDF2(pass, salt, {
        keySize: keySize / 32,
        iterations: iterations,
      });

      var iv = CryptoJS.lib.WordArray.random(ivSize / 8);

      var options = {
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7,
        iv: iv,
      };
      var encrypted = CryptoJS.AES.encrypt(message, key, options);
      return {
        key: key.toString(CryptoJS.enc.Base64),
        iv: iv.toString(CryptoJS.enc.Base64),
        data: encrypted.ciphertext.toString(CryptoJS.enc.Base64),
      };
    };
    $rootScope.decrypt = function (encryptedData) {
      var ivSize = 128;
      var cipherParams = CryptoJS.lib.CipherParams.create({
        ciphertext: CryptoJS.enc.Base64.parse(encryptedData.data),
      });
      var key = CryptoJS.enc.Base64.parse(encryptedData.key);
      var iv = CryptoJS.lib.WordArray.random(ivSize / 8);
      var options = {
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7,
        iv: iv,
      };

      var decrypted = CryptoJS.AES.decrypt(cipherParams, key, options);
      return decrypted.toString(CryptoJS.enc.Utf8);
    };

    $rootScope.ajaxSubmitForm = async function (form, url) {
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        headers: {
          "Content-Type": undefined,
        },
        contentType: false, // Not to set any content header
        processData: false, // Not to process data
        data: form,
      };
      return await apiService.sendRequest(req);
    };

    $rootScope.translate = function (keyword, isWrap, defaultText) {
      if ($rootScope.globalSettings && $rootScope.translator) {
        return $rootScope.translator[keyword] || keyword;
      } else {
        return keyword || defaultText;
      }
    };

    $rootScope.getConfiguration = function (keyword, isWrap, defaultText) {
      if (
        $rootScope.globalSettings &&
        ($rootScope.globalSettingsService || $rootScope.isBusy)
      ) {
        return $rootScope.globalSettingsService.get(
          keyword,
          isWrap,
          defaultText
        );
      } else {
        return keyword || defaultText;
      }
    };

    $rootScope.waitForInit = async function (functionName, args, scope) {
      if (!$rootScope.isInit) {
        () => {
          setTimeout(() => {
            $rootScope.waitForInit(functionName, args, scope);
          }, 200);
        };
      } else {
        $rootScope.executeFunctionByName(functionName, args, scope);
      }
    };

    $rootScope.$watch("isBusy", function (newValue, oldValue) {
      if (newValue) {
        $rootScope.message.content = "";
        $rootScope.errors = [];
      }
    });
    $rootScope.downloadCanvasImage = function (canvas) {
      if (!canvas) return;
      var image = canvas.toDataURL();
      var aLink = document.createElement("a");
      aLink.download = "image.png";
      aLink.href = image;
      aLink.click();
    };
    $rootScope.generateUUID = function () {
      // Public Domain/MIT
      var d = new Date().getTime();
      if (
        typeof performance !== "undefined" &&
        typeof performance.now === "function"
      ) {
        d += performance.now(); //use high-precision timer if available
      }
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
        /[xy]/g,
        function (c) {
          var r = (d + Math.random() * 16) % 16 | 0;
          d = Math.floor(d / 16);
          return (c === "x" ? r : (r & 0x3) | 0x8).toString(16);
        }
      );
    };
    $rootScope.filterArray = function (array, keys, values) {
      var result = [];
      if (array) {
        for (var i = 0; i < array.length; i++) {
          var matched = true;
          for (var j = 0; j < keys.length; j++) {
            if (array[i][keys[j]] !== values[j]) {
              matched = false;
              break;
            }
          }
          if (matched) {
            result.push(array[i]);
          }
        }
      }
      return result;
    };
    $rootScope.findObjectByKey = function (array, key, value) {
      if (array) {
        if (Array.isArray(key)) {
          for (var i = 0; i < array.length; i++) {
            var isMatch = true;
            angular.forEach(key, function (e, j) {
              isMatch = array[i][key[j]] == value[j];
            });
            if (isMatch) {
              return array[i];
            }
          }
        } else {
          for (var i = 0; i < array.length; i++) {
            if (array[i][key] == value) {
              return array[i];
            }
          }
        }
      }
      return null;
    };
    $rootScope.removeObjectByKey = function (array, key, value) {
      if (Array.isArray(key)) {
        for (var i = 0; i < array.length; i++) {
          var isMatch = true;
          angular.forEach(key, function (e, j) {
            isMatch = array[i][key[j]] == value[j];
          });
          if (isMatch) {
            array.splice(i, 1);
            break;
          }
        }
      } else {
        for (var i = 0; i < array.length; i++) {
          if (array[i][key] == value) {
            array.splice(i, 1);
            break;
          }
        }
      }
      for (var i = 0; i < array.length; i++) {
        if (array[i][key] == value) {
          array.splice(i, 1);
          break;
        }
      }
    };

    $rootScope.changeLang = async function (lang) {
      var url = await translatorService.translateUrl(lang);
      translatorService.translateUrl(lang);
      window.top.location = url;
    };
    // upload on file select or drop
    $rootScope.upload = function (file, url) {
      Upload.upload({
        url: "upload/url",
        data: {
          file: file,
          username: $scope.username,
        },
      }).then(
        function (resp) {
          console.log(
            "Success " +
              resp.config.data.file.name +
              "uploaded. Response: " +
              resp.data
          );
        },
        function (resp) {
          console.log("Error status: " + resp.status);
        },
        function (evt) {
          var progressPercentage = parseInt((100.0 * evt.loaded) / evt.total);
          console.log(
            "progress: " + progressPercentage + "% " + evt.config.data.file.name
          );
        }
      );
    };
    $rootScope.goToSiteUrl = function (url) {
      window.top.location = url;
    };
    $rootScope.goToPath = function (url) {
      $location.url(url.trim());
    };
    $rootScope.encryptMixDatabase = function (attributes, data) {
      angular.forEach(attributes, function (attr) {
        if (attr.isEncrypt) {
          angular.forEach(data, function (item) {
            var columnData = $rootScope.findObjectByKey(
              item.data,
              "attributeName",
              attr.name
            );
            if (columnData) {
              var encryptedData = $rootScope.encrypt(columnData.stringValue);
              columnData.encryptValue = encryptedData.data;
              columnData.encryptKey = encryptedData.key;
              columnData.stringValue = "";
            }
          });
        }
      });
    };
    $rootScope.decryptMixDatabase = function (attributes, data) {
      angular.forEach(attributes, function (attr) {
        if (attr.isEncrypt) {
          angular.forEach(data, function (item) {
            var columnData = $rootScope.findObjectByKey(
              item.data,
              "attributeName",
              attr.name
            );
            if (columnData) {
              var encryptedData = {
                key: columnData.encryptKey,
                data: columnData.encryptValue,
              };
              columnData.stringValue = $rootScope.decrypt(encryptedData);
            }
          });
        }
      });
    };
    $rootScope.testJSON = function (obj) {
      if (typeof obj === "object" && obj !== null) {
        return obj;
      }
      if (typeof obj !== "string") {
        return false;
      }
      try {
        return JSON.parse(obj);
      } catch (error) {
        return false;
      }
    };
    $rootScope.getRestService = function (modelName, lang = null) {
      var serviceFactory = angular.copy(baseRestService);
      serviceFactory.init(modelName, lang);
      return serviceFactory;
    };
    $rootScope.showLogin = function (req, type = null) {
      $rootScope.isBusy = false;
      $rootScope.loginCallbackRequest = req;
      $rootScope.loginCallbackType = type;

      // window.top.location.href = "/security/login";
      $("#login-popup").modal("show");
    };
    $rootScope.isInRoles = function (roleNames) {
      for (let index = 0; index < roleNames.length; index++) {
        const roleName = roleNames[index];
        if (authService.isInRole(roleName)) {
          return true;
        }
      }
      return false;
    };

    $rootScope.isInRole = function (roleName) {
      return true; //authService.isInRole(roleName);
    };
    $rootScope.showContentFilter = function (callback) {
      $rootScope.contentFilterCallback = callback;
      $("#modal-content-filter").modal("show");
    };

    $rootScope.updateOrders = function (index, minIndex, items) {
      items.splice(index, 1);
      for (var i = 0; i < items.length; i++) {
        items[i].priority = minIndex + i;
      }
    };

    $rootScope.showHelper = function (url) {
      $rootScope.helperUrl = url;
      $("#dev-helper-modal").modal("show");
    };

    $rootScope.openModal = function (
      templateUrl,
      controllerName,
      resolve,
      size = "lg",
      successCallback = null,
      failCallback = null
    ) {
      var modalInstance = $uibModal.open({
        animation: true,
        windowClass: "show",
        templateUrl: templateUrl,
        controller: controllerName,
        controllerAs: "$ctrl",
        size: size,
        resolve: resolve,
      });

      modalInstance.result.then(
        function (result) {
          successCallback(result);
        },
        function (error) {
          failCallback(error);
        }
      );
    };

    $rootScope.isImage = function (file) {
      let ext = file.name.substring(file.name.lastIndexOf("."));
      return ext
        .toLowerCase()
        .match(/([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|svg|webp)/g);
    };
  },
]);

"use strict";
appShared
  .directive("ngEnter", function () {
    return function (scope, element, attrs) {
      element.bind("keydown keypress", function (event) {
        if (event.which === 13) {
          scope.$apply(function () {
            scope.$eval(attrs.ngEnter);
          });

          event.preventDefault();
        }
      });
    };
  })
  .directive("ngScroll", function () {
    return function (scope, element, attrs) {
      element.bind("scroll", function (event) {
        scope.$apply(function () {
          scope.$eval(attrs.ngScroll);
        });
        event.preventDefault();
      });
    };
  })
  .directive("file", function () {
    return {
      scope: {
        file: "=",
        files: "=",
      },
      link: function (scope, el, attrs) {
        el.bind("change", function (event) {
          var files = event.target.files;
          var file = files[0];
          scope.file = file;
          scope.files = files;
          scope.$apply();
        });
      },
    };
  })
  .directive("imageonload", function () {
    return {
      restrict: "A",
      link: function (scope, element, attrs) {
        element.bind("load", function () {});
        element.bind("error", function () {});
      },
    };
  });

"use strict";
appShared
  .filter("trim", trimString)
  .filter("utcToLocal", FilterUtcDate)
  .filter("utcToLocalTime", FilterUtcDateTime)
  .filter("phoneNumber", FilterPhoneNumber)
  .filter("money", FilterMoney)
  .filter("markdown", MarkdownToHtml)
  .filter("trustUrl", trustUrl)
  .filter("trustHtml", trustHtml)
  .constant("ngAppSettings", {
    serviceBase: "",
    clientId: "ngAuthApp",
    facebookAppId: "",
    request: {
      pageSize: "20",
      pageIndex: 0,
      status: "Published",
      orderBy: "CreatedDateTime",
      direction: "Desc",
      fromDate: null,
      toDate: null,
      keyword: "",
      key: "",
      query: "{}",
    },
    privacies: ["VND", "USD"],
    pageSizes: ["5", "10", "15", "20"],
    directions: [
      {
        value: "0",
        title: "Asc",
      },
      {
        value: "1",
        title: "Desc",
      },
    ],
    orders: [
      {
        value: "CreatedDateTime",
        title: "Created Date",
      },
      {
        value: "Priority",
        title: "Priority",
      },

      {
        value: "Title",
        title: "Title",
      },
    ],
    contentStatuses: ["Deleted", "Preview", "Published", "Draft", "Schedule"],
    dataTypes: [
      { title: "Custom", value: 0 },
      { title: "DateTime", value: 1 },
      { title: "Date", value: 2 },
      { title: "Time", value: 3 },
      { title: "Duration", value: 4 },
      { title: "PhoneNumber", value: 5 },
      { title: "Currency", value: 6 },
      { title: "Text", value: 7 },
      { title: "Html", value: 8 },
      { title: "MultilineText", value: 9 },
      { title: "EmailAddress", value: 10 },
      { title: "Password", value: 11 },
      { title: "Url", value: 12 },
      { title: "ImageUrl", value: 13 },
      { title: "CreditCard", value: 14 },
      { title: "PostalCode", value: 15 },
      { title: "Upload", value: 16 },
    ],
  });

function trustUrl($sce) {
  return (url) => $sce.trustAsResourceUrl(url);
}

function trustHtml($sce) {
  return (html) => $sce.trustAsHtml(html);
}

function MarkdownToHtml($filter) {
  return function (mdContent) {
    var converter = new showdown.Converter();
    return converter.makeHtml(mdContent);
  };
}

function trimString() {
  return function (content, length = 150) {
    return content.length > length
      ? `${content.substring(0, length)}...`
      : content;
  };
}

function FilterUtcDate($filter) {
  return function (utcDateString, format) {
    format = format || "MM.dd.yyyy - hh:mm:ss a";
    // return if input date is null or undefined
    if (!utcDateString) {
      return;
    }

    // append 'Z' to the date string to indicate UTC time if the timezone isn't already specified
    if (
      typeof utcDateString == "string" &&
      utcDateString.indexOf("Z") === -1 &&
      utcDateString.indexOf("+") === -1
    ) {
      utcDateString += "Z";
    }

    // convert and format date using the built in angularjs date filter
    return $filter("date")(utcDateString, format);
  };
}
function FilterUtcDateTime($filter) {
  return function (utcDateString, format) {
    format = format || "yyyy-MM-ddThh:mm";
    // return if input date is null or undefined
    if (!utcDateString) {
      return;
    }

    // append 'Z' to the date string to indicate UTC time if the timezone isn't already specified
    if (
      typeof utcDateString == "string" &&
      utcDateString.indexOf("Z") === -1 &&
      utcDateString.indexOf("+") === -1
    ) {
      utcDateString += "Z";
    }

    // convert and format date using the built in angularjs date filter
    return $filter("date")(utcDateString, format);
  };
}
function buildDropdown(trumbowyg) {
  var dropdown = [];

  $.each(trumbowyg.o.plugins.fontfamily.fontList, function (index, font) {
    trumbowyg.addBtnDef("fontfamily_" + index, {
      title:
        '<span style="font-family: ' +
        font.family +
        ';">' +
        font.name +
        "</span>",
      hasIcon: false,
      fn: function () {
        trumbowyg.execCmd("fontName", font.family, true);
      },
    });
    dropdown.push("fontfamily_" + index);
  });

  return dropdown;
}
function FilterPhoneNumber() {
  return function (phone) {
    return phone.replace(/^([0-9]{3})([0-9]{3})([0-9]{4,})$/, "($1) $2-$3");
  };
}

function FilterMoney() {
  return function (money) {
    if (money) {
      return money.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
    }
  };
}

"use strict";
appShared.factory("ApiService", [
  "$location",
  "$http",
  "$q",
  "$rootScope",
  "localStorageService",
  "CryptoService",
  "AppSettings",
  function (
    $location,
    $http,
    $q,
    $rootScope,
    localStorageService,
    cryptoService,
    appSettings
  ) {
    var factory = {};

    var _refreshToken = async function () {
      let _authentication = await _fillAuthData();
      let data = {
        refreshToken: _authentication.refreshToken,
        accessToken: _authentication.accessToken,
      };
      if (_authentication && _authentication.refreshToken) {
        var apiUrl = `/rest/auth/user/renew-token`;
        var req = {
          method: "POST",
          url: apiUrl,
          data: JSON.stringify(data),
        };
        var resp = await _sendRequest(req);
        if (resp.success) {
          let encryptedData = resp.data;
          return _updateAuthData(encryptedData);
        } else {
          _logOut();
        }
      } else {
        _logOut();
      }
    };

    var _fillAuthData = async function () {
      await _getAllSettings();
      var encryptedAuthData = localStorageService.get("authorizationData");
      if (encryptedAuthData) {
        if ($rootScope.globalSettings.isEncryptApi) {
          return JSON.parse(
            cryptoService.decryptAES(
              encryptedAuthData.message,
              $rootScope.globalSettings.apiEncryptKey
            )
          );
        }
        return encryptedAuthData;
      }
      return {};
    };

    var _getPortalMenus = async function () {
      var req = {
        method: "GET",
        url: "/rest/mix-portal/common/portal-menus",
      };
      return _sendRequest(req);
    };

    var _updateAuthData = async function (encryptedData) {
      localStorageService.set("authorizationData", encryptedData);
    };

    var _getAllSettings = async function (culture) {
      $rootScope.globalSettings = localStorageService.get("globalSettings");
      $rootScope.translator = localStorageService.get("translator");
      $rootScope.mixConfigurations =
        localStorageService.get("mixConfigurations");
      if (
        !$rootScope.globalSettings ||
        new Date($rootScope.globalSettings.expiredAt) < new Date()
      ) {
        var url = "/rest/shared";
        if (culture) {
          url += "/" + culture;
        }
        url += "/get-all-settings";
        var req = {
          method: "GET",
          url: url,
        };
        return _sendRequest(req, true).then(function (response) {
          if (response.success) {
            response.data.globalSettings.lastUpdateConfiguration = new Date();
            localStorageService.set(
              "globalSettings",
              response.data.globalSettings
            );
            localStorageService.set("endpoints", response.data.endpoints);
            localStorageService.set("translator", response.data.translator);
            localStorageService.set(
              "mixConfigurations",
              response.data.mixConfigurations
            );
            $rootScope.globalSettings = response.data.globalSettings;
            $rootScope.mixConfigurations = response.data.mixConfigurations;
            $rootScope.translator = response.data.translator;
          } else {
            $rootScope.showErrors(response.errors);
          }
        });
      }
    };
    var _getGlobalSettings = async function () {
      $rootScope.globalSettings = localStorageService.get("globalSettings");
      if (
        !$rootScope.globalSettings ||
        new Date($rootScope.globalSettings.expiredAt) < new Date()
      ) {
        var url = "/rest/shared/get-global-settings";
        var req = {
          method: "GET",
          url: url,
        };
        return _sendRequest(req, true).then(function (response) {
          if (response.success) {
            response.data.lastUpdateConfiguration = new Date();
            localStorageService.set("globalSettings", response.data);
            $rootScope.globalSettings = response.data.globalSettings;
          } else {
            $rootScope.showErrors(response.errors);
          }
        });
      }
    };

    var _getTranslator = async function (culture) {
      $rootScope.translator = localStorageService.get("translator");
      if (!$rootScope.translator) {
        var url = `/rest/shared/mix-common/mix-languague-content?lang=${culture}`;
        var req = {
          method: "GET",
          url: url,
        };
        return _sendRequest(req, true).then(function (response) {
          if (response.success) {
            localStorageService.set("translator", response.data.translator);
            $rootScope.translator = response.data.translator;
          } else {
            $rootScope.showErrors(response.errors);
          }
        });
      }
    };

    var _initAllSettings = async function (culture) {
      localStorageService.remove("appSettings");

      var response = await _getAllSettings();
      if (response) {
        localStorageService.set(
          "mixConfigurations",
          response.mixConfigurations
        );
        localStorageService.set("appSettings", response.appSettings);
      }
      return response;
    };

    var _sendRequest = async function (
      req,
      skipAuthorize = false,
      token = null,
      retry = true
    ) {
      let apiVersion =
        req.apiVersion == undefined ? appSettings.apiVersion : req.apiVersion;
      let serviceBase =
        req.serviceBase == undefined
          ? appSettings.serviceBase
          : req.serviceBase;
      var serviceUrl = `${serviceBase}/api/${apiVersion}`;
      if (req.url.indexOf(serviceUrl) < 0) {
        req.url = serviceUrl + req.url;
      }
      var defer = $q.defer();
      req.uploadEventHandlers = {
        progress: function (e) {
          defer.notify((e.loaded * 100) / e.total);
        },
      };
      if (!req.headers) {
        req.headers = {
          "Content-Type": "application/json",
        };
      }

      if (!skipAuthorize) {
        let _authentication = await _fillAuthData();
        req.headers.Authorization = `Bearer ${_authentication.accessToken}`;
      }

      if (token) {
        req.headers.Authorization = `Bearer ${token}`;
      }

      return $http(req).then(
        function (resp) {
          return { success: true, data: resp.data };
        },
        async function (error) {
          if (error.status === 401 && retry) {
            return _refreshToken().then(() =>
              _sendRequest(req, skipAuthorize, null, false)
            );
          } else if (error.status === 401) {
            window.location.href = "/security/login";
          } else if (
            error.status === 200 ||
            error.status === 201 ||
            error.status === 204 ||
            error.status === 205
          ) {
            return {
              success: true,
              status: err.status,
              errors: [error.statusText || error.status],
            };
          } else {
            if (error.data) {
              return { success: false, errors: [error.data] };
            } else {
              return {
                success: false,
                errors: [error.statusText || error.status],
              };
            }
          }
        },
        function (progress) {
          console.log("uploading: " + Math.floor(progress) + "%");
        }
      );
    };
    var _sendPureRequest = async function (req) {
      if (!req.headers) {
        req.headers = {
          "Content-Type": "application/json",
        };
      }
      return $http(req).then(
        function (resp) {
          return { success: true, data: resp.data };
        },
        async function (error) {
          if (
            error.status === 200 ||
            error.status === 201 ||
            error.status === 204 ||
            error.status === 205
          ) {
            return {
              success: true,
              status: err.status,
              errors: [error.statusText || error.status],
            };
          } else {
            if (error.data) {
              return { success: false, errors: [error.data] };
            } else {
              return {
                success: false,
                errors: [error.statusText || error.status],
              };
            }
          }
        },
        function (progress) {
          console.log("uploading: " + Math.floor(progress) + "%");
        }
      );
    };
    var _ajaxSubmitForm = async function (form, url) {
      var req = {
        method: "POST",
        url: url,
        headers: { "Content-Type": undefined },
        contentType: false, // Not to set any content header
        processData: false, // Not to process data
        data: form,
      };
      return await _sendRequest(req);
    };
    var _logOut = async function () {
      localStorageService.remove("authorizationData");
      window.top.location.href = "/security/login";
      //   var apiUrl = "/rest/auth/logout";
      //   var req = {
      //     method: "GET",
      //     url: apiUrl,
      //   };
      //   localStorageService.remove("authorizationData");
      //   var resp = await _getRestApiResult(req, false);
      //   if (resp.success) {
      //     window.top.location.href = "/security/login";
      //   }
    };

    factory.initAllSettings = _initAllSettings;
    factory.getAllSettings = _getAllSettings;
    factory.getGlobalSettings = _getGlobalSettings;
    factory.getTranslator = _getTranslator;
    factory.refreshToken = _refreshToken;
    factory.fillAuthData = _fillAuthData;
    factory.getPortalMenus = _getPortalMenus;
    factory.updateAuthData = _updateAuthData;
    factory.sendRequest = _sendRequest;
    factory.sendPureRequest = _sendPureRequest;
    factory.ajaxSubmitForm = _ajaxSubmitForm;
    return factory;
  },
]);

"use strict";
appShared.factory("AuthService", [
  "$http",
  "$rootScope",
  "$routeParams",
  "$q",
  "localStorageService",
  "CryptoService",
  "ApiService",
  function (
    $http,
    $rootScope,
    $routeParams,
    $q,
    localStorageService,
    cryptoService,
    apiService
  ) {
    var authServiceFactory = {};
    var _authentication = null;

    var _saveRegistration = function (registration) {
      _logOut();

      return $http
        .post("/rest/auth/user/register", registration)
        .then(function (response) {
          return response;
        });
    };

    var _forgotPassword = async function (data) {
      var apiUrl = "/rest/auth/user/forgot-password";
      var req = {
        method: "POST",
        url: apiUrl,
        data: JSON.stringify(data),
      };
      var resp = await apiService.sendRequest(req);
      return resp;
    };

    var _resetPassword = async function (data) {
      var apiUrl = "/rest/auth/user/reset-password";
      var req = {
        method: "POST",
        url: apiUrl,
        data: JSON.stringify(data),
      };
      var resp = await apiService.sendRequest(req);
      return resp;
    };

    var _getExternalLoginProviders = async function (data) {
      var apiUrl = "/rest/auth/user/get-external-login-providers";
      var req = {
        method: "GET",
        url: apiUrl,
      };
      var resp = await apiService.sendRequest(req);
      return resp;
    };

    var _login = async function (loginData, isRedirect = true) {
      var data = {
        UserName: loginData.username,
        Password: loginData.password,
        RememberMe: loginData.rememberMe,
        Email: "",
        ReturnUrl: "",
      };
      var message = cryptoService.encryptAES(JSON.stringify(data));
      var apiUrl = "/rest/auth/user/login";
      var req = {
        method: "POST",
        url: apiUrl,
        data: JSON.stringify({ message: message }),
      };
      var resp = await apiService.sendRequest(req, true);
      if (resp.success) {
        let encryptedData = resp.data;
        apiService.updateAuthData(encryptedData);
        apiService.getAllSettings().then(function () {
          if (isRedirect) {
            if ($routeParams.ReturnUrl) {
              setTimeout(() => {
                window.top.location = $routeParams.ReturnUrl;
              }, 200);
            } else if (
              document.referrer &&
              document.referrer.indexOf("init") === -1
            ) {
              setTimeout(() => {
                window.top.location = document.referrer;
              }, 200);
            } else {
              setTimeout(() => {
                window.top.location = "/";
              }, 200);
            }
          }
        });
      } else {
        $rootScope.isBusy = false;
        $rootScope.showErrors(resp.errors);
      }
      return resp;
    };

    var _loginPopup = async function (loginData) {
      return await this.login(loginData);
    };

    var _externalLogin = async function (loginData, provider) {
      var data = {
        provider: provider,
        username: loginData.username,
        email: loginData.email,
        externalAccessToken: loginData.accessToken,
      };
      var message = cryptoService.encryptAES(JSON.stringify(data));
      var apiUrl = "/rest/auth/user/external-login";
      var req = {
        method: "POST",
        url: apiUrl,
        data: JSON.stringify({ message: message }),
      };
      var resp = await apiService.sendRequest(req, true);

      if (resp.success) {
        let encryptedData = resp.data;
        apiService.updateAuthData(encryptedData);
        apiService.initAllSettings().then(function () {
          return resp;
        });
      } else {
        $rootScope.isBusy = false;
        $rootScope.showErrors(resp.errors);
      }
      return resp;
    };

    var _logOut = async function () {
      localStorageService.remove("authorizationData");
      window.top.location.href = "/security/login";

      //     var apiUrl = "/rest/auth/logout";
      //   var req = {
      //     method: "GET",
      //     url: apiUrl,
      //   };

      //   _authentication = null;
      //   var resp = await apiService.sendRequest(req);
      //   if (resp.success) {
      //     window.top.location.href = "/security/login";
      //   }
    };

    var _fillAuthData = async function () {
      this.authentication = await apiService.fillAuthData();
      return this.authentication;
    };

    var _refreshToken = async function () {
      await apiService.refreshToken();
      this.authentication = await apiService.fillAuthData();
      return this.authentication;
    };

    var _isInRole = function (roleName) {
      if (!this.authentication || !this.authentication.roles) {
        return false;
      }
      var role = this.authentication.roles.filter(
        (m) => m.description == roleName && m.isActived
      );
      return role.length > 0;
    };

    authServiceFactory.saveRegistration = _saveRegistration;
    authServiceFactory.isInRole = _isInRole;
    authServiceFactory.forgotPassword = _forgotPassword;
    authServiceFactory.resetPassword = _resetPassword;
    authServiceFactory.login = _login;
    authServiceFactory.externalLogin = _externalLogin;
    authServiceFactory.loginPopup = _loginPopup;
    authServiceFactory.logOut = _logOut;
    authServiceFactory.fillAuthData = _fillAuthData;
    authServiceFactory.refreshToken = _refreshToken;
    authServiceFactory.getExternalLoginProviders = _getExternalLoginProviders;
    return authServiceFactory;
  },
]);

"use strict";
appShared.factory("BaseRestService", [
  "$rootScope",
  "$routeParams",
  "AppSettings",
  "AuthService",
  "ApiService",
  function ($rootScope, $routeParams, appSettings, authService, apiService) {
    var serviceFactory = {};
    var _init = function (modelName, isGlobal, lang, serviceBase, apiVersion) {
      this.modelName = modelName;
      this.apiVersion = apiVersion || appSettings.apiVersion;
      this.serviceBase = serviceBase || appSettings.serviceBase;
      if (!isGlobal && isGlobal != "true") {
        if ($rootScope.mixConfigurations || lang) {
          this.lang = lang || $rootScope.globalSettings.lang;
          this.prefixUrl = `/rest/mix-portal/${modelName}`;
        } else {
          this.prefixUrl = `/rest/mix-portal/${modelName}`;
        }
      } else {
        this.prefixUrl = `/rest/mix-portal/${modelName}`;
      }
    };

    var _initService = function (
      path,
      modelName,
      isGlobal,
      lang,
      serviceBase,
      apiVersion
    ) {
      this.modelName = modelName;
      this.apiVersion =
        apiVersion == undefined ? appSettings.apiVersion : apiVersion;
      this.serviceBase =
        serviceBase == undefined ? appSettings.serviceBase : serviceBase;
      if (!isGlobal && isGlobal != "true") {
        if ($rootScope.mixConfigurations || lang) {
          this.lang = lang || $rootScope.globalSettings.lang;
          this.prefixUrl = `${path}/${modelName}`;
        } else {
          this.prefixUrl = `${path}/${modelName}`;
        }
      } else {
        this.prefixUrl = `${path}/${modelName}`;
      }
    };

    var _duplicate = async function (params = [], queries) {
      var url = this.prefixUrl + "/duplicate";
      for (let i = 0; i < params.length; i++) {
        if (params[i] != undefined && params[i] != null) {
          url += "/" + params[i];
        }
      }
      var querystring = _parseQuery(queries);
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: `${url}?${querystring}`,
      };
      return await this.getRestApiResult(req);
    };

    var _getSingle = async function (params = [], queries) {
      var url = this.prefixUrl;
      for (let i = 0; i < params.length; i++) {
        if (params[i] != undefined && params[i] != null) {
          url += "/" + params[i];
        }
      }
      var querystring = _parseQuery(queries);
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: `${url}?${querystring}`,
      };
      return await this.getRestApiResult(req);
    };

    var _clearCache = async function (params = [], queries) {
      var url = this.prefixUrl;
      for (let i = 0; i < params.length; i++) {
        if (params[i] != undefined && params[i] != null) {
          url += "/remove-cache/" + params[i];
        }
      }
      var querystring = _parseQuery(queries);
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "DELETE",
        url: `${url}?${querystring}`,
      };
      return await this.getRestApiResult(req);
    };

    var _getDefault = async function (queriesObj) {
      var url = `${this.prefixUrl}/default`;
      var querystring = _parseQuery(queriesObj);
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: `${url}?${querystring}`,
      };
      return await this.getRestApiResult(req);
    };
    var _count = async function (params = []) {
      var url = this.prefixUrl + "/count";
      for (let i = 0; i < params.length; i++) {
        if (params[i] != null) {
          url += "/" + params[i];
        }
      }
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _getList = async function (objData, queries = null) {
      var data = serviceFactory.parseQuery(objData);

      var url = this.prefixUrl;

      if (data) {
        url += "?";
        url = url.concat(data);
        if (queries) {
          url += "&";
          var extraQueries = serviceFactory.parseQuery(queries);
          url = url.concat(extraQueries);
        }
      }
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };

    var _export = async function (objData) {
      var data = serviceFactory.parseQuery(objData);
      var url = this.prefixUrl + "/export";

      if (data) {
        url += "?";
        url = url.concat(data);
      }
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };

    var _delete = async function (params = []) {
      var url = this.prefixUrl;
      for (let i = 0; i < params.length; i++) {
        if (params[i] != null) {
          url += "/" + params[i];
        }
      }
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "DELETE",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _save = async function (objData) {
      if (
        objData.id == 0 ||
        objData.id == null ||
        objData.id == "00000000-0000-0000-0000-000000000000"
      ) {
        return await this.create(objData);
      } else {
        return await this.update(objData.id, objData);
      }
    };
    var _create = async function (objData) {
      var url = this.prefixUrl;
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await this.getRestApiResult(req);
    };

    var _update = async function (id, objData) {
      var url = this.prefixUrl + "/" + id;
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "PUT",
        url: url,
        data: objData,
      };
      return await this.getRestApiResult(req);
    };

    var _saveFields = async function (id, objData) {
      var url = this.prefixUrl + "/" + id;
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "PATCH",
        url: url,
        data: JSON.stringify(objData),
      };
      return await this.getRestApiResult(req);
    };

    var _saveMany = async function (models) {
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "POST",
        url: this.prefixUrl + "/save-many",
        data: JSON.stringify(models),
      };
      return await this.getRestApiResult(req);
    };

    var _applyList = async function (objData) {
      var url = this.prefixUrl + "/list-action";
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await this.getRestApiResult(req);
    };

    var _ajaxSubmitForm = async function (form, url, onUploadFileProgress) {
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        headers: { "Content-Type": undefined },
        contentType: false, // Not to set any content header
        processData: false, // Not to process data
        data: form,
      };
      return await this.getRestApiResult(
        req,
        this.serviceBase,
        onUploadFileProgress || _onUploadFileProgress
      );
    };

    var _parseQuery = function (req) {
      var result = "";
      if (req) {
        for (var key in req) {
          if (angular.isObject(req.query)) {
            req.query = JSON.stringify(req.query);
          }
          if (req.hasOwnProperty(key) && req[key]) {
            if (result != "") {
              result += "&";
            }
            result += `${key}=${req[key]}`;
          }
        }
        return result;
      } else {
        return result;
      }
    };

    var _onUploadFileProgress = function (progress) {
      console.log(`loaded ${progress}%`);
    };

    var _getRestApiResult = async function (req) {
      if (!authService.authentication) {
        await authService.fillAuthData();
      }
      if (authService.authentication) {
        req.Authorization = authService.authentication.accessToken;
      }
      if (!req.headers) {
        req.headers = {
          "Content-Type": "application/json",
        };
      }
      req.headers.Authorization = "Bearer " + req.Authorization || "";

      return apiService.sendRequest(req).then(function (resp) {
        return resp;
      });
    };

    serviceFactory.lang = "";
    serviceFactory.prefixUrl = "";
    serviceFactory.init = _init;
    serviceFactory.initService = _initService;
    serviceFactory.count = _count;
    serviceFactory.duplicate = _duplicate;
    serviceFactory.applyList = _applyList;
    serviceFactory.clearCache = _clearCache;
    serviceFactory.getDefault = _getDefault;
    serviceFactory.getSingle = _getSingle;
    serviceFactory.getList = _getList;
    serviceFactory.export = _export;
    serviceFactory.create = _create;
    serviceFactory.update = _update;
    serviceFactory.save = _save;
    serviceFactory.saveFields = _saveFields;
    serviceFactory.saveMany = _saveMany;
    serviceFactory.delete = _delete;
    serviceFactory.ajaxSubmitForm = _ajaxSubmitForm;
    serviceFactory.parseQuery = _parseQuery;
    serviceFactory.getRestApiResult = _getRestApiResult;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("BaseService", [
  "$rootScope",
  "AppSettings",
  "ApiService",
  "CommonService",
  function ($rootScope, appSettings, apiService, commonService) {
    var serviceFactory = {};

    var _init = function (modelName, isGlobal, serviceBase) {
      this.modelName = modelName;
      this.serviceBase = serviceBase || appSettings.serviceBase;
      if (!isGlobal && $rootScope.globalSettings.lang) {
        this.lang = $rootScope.globalSettings.lang;
        this.prefixUrl = "/" + this.lang + "/" + modelName;
      } else {
        this.prefixUrl = "/rest/mix-portal/" + modelName;
      }
    };
    var _getSingle = async function (params = []) {
      var url =
        (this.prefixUrl || "/" + this.lang + "/" + this.modelName) + "/details";
      for (let i = 0; i < params.length; i++) {
        if (params[i]) {
          url += "/" + params[i];
        }
      }
      var req = {
        method: "GET",
        serviceBase: this.serviceBase,
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    var _getList = async function (objData, params = []) {
      var url = this.prefixUrl + "/list";
      for (let i = 0; i < params.length; i++) {
        url += "/" + params[i];
      }
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };

      return await apiService.sendRequest(req);
    };
    var _export = async function (objData, params = []) {
      var url = this.prefixUrl + "/export";
      for (let i = 0; i < params.length; i++) {
        url += "/" + params[i];
      }
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };

      return await apiService.sendRequest(req);
    };

    var _delete = async function (id) {
      var url = this.prefixUrl + "/delete/" + id;
      var req = {
        serviceBase: this.serviceBase,
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    var _save = async function (objData) {
      var url = this.prefixUrl + "/save";
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _saveProperties = async function (objData) {
      var url = this.prefixUrl + "/save-properties";
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _saveList = async function (objData) {
      var url = this.prefixUrl + "/save-list";
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };

    var _updateInfos = async function (objData) {
      var url = this.prefixUrl + "/update-infos";
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _ajaxSubmitForm = async function (form, url, onUploadFileProgress) {
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        headers: { "Content-Type": undefined },
        data: form,
      };
      return await apiService.sendRequest(
        req,
        this.serviceBase,
        onUploadFileProgress || _onUploadFileProgress
      );
    };

    var _applyList = async function (objData) {
      var url = this.prefixUrl + "/apply-list";
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };

    var _onUploadFileProgress = function (progress) {
      console.log(`loaded ${progress}%`);
    };

    serviceFactory.lang = "";
    serviceFactory.prefixUrl = "";
    serviceFactory.init = _init;
    serviceFactory.getSingle = _getSingle;
    serviceFactory.getList = _getList;
    serviceFactory.export = _export;
    serviceFactory.save = _save;
    serviceFactory.saveProperties = _saveProperties;
    serviceFactory.saveList = _saveList;
    serviceFactory.applyList = _applyList;
    serviceFactory.delete = _delete;
    serviceFactory.updateInfos = _updateInfos;
    serviceFactory.ajaxSubmitForm = _ajaxSubmitForm;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("CommonService", [
  "$rootScope",
  "ApiService",
  "localStorageService",
  function ($rootScope, apiService, localStorageService) {
    var factory = {};

    var _loadJsonData = async function (name) {
      var req = {
        method: "GET",
        url: "/rest/shared/json-data/" + name,
      };
      return await apiService.sendRequest(req, true);
    };

    var _clearCache = async function (name) {
      var req = {
        method: "GET",
        url: "/rest/shared/clear-cache",
      };
      return await apiService.sendRequest(req, false);
    };

    var _showAlertMsg = function (title, message) {
      $rootScope.message = {
        title: title,
        value: message,
      };
      $("#modal-msg").modal("show");
    };

    var _checkfile = function (sender, validExts) {
      var fileExt = sender.value;
      fileExt = fileExt.substring(fileExt.lastIndexOf("."));
      if (validExts.indexOf(fileExt) < 0) {
        _showAlertMsg(
          "",
          "Invalid file selected, valid files are of " +
            validExts.toString() +
            " types."
        );
        sender.value = "";
        return false;
      } else return true;
    };

    var _sendMail = async function (subject, body) {
      var url = "/admin/sendmail";
      var req = {
        method: "POST",
        url: url,
        data: { subject: subject, body: body },
      };
      return apiService.sendRequest(req).then(function (response) {
        return response.data;
      });
    };

    var _checkConfig = async function (lastSync) {
      if (!lastSync) {
        _renewSettings();
      } else {
        var d = new Date(lastSync);
        d.setMinutes(d.getMinutes() + 20);
        let now = new Date();
        if (now > d) {
          _renewSettings();
        } else {
          var url = "/rest/shared/check-config/" + lastSync;
          var req = {
            method: "GET",
            url: url,
          };
          return apiService.sendRequest(req).then(function (response) {
            if (response.data) {
              _renewSettings();
            } else {
              $rootScope.globalSettings =
                localStorageService.get("appSettings");
            }
          });
        }
      }
    };

    var _renewSettings = function () {
      _removeSettings().then(() => {
        _removeTranslator().then(() => {
          apiService.getAllSettings();
        });
      });
    };

    var _genrateSitemap = async function () {
      var url = "/api/v2/rest/shared/sitemap";
      var req = {
        method: "GET",
        url: url,
      };
      return apiService.sendRequest(req).then(function (response) {
        return response.data;
      });
    };

    var _getPermissions = async function () {
      var req = {
        method: "GET",
        url: "/rest/shared/permissions",
      };
      return await apiService.sendRequest(req);
    };

    var _removeSettings = async function (settings) {
      localStorageService.remove("mixConfigurations");
    };

    var _removeTranslator = async function () {
      localStorageService.remove("translator");
    };

    var _stopApplication = async function () {
      var req = {
        method: "GET",
        url: "/rest/shared/stop-application/",
      };
      return await apiService.sendRequest(req, false);
    };

    factory.sendMail = _sendMail;
    factory.stopApplication = _stopApplication;
    factory.removeSettings = _removeSettings;
    factory.removeTranslator = _removeTranslator;
    factory.showAlertMsg = _showAlertMsg;
    factory.clearCache = _clearCache;
    factory.checkfile = _checkfile;
    factory.genrateSitemap = _genrateSitemap;
    factory.loadJsonData = _loadJsonData;
    factory.getPermissions = _getPermissions;
    return factory;
  },
]);

"use strict";
appShared.factory("CryptoService", [
  "$rootScope",
  "ngAppSettings",
  function ($rootScope, ngAppSettings) {
    var factory = {};
    //size: 128 / 192 / 256
    var size = 256;

    var _encryptAES = function (message, iCompleteEncodedKey = null) {
      var key, iv;
      ngAppSettings;
      iCompleteEncodedKey =
        iCompleteEncodedKey || $rootScope.globalSettings.apiEncryptKey;
      var keys = _parseKeys(iCompleteEncodedKey);
      key = keys.key;
      iv = keys.iv;
      return _encryptMessage(message, key, iv);
    };

    var _decryptAES = function (ciphertext, iCompleteEncodedKey = null) {
      var key, iv;
      iCompleteEncodedKey =
        iCompleteEncodedKey || $rootScope.globalSettings.apiEncryptKey;
      var keys = _parseKeys(iCompleteEncodedKey);
      key = keys.key;
      iv = keys.iv;
      return _decryptMessage(ciphertext, key, iv);
    };

    var _decryptMessage = function (ciphertext, key, iv) {
      var cipherParams = CryptoJS.lib.CipherParams.create({
        ciphertext: CryptoJS.enc.Base64.parse(ciphertext),
      });
      var options = {
        iv: iv,
        keySize: size / 8,
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7,
      };
      var decrypted = CryptoJS.AES.decrypt(cipherParams, key, options);
      return decrypted.toString(CryptoJS.enc.Utf8);
    };

    var _encryptMessage = function (message, key, iv) {
      var options = {
        iv: iv,
        keySize: size / 8,
        mode: CryptoJS.mode.CBC,
        padding: CryptoJS.pad.Pkcs7,
      };
      if (angular.isObject(message)) {
        message = JSON.stringify(message);
      }
      var encrypted = CryptoJS.AES.encrypt(message, key, options);
      return encrypted.ciphertext.toString(CryptoJS.enc.Base64);
    };

    var _parseKeys = function (iCompleteEncodedKey) {
      var keyStrings = CryptoJS.enc.Utf8.stringify(
        CryptoJS.enc.Base64.parse(iCompleteEncodedKey)
      ).split(",");
      return {
        iv: CryptoJS.enc.Base64.parse(keyStrings[0]),
        key: CryptoJS.enc.Base64.parse(keyStrings[1]),
      };
    };

    factory.parseKeys = _parseKeys;
    factory.encryptAES = _encryptAES;
    factory.decryptAES = _decryptAES;
    return factory;
  },
]);

"use strict";
appShared.factory("FileService", [
  "BaseService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("file", true);
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("AppSettingsService", [
  "$rootScope",
  "ApiService",
  "CommonService",
  "localStorageService",
  "AppSettings",
  function (
    $rootScope,
    apiService,
    commonService,
    localStorageService,
    appSettings
  ) {
    var factory = {};
    var _appSettings = {
      lang: "",
      data: null,
    };
    var _fillAppSettings = async function (culture) {
      this.appSettings = localStorageService.get("appSettings");
      if (
        this.appSettings &&
        this.appSettings.data &&
        this.appSettings.lang === culture
      ) {
        //_appSettings = appSettings;
        //this.appSettings = appSettings;

        return this.appSettings;
      } else {
        this.appSettings = await _getappSettings(culture);
        return this.appSettings;
      }
    };
    var _getappSettings = async function (culture) {
      var appSettings = localStorageService.get("appSettings");
      if (appSettings && (!culture || appSettings.lang === culture)) {
        appSettings = appSettings;
        return appSettings;
      } else {
        appSettings = { lang: culture, data: null };
        var url = "/admin";
        if (culture) {
          url += "/" + culture;
        }
        url += "/global-settings";
        var req = {
          method: "GET",
          url: url,
        };
        var getData = await apiService.sendRequest(req);
        if (getData.success) {
          appSettings = getData.data;
          localStorageService.set("appSettings", appSettings);
        }
        return appSettings;
      }
    };
    var _reset = async function (lang) {
      localStorageService.remove("appSettings");
      await _getappSettings(lang);
    };
    var _get = function (keyword, isWrap, defaultText) {
      if ($rootScope.waitForInit()) {
        if (!this.appSettings && $rootScope.globalSettings) {
          $rootScope.isBusy = true;
          this.fillAppSettings($rootScope.globalSettings.lang).then(function (
            response
          ) {
            $rootScope.isBusy = false;
            return (
              response[keyword] ||
              defaultText ||
              getLinkCreateLanguage(keyword, isWrap)
            );
          });
        } else {
          return (
            this.appSettings[keyword] ||
            defaultText ||
            getLinkCreateLanguage(keyword, isWrap)
          );
        }
      }
    };

    var _getAsync = async function (keyword, defaultText) {
      if (!this.appSettings && $rootScope.globalSettings) {
        $rootScope.isBusy = true;
        this.appSettings = await _fillAppSettings(lang);
        return (
          this.appSettings[keyword] ||
          defaultText ||
          getLinkCreateLanguage(keyword, isWrap)
        );
      } else {
        return (
          this.appSettings[keyword] ||
          defaultText ||
          getLinkCreateLanguage(keyword, isWrap)
        );
      }
    };

    var getLinkCreateLanguage = function (keyword, isWrap) {
      //return '<span data-key="/admin/language/details?k=' + keyword + '">[' + keyword + ']</span>';
      return isWrap ? "[" + keyword + "]" : keyword;
    };

    factory.getAsync = _getAsync;
    factory.get = _get;
    factory.reset = _reset;
    factory.appSettings = _appSettings;
    factory.fillAppSettings = _fillAppSettings;
    return factory;
  },
]);

"use strict";
appShared.factory("gpayService", [
  "$rootScope",
  "ngAppSettings",
  function ($rootScope, ngAppSettings) {
    var factory = {};
    /**
     * Define the version of the Google Pay API referenced when creating your
     * configuration
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#PaymentDataRequest|apiVersion in PaymentDataRequest}
     */
    const baseRequest = {
      apiVersion: 2,
      apiVersionMinor: 0,
    };

    /**
     * Card networks supported by your site and your gateway
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}
     * @todo confirm card networks supported by your site and gateway
     */
    const allowedCardNetworks = [
      "AMEX",
      "DISCOVER",
      "JCB",
      "MASTERCARD",
      "VISA",
    ];

    /**
     * Card authentication methods supported by your site and your gateway
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}
     * @todo confirm your processor supports Android device tokens for your
     * supported card networks
     */
    const allowedCardAuthMethods = ["PAN_ONLY", "CRYPTOGRAM_3DS"];

    /**
     * Identify your gateway and your site's gateway merchant identifier
     *
     * The Google Pay API response will return an encrypted payment method capable
     * of being charged by a supported gateway after payer authorization
     *
     * @todo check with your gateway on the parameters to pass
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#gateway|PaymentMethodTokenizationSpecification}
     */
    const tokenizationSpecification = {
      type: "PAYMENT_GATEWAY",
      parameters: {
        gateway: "example",
        gatewayMerchantId: "exampleGatewayMerchantId",
      },
    };

    /**
     * Describe your site's support for the CARD payment method and its required
     * fields
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}
     */
    const baseCardPaymentMethod = {
      type: "CARD",
      parameters: {
        allowedAuthMethods: allowedCardAuthMethods,
        allowedCardNetworks: allowedCardNetworks,
      },
    };

    /**
     * Describe your site's support for the CARD payment method including optional
     * fields
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}
     */
    const cardPaymentMethod = Object.assign({}, baseCardPaymentMethod, {
      tokenizationSpecification: tokenizationSpecification,
    });

    /**
     * An initialized google.payments.api.PaymentsClient object or null if not yet set
     *
     * @see {@link getGooglePaymentsClient}
     */
    let paymentsClient = null;

    /**
     * Configure your site's support for payment methods supported by the Google Pay
     * API.
     *
     * Each member of allowedPaymentMethods should contain only the required fields,
     * allowing reuse of this base request when determining a viewer's ability
     * to pay and later requesting a supported payment method
     *
     * @returns {object} Google Pay API version, payment methods supported by the site
     */
    var _getGoogleIsReadyToPayRequest = function () {
      return Object.assign({}, baseRequest, {
        allowedPaymentMethods: [baseCardPaymentMethod],
      });
    };

    /**
     * Configure support for the Google Pay API
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#PaymentDataRequest|PaymentDataRequest}
     * @returns {object} PaymentDataRequest fields
     */
    var _getGooglePaymentDataRequest = function (
      merchantInfo,
      transactionInfo
    ) {
      const paymentDataRequest = Object.assign({}, baseRequest);
      paymentDataRequest.allowedPaymentMethods = [cardPaymentMethod];
      paymentDataRequest.transactionInfo = transactionInfo;
      paymentDataRequest.merchantInfo = merchantInfo;
      paymentDataRequest.callbackIntents = ["PAYMENT_AUTHORIZATION"];
      paymentDataRequest.emailRequired = true;
      paymentDataRequest.shippingOptionRequired = false;
      paymentDataRequest.shippingAddressRequired = false;

      return paymentDataRequest;
    };

    /**
     * Return an active PaymentsClient or initialize
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/client#PaymentsClient|PaymentsClient constructor}
     * @returns {google.payments.api.PaymentsClient} Google Pay API client
     */
    var _getGooglePaymentsClient = function (
      merchantInfo,
      onPaymentAuthorized
    ) {
      if (paymentsClient === null) {
        paymentsClient = new google.payments.api.PaymentsClient({
          environment: this.environment,
          merchantInfo: merchantInfo,
          paymentDataCallbacks: {
            onPaymentAuthorized: onPaymentAuthorized,
          },
        });
      }
      return paymentsClient;
    };

    /**
     * Prefetch payment data to improve performance
     *
     * @see {@link https://developers.google.com/pay/api/web/reference/client#prefetchPaymentData|prefetchPaymentData()}
     */
    var _prefetchGooglePaymentData = function () {
      const paymentDataRequest = getGooglePaymentDataRequest();
      // transactionInfo must be set but does not affect cache
      paymentDataRequest.transactionInfo = {
        totalPriceStatus: "NOT_CURRENTLY_KNOWN",
        currencyCode: "USD",
      };
      const paymentsClient = this.getGooglePaymentsClient();
      paymentsClient.prefetchPaymentData(paymentDataRequest);
    };

    factory.prefetchGooglePaymentData = _prefetchGooglePaymentData;
    factory.getGooglePaymentsClient = _getGooglePaymentsClient;
    factory.getGooglePaymentDataRequest = _getGooglePaymentDataRequest;
    factory.getGoogleIsReadyToPayRequest = _getGoogleIsReadyToPayRequest;
    return factory;
  },
]);

"use strict";
appShared.factory("MetadataService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.initService("/rest/mix-services", "metadata");

    var _getOrCreateMetadata = async function (objData) {
      var url = `${this.prefixUrl}/get-or-create-metadata`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await this.getRestApiResult(req);
    };

    var _deleteMetadataContentAssociation = async function (id) {
      var url = `${this.prefixUrl}/delete-metadata-association/${id}`;
      var req = {
        serviceBase: this.serviceBase,
        method: "DELETE",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _createMetadataContentAssociation = async function (objData) {
      var url = `${this.prefixUrl}/create-metadata-association`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await this.getRestApiResult(req);
    };

    var _getMetadataByContent = async function (
      contentType,
      contentId,
      request
    ) {
      var url = `${this.prefixUrl}/get-metadata/${contentType}/${contentId}`;
      var data = serviceFactory.parseQuery(request);
      if (data) {
        url += "?";
        url = url.concat(data);
      }
      var req = {
        serviceBase: this.serviceBase,
        method: "GET",
        url: url,
        data: request,
      };
      return await this.getRestApiResult(req);
    };
    // Define more service methods here
    serviceFactory.createMetadataContentAssociation =
      _createMetadataContentAssociation;
    serviceFactory.deleteMetadataContentAssociation =
      _deleteMetadataContentAssociation;
    serviceFactory.getMetadataByContent = _getMetadataByContent;
    serviceFactory.getOrCreateMetadata = _getOrCreateMetadata;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("StoreService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init(
      "",
      null,
      "en-us",
      "https://dev-mixcore.azurewebsites.net",
      "v2"
    );
    // Define more service methods here
    var _getThemes = async function (objData) {
      var data = serviceFactory.parseQuery(objData);
      var url = "/rest/mixcore/post-content/filter";
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await this.getRestApiResult(req);
    };

    var _getCategories = async function (objData) {
      var data = serviceFactory.parseQuery(objData);
      var url = "/rest/en-us/mix-database-data/client";

      if (data) {
        url += "?";
        url = url.concat(data);
      }
      var req = {
        serviceBase: this.serviceBase,
        apiVersion: this.apiVersion,
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };

    serviceFactory.getThemes = _getThemes;
    serviceFactory.getCategories = _getCategories;

    return serviceFactory;
  },
]);

"use strict";
appShared.factory("TenancyService", [
  "ApiService",
  "BaseRestService",
  function (apiService, baseService) {
    var serviceFactory = Object.create(baseService);
    // serviceFactory.init("mix-tenancy");
    serviceFactory.prefixUrl = `/rest/mix-tenancy/setup`;

    var _syncTemplates = async function (id) {
      var url = this.prefixUrl + "/sync/" + id;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    var _install = async function (objData) {
      var url = this.prefixUrl + "/install";
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _export = async function (id, objData) {
      var url = this.prefixUrl + "/export/" + id;
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _getExportData = async function (id) {
      var url =
        (this.prefixUrl || "/" + this.lang + "/" + this.modelName) +
        "/export/" +
        id;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    var _import = async function (data) {
      var req = {
        method: "POST",
        url: this.prefixUrl + "/import-theme",
        data: JSON.stringify(data),
      };
      return await apiService.sendRequest(req);
    };
    serviceFactory.install = _install;
    serviceFactory.export = _export;
    serviceFactory.import = _import;
    serviceFactory.syncTemplates = _syncTemplates;
    serviceFactory.getExportData = _getExportData;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("ThemeService", [
  "ApiService",
  "BaseRestService",
  function (apiService, baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-theme");

    var _syncTemplates = async function (id) {
      var url = this.prefixUrl + "/sync/" + id;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    var _install = async function (objData) {
      var url = this.prefixUrl + "/install";
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _installPortal = async function (objData) {
      var url = this.prefixUrl + "/install-portal";
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _export = async function (objData) {
      var url = this.prefixUrl + "/export";
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _getExportData = async function (id) {
      var url =
        (this.prefixUrl || "/" + this.lang + "/" + this.modelName) +
        "/export/" +
        id;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    var _import = async function (data) {
      var req = {
        method: "POST",
        url: this.prefixUrl + "/import-theme",
        data: JSON.stringify(data),
      };
      return await apiService.sendRequest(req);
    };
    serviceFactory.import = _import;
    serviceFactory.install = _install;
    serviceFactory.installPortal = _installPortal;
    serviceFactory.export = _export;
    serviceFactory.syncTemplates = _syncTemplates;
    serviceFactory.getExportData = _getExportData;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("TranslatorService", [
  "$rootScope",
  "ApiService",
  "CommonService",
  "localStorageService",
  function ($rootScope, apiService, commonService, localStorageService) {
    var factory = {};
    var _translator = {
      lang: "",
      data: null,
    };
    var _init = function (translator) {
      this._translator = translator;
    };

    var _fillTranslator = async function (culture) {
      this.translator = localStorageService.get("translator");
      if (
        this.translator &&
        this.translator.data &&
        this.translator.lang === culture
      ) {
        return this.translator;
      } else {
        this.translator = await _getTranslator(culture);
        return this.translator;
      }
    };
    var _getTranslator = async function (culture) {
      var translator = localStorageService.get("translator");
      if (translator && translator.lang === culture) {
        translator = translator;
        return translator;
      } else {
        translator = { lang: culture, data: null };
        var url = "/admin";
        if (culture) {
          url += "/" + culture;
        }
        url += "/translator";
        var req = {
          method: "GET",
          url: url,
        };
        translator.lang = culture;
        var getData = await apiService.sendRequest(req);
        if (getData.success) {
          translator.data = getData.data;
          localStorageService.set("translator", translator);
        }
        return translator;
      }
    };
    var _reset = async function (lang) {
      localStorageService.remove("translator");
      await _getTranslator(lang);
    };
    var _get = function (keyword, isWrap, defaultText) {
      if (!$rootScope.translator.data && $rootScope.globalSettings) {
        $rootScope.isBusy = true;
        this.fillTranslator($rootScope.globalSettings.lang).then(function (
          response
        ) {
          $rootScope.isBusy = false;
          return (
            response.data[keyword] ||
            defaultText ||
            getLinkCreateLanguage(keyword, isWrap)
          );
        });
      } else {
        return (
          this.translator.data[keyword] ||
          defaultText ||
          getLinkCreateLanguage(keyword, isWrap)
        );
      }
    };

    var _getAsync = async function (keyword, defaultText) {
      if (!this.translator) {
        $rootScope.isBusy = true;
        this.translator = await _fillTranslator(lang);
        return (
          this.translator.data[keyword] ||
          defaultText ||
          getLinkCreateLanguage(keyword, isWrap)
        );
      } else {
        return (
          this.translator.data[keyword] ||
          defaultText ||
          getLinkCreateLanguage(keyword, isWrap)
        );
      }
    };

    var getLinkCreateLanguage = function (keyword, isWrap) {
      //return '<span data-key="/admin/language/details?k=' + keyword + '">[' + keyword + ']</span>';
      return isWrap ? "[" + keyword + "]" : keyword;
    };
    var _translateUrl = async function (culture) {
      var viewType = document.getElementById("view-type").value;
      var viewId = document.getElementById("view-id").value;
      var url =
        "/admin/translate-url/" + culture + "/" + viewType + "/" + viewId;
      var req = {
        method: "GET",
        url: url,
      };
      var getData = await apiService.sendRequest(req);
      return getData.data;
    };
    factory.getAsync = _getAsync;
    factory.get = _get;
    factory.init = _init;
    factory.reset = _reset;
    factory.translator = _translator;
    factory.fillTranslator = _fillTranslator;
    factory.translateUrl = _translateUrl;
    return factory;
  },
]);

"use strict";
appShared.factory("MixDbService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = angular.copy(baseService);
    serviceFactory.init("mix-db");
    var _initDbName = function (name) {
      serviceFactory.init(`mix-db/${name}`);
    };
    var _filter = async function (request) {
      var url = `${this.prefixUrl}/filter`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: request,
      };
      return await this.getRestApiResult(req);
    };
    var _filterNestedData = async function (request) {
      var url = `${this.prefixUrl}/nested-data/filter`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: request,
      };
      return await this.getRestApiResult(req);
    };
    var _createRelationship = async function (request) {
      var url = `${this.prefixUrl}/data-relationship`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: request,
      };
      return await this.getRestApiResult(req);
    };
    var _deleteRelationship = async function (id) {
      var url = `${this.prefixUrl}/data-relationship/${id}`;
      var req = {
        serviceBase: this.serviceBase,
        method: "DELETE",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _export = async function (request) {
      var url = `${this.prefixUrl}/export`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: request,
      };
      return await this.getRestApiResult(req);
    };
    var _import = async function (file) {
      var url = `${this.prefixUrl}/import`;
      var frm = new FormData();
      frm.append("file", file);
      return await this.ajaxSubmitForm(frm, url);
    };
    var _getSingleByParent = async function (parentType, parentId) {
      var url = `${this.prefixUrl}/get-by-parent/${parentType}/${parentId}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _getSingleByGuidParent = async function (parentType, parentId) {
      var url = `${this.prefixUrl}/get-by-guid-parent/${parentType}/${parentId}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    serviceFactory.initDbName = _initDbName;
    serviceFactory.filter = _filter;
    serviceFactory.filterNestedData = _filterNestedData;
    serviceFactory.createRelationship = _createRelationship;
    serviceFactory.deleteRelationship = _deleteRelationship;
    serviceFactory.export = _export;
    serviceFactory.import = _import;
    serviceFactory.getSingleByParent = _getSingleByParent;
    serviceFactory.getSingleByGuidParent = _getSingleByGuidParent;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixDatabasePortalService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-database");
    var _migrate = async function (data) {
      var url = `${this.prefixUrl}/migrate/${data.systemName}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _backup = async function (data) {
      var url = `${this.prefixUrl}/backup/${data.systemName}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _restore = async function (data) {
      var url = `${this.prefixUrl}/restore/${data.systemName}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _updateSchema = async function (data) {
      var url = `${this.prefixUrl}/update/${data.systemName}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };
    var _getByName = async function (name) {
      var url = `${this.prefixUrl}/get-by-name/${name}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await this.getRestApiResult(req);
    };

    serviceFactory.migrate = _migrate;
    serviceFactory.backup = _backup;
    serviceFactory.restore = _restore;
    serviceFactory.updateSchema = _updateSchema;
    serviceFactory.getByName = _getByName;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixDatabaseDataClientService", [
  "BaseRestService",
  "ApiService",
  "CommonService",
  function (baseService, apiService, commonService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-database-data/form", false);
    var _initData = async function (mixDatabaseName) {
      var url = this.prefixUrl + "/init/" + mixDatabaseName;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    var _saveData = async function (
      mixDatabaseName,
      objData,
      sendMail = false
    ) {
      var url = `${this.prefixUrl}/save-data/${mixDatabaseName}/${sendMail}`;
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.getRestApiResult(req);
    };

    var _saveValues = async function (dataContentId, objData) {
      var url = `${this.prefixUrl}/save-values/${dataContentId}`;
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.getRestApiResult(req);
    };
    serviceFactory.initData = _initData;
    serviceFactory.saveData = _saveData;
    serviceFactory.saveValues = _saveValues;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixDatabaseDataPortalService", [
  "BaseRestService",
  "ApiService",
  "CommonService",
  function (baseService, apiService, commonService) {
    var serviceFactory = angular.copy(baseService);
    serviceFactory.init("mix-data-content");

    var _saveAdditionalData = async function (objData) {
      var url = this.prefixUrl + "/save-additional-data";
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };

    var _getAdditionalData = async function (data) {
      var url = this.prefixUrl + "/additional-data";
      var queries = serviceFactory.parseQuery(data);
      if (queries) {
        url += "?";
        url = url.concat(queries);
      }
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    var _initData = async function (mixDatabaseName) {
      var url = this.prefixUrl + "/init/" + mixDatabaseName;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    var _export = async function (objData) {
      var data = serviceFactory.parseQuery(objData);
      var url = this.prefixUrl;

      if (data) {
        url += "/export?";
        url = url.concat(data);
      }
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    var _import = async function (mixDatabaseName, file) {
      var url =
        (this.prefixUrl || "/" + this.lang + "/" + this.modelName) +
        "/import-data/" +
        mixDatabaseName;
      var frm = new FormData();
      frm.append("file", file);
      return serviceFactory.ajaxSubmitForm(frm, url);
    };

    var _migrate = async function (mixDatabaseId) {
      var url = this.prefixUrl + "/migrate-data/" + mixDatabaseId;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    serviceFactory.migrate = _migrate;
    serviceFactory.initData = _initData;
    serviceFactory.getAdditionalData = _getAdditionalData;
    serviceFactory.saveAdditionalData = _saveAdditionalData;
    serviceFactory.export = _export;
    serviceFactory.import = _import;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixAssociationPortalService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-db-association");

    serviceFactory.getAssociation = async (
      parentDbName,
      childDbName,
      parentId,
      childId
    ) => {
      var url = `${serviceFactory.prefixUrl}/${parentDbName}/${childDbName}/${
        parentId || guidParentId
      }/${childId}`;
      var req = {
        serviceBase: serviceFactory.serviceBase,
        apiVersion: serviceFactory.apiVersion,
        method: "GET",
        url: url,
      };
      return await serviceFactory.getRestApiResult(req);
    };
    serviceFactory.deleteAssociation = async (
      parentDbName,
      childDbName,
      parentId,
      guidParentId,
      childId
    ) => {
      var url = `${serviceFactory.prefixUrl}/${parentDbName}/${childDbName}/${parentId}/${childId}`;
      var req = {
        serviceBase: serviceFactory.serviceBase,
        apiVersion: serviceFactory.apiVersion,
        method: "DELETE",
        url: url,
      };
      return await serviceFactory.getRestApiResult(req);
    };
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixDatabaseColumnPortalService", [
  "BaseRestService",
  "ApiService",
  "CommonService",
  function (baseService, apiService, commonService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-database-column", true);
    var _initData = async function (mixDatabaseName) {
      var url = this.prefixUrl + "/init/" + mixDatabaseName;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    var _alterColumn = async function (col) {
      var url = `${this.prefixUrl}/alter-column`;
      var req = {
        method: "POST",
        url: url,
        data: col,
      };
      return await this.getRestApiResult(req);
    };
    serviceFactory.initData = _initData;
    serviceFactory.alterColumn = _alterColumn;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixDatabaseDataValuePortalService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-database-data-value");
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMixRelationshipPortalService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("mix-database-relationship");
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestMvcModuleDataService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("module-data/mvc");
    var _initForm = async function (moduleContentId) {
      var url = `${this.prefixUrl}/init-form/${moduleContentId}`;
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };
    serviceFactory.initForm = _initForm;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestPostService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.initService("/rest/mixcore", "post-content");
    var _filter = async function (request) {
      var url = `${this.prefixUrl}/filter`;
      var req = {
        serviceBase: this.serviceBase,
        method: "POST",
        url: url,
        data: request,
      };
      return await this.getRestApiResult(req);
    };
    // Define more service methods here
    serviceFactory.filter = _filter;
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestRelatedAttributeDataFormService", [
  "BaseRestService",
  function (baseService) {
    var serviceFactory = angular.copy(baseService);
    serviceFactory.init("mix-data-content-association/form");
    return serviceFactory;
  },
]);

"use strict";
appShared.factory("RestRelatedAttributeDataPortalService", [
  "BaseRestService",
  "ApiService",
  "CommonService",
  function (baseService, apiService, commonService) {
    var serviceFactory = angular.copy(baseService);
    serviceFactory.init("mix-data-content-association");
    return serviceFactory;
  },
]);

"use strict";

function BaseCtrl($scope, $rootScope, $routeParams, ngAppSettings, service) {
  $scope.request = angular.copy(ngAppSettings.request);
  $scope.contentStatuses = angular.copy(ngAppSettings.contentStatuses);
  $scope.viewmodel = null;
  $scope.data = null;
  $scope.isInit = false;
  $scope.isValid = true;
  $scope.errors = [];
  $scope.saveSuccessCallbackArgs = [];
  $scope.validateArgs = [];
  $scope.removeCallbackArgs = [];
  $scope.range = $rootScope.range;
  $scope.validate = null;
  $scope.getSingleSuccessCallback = null;
  $scope.getSingleFailCallback = null;
  $scope.getListSuccessCallback = null;
  $scope.getListFailCallback = null;
  $scope.saveFailCallback = null;
  $scope.selectedList = {
    action: "",
    data: [],
  };
  $scope.actions = ["Delete", "Publish", "Export"];
  $scope.translate = $rootScope.translate;
  if ($rootScope.referrerUrl) {
    $scope.referrerUrl = $rootScope.referrerUrl;
  } else {
    $scope.referrerUrl = `/admin/${service.modelName}/list`;
  }
  $scope.getSingle = async function () {
    $rootScope.isBusy = true;
    var id = $routeParams.id;
    var resp = await service.getSingle([id || "default"]);
    if (resp && resp.success) {
      $scope.viewmodel = resp.data;
      if ($scope.getSingleSuccessCallback) {
        $scope.getSingleSuccessCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors);
      }
      if ($scope.getSingleFailCallback) {
        $scope.getSingleFailCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };
  $scope.getList = async function (pageIndex) {
    if (pageIndex !== undefined) {
      $scope.request.pageIndex = pageIndex;
    }
    if ($scope.request.fromDate !== null) {
      var d = new Date($scope.request.fromDate);
      $scope.request.fromDate = d.toISOString();
    }
    if ($scope.request.toDate !== null) {
      var d = new Date($scope.request.toDate);
      $scope.request.toDate = d.toISOString();
    }
    $rootScope.isBusy = true;
    var resp = await service.getList($scope.request);
    if (resp && resp.success) {
      $scope.data = resp.data;
      $.each($scope.data.items, function (i, data) {
        $.each($scope.viewmodels, function (i, e) {
          if (e.dataContentId === data.id) {
            data.isHidden = true;
          }
        });
      });
      if ($scope.getListSuccessCallback) {
        $scope.getListSuccessCallback();
      }
      $("html, body").animate({ scrollTop: "0px" }, 500);
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors);
      }
      if ($scope.getListFailCallback) {
        $scope.getListFailCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.remove = function (id) {
    $rootScope.showConfirm(
      $scope,
      "removeConfirmed",
      [id],
      null,
      "Remove",
      "Deleted data will not able to recover, are you sure you want to delete this item?"
    );
  };

  $scope.removeConfirmed = async function (id) {
    $rootScope.isBusy = true;
    var result = await service.delete([id]);
    if (result.success) {
      if ($scope.removeCallback) {
        $rootScope.executeFunctionByName(
          "removeCallback",
          $scope.removeCallbackArgs,
          $scope
        );
      }
      $scope.getList();
    } else {
      $rootScope.showErrors(result.errors);
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };
  $scope.applyList = async function () {
    $rootScope.showConfirm(
      $scope,
      "applyListConfirmed",
      [],
      null,
      "Remove",
      "Are you sure to " + $scope.selectedList.action + " these items"
    );
  };

  $scope.applyListConfirmed = async function () {
    $rootScope.isBusy = true;
    var resp = await service.applyList($scope.selectedList);
    if (resp && resp.success) {
      $scope.viewmodel = resp.data;
      $rootScope.showMessage("success", "success");
      switch ($scope.selectedList.action) {
        case "Delete":
          $scope.selectedList.isSelectAll = false;
          $scope.selectedList.data = [];
          $scope.getList();
          break;
        case "Export":
          window.open(resp.data.webPath, "_blank");
          $rootScope.isBusy = false;
          $scope.$apply();
          break;
      }
    } else {
      if (resp) {
        $rootScope.showErrors("Failed");
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.save = async function (data) {
    if ($scope.validate) {
      $scope.isValid = await $rootScope.executeFunctionByName(
        "validate",
        $scope.validateArgs,
        $scope
      );
    }
    $rootScope.isBusy = true;
    $scope.viewmodel = data || $scope.viewmodel;
    if ($scope.isValid) {
      var resp = await service.save($scope.viewmodel);
      if (resp && resp.success) {
        $scope.viewmodel = resp.data;
        $rootScope.showMessage("success", "success");

        if ($scope.saveSuccessCallback) {
          $rootScope.executeFunctionByName(
            "saveSuccessCallback",
            $scope.saveSuccessCallbackArgs,
            $scope
          );
        } else {
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      } else {
        if ($scope.saveFailCallback) {
          $rootScope.executeFunctionByName(
            "saveFailCallback",
            $scope.saveSuccessCallbackArgs,
            $scope
          );
        }
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    } else {
      $rootScope.showErrors(["invalid model"]);
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };
  $scope.select = function (id, isSelected) {
    if (isSelected) {
      $scope.selectedList.data.push(id);
    } else {
      $scope.removeObject($scope.selectedList.data, id);
    }
  };
  $scope.selectAll = function (isSelected) {
    $scope.selectedList.data = [];
    angular.forEach($scope.data.items, function (e) {
      e.isSelected = isSelected;
      if (isSelected) {
        $scope.selectedList.data.push(e.id);
      }
    });
  };
  $scope.applyList = async function () {
    $rootScope.showConfirm(
      $scope,
      "applyListConfirmed",
      [],
      null,
      "Remove",
      "Are you sure to" + $scope.selectedList.action + " these items"
    );
  };

  $scope.applyListConfirmed = async function () {
    $rootScope.isBusy = true;
    var resp = await service.applyList($scope.selectedList);
    if (resp && resp.success) {
      $scope.viewmodel = resp.data;
      $rootScope.showMessage("success", "success");
      switch ($scope.selectedList.action) {
        case "Delete":
          $scope.selectedList.isSelectAll = false;
          $scope.selectedList.data = [];
          $scope.getList();
          break;
        case "Export":
          window.open(resp.data.webPath, "_blank");
          $rootScope.isBusy = false;
          $scope.$apply();
          break;
      }
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors);
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.shortString = function (msg, max) {
    if (msg) {
      var data = decodeURIComponent(msg);

      if (max < data.length) {
        return data.replace(/[+]/g, " ").substr(0, max) + " ...";
      } else {
        return data.replace(/[+]/g, " ");
      }
    } else {
      return "";
    }
  };

  $scope.handleResult = function (result) {
    if (result.success) {
      $rootScope.showMessage("Success");
    } else {
      $rootScope.showErrors(result.errors);
    }
  };
}

"use strict";
function BaseODataCtrl(
  $scope,
  $rootScope,
  $routeParams,
  ngAppSettings,
  service
) {
  $scope.request = angular.copy(ngAppSettings.request);
  $scope.contentStatuses = angular.copy(ngAppSettings.contentStatuses);
  $scope.viewmodel = null;
  $scope.defaultId = 0;
  $scope.data = null;
  $scope.isInit = false;
  $scope.isValid = true;
  $scope.errors = [];
  $scope.saveSuccessCallbackArgs = [];
  $scope.validateArgs = [];
  $scope.removeCallbackArgs = [];
  $scope.range = $rootScope.range;
  $scope.validate = null;
  $scope.getSingleSuccessCallback = null;
  $scope.getSingleFailCallback = null;
  $scope.getListSuccessCallback = null;
  $scope.getListFailCallback = null;
  $scope.saveFailCallback = null;
  $scope.selectedList = {
    action: "",
    data: [],
  };
  $scope.actions = ["Delete", "Publish", "Export"];
  $scope.translate = $rootScope.translate;
  if ($rootScope.referrerUrl) {
    $scope.referrerUrl = $rootScope.referrerUrl;
  } else {
    $scope.referrerUrl = "/admin"; // document.referrer.substr(document.referrer.indexOf('/admin'));
  }

  $scope.getSingle = async function (params = []) {
    $rootScope.isBusy = true;
    var id = $routeParams.id || $scope.defaultId;
    params.splice(0, 0, id);
    var resp = await service.getSingle("portal", [id]);
    if (resp) {
      $scope.viewmodel = resp;
      if ($scope.getSingleSuccessCallback) {
        $scope.getSingleSuccessCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors("Failed");
      }
      if ($scope.getSingleFailCallback) {
        $scope.getSingleFailCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.count = async function (params = []) {
    $rootScope.isBusy = true;
    var resp = await service.count("read", params);
    if (resp) {
      $scope.request.totalItems = resp;
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors("Failed");
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.getList = async function (pageIndex, params = []) {
    $rootScope.isBusy = true;
    if (pageIndex !== undefined) {
      $scope.request.pageIndex = pageIndex;
    }
    if ($scope.request.fromDate !== null) {
      var d = new Date($scope.request.fromDate);
      $scope.request.fromDate = d.toISOString();
    }
    if ($scope.request.toDate !== null) {
      var d = new Date($scope.request.toDate);
      $scope.request.toDate = d.toISOString();
    }
    var resp = await service.getList("read", $scope.request, params);
    if (resp) {
      $scope.data = resp;
      $scope.count(params);
      $.each($scope.data, function (i, data) {
        $.each($scope.viewmodels, function (i, e) {
          if (e.dataContentId === data.id) {
            data.isHidden = true;
          }
        });
      });
      if ($scope.getListSuccessCallback) {
        $scope.getListSuccessCallback();
      }
      $("html, body").animate({ scrollTop: "0px" }, 500);
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors("Failed");
      }
      if ($scope.getListFailCallback) {
        $scope.getListFailCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.remove = function (id) {
    $rootScope.showConfirm(
      $scope,
      "removeConfirmed",
      [id],
      null,
      "Remove",
      "Deleted data will not able to recover, are you sure you want to delete this item?"
    );
  };

  $scope.removeConfirmed = async function (id) {
    $rootScope.isBusy = true;
    var result = await service.delete([id]);
    if (result.success) {
      if ($scope.removeCallback) {
        $rootScope.executeFunctionByName(
          "removeCallback",
          $scope.removeCallbackArgs,
          $scope
        );
      }
      $scope.getList();
    } else {
      $rootScope.showErrors(result.errors);
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.save = async function (data) {
    $rootScope.isBusy = true;
    if ($scope.validate) {
      $scope.isValid = await $rootScope.executeFunctionByName(
        "validate",
        $scope.validateArgs,
        $scope
      );
    }
    if ($scope.isValid) {
      var resp = await service.save("portal", data);
      if (resp.success) {
        $scope.viewmodel = resp.data;
        $rootScope.showMessage("success", "success");

        if ($scope.saveSuccessCallback) {
          $rootScope.executeFunctionByName(
            "saveSuccessCallback",
            $scope.saveSuccessCallbackArgs,
            $scope
          );
        } else {
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      } else {
        if ($scope.saveFailCallback) {
          $rootScope.executeFunctionByName(
            "saveFailCallback",
            $scope.saveSuccessCallbackArgs,
            $scope
          );
        }
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
      return resp;
    } else {
      $rootScope.showErrors(["invalid model"]);
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };
  $scope.select = function (id, isSelected) {
    if (isSelected) {
      $scope.selectedList.data.push(id);
    } else {
      $scope.removeObject($scope.selectedList.data, id);
    }
  };
  $scope.selectAll = function (isSelected) {
    $scope.selectedList.data = [];
    angular.forEach($scope.data, function (e) {
      e.isSelected = isSelected;
      if (isSelected) {
        $scope.selectedList.data.push(e.id);
      }
    });
  };
  $scope.applyList = async function () {
    $rootScope.showConfirm(
      $scope,
      "applyListConfirmed",
      [],
      null,
      "Remove",
      "Are you sure to " + $scope.selectedList.action + " these items"
    );
  };

  $scope.applyListConfirmed = async function () {
    $rootScope.isBusy = true;
    var resp = await service.applyList("read", $scope.selectedList);
    if (resp && resp.success) {
      $scope.viewmodel = resp.data;
      $rootScope.showMessage("success", "success");
      switch ($scope.selectedList.action) {
        case "Delete":
          $scope.selectedList.isSelectAll = false;
          $scope.selectedList.data = [];
          $scope.getList();
          break;
        case "Export":
          window.open(resp.data.webPath, "_blank");
          $rootScope.isBusy = false;
          $scope.$apply();
          break;
      }
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors);
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.shortString = function (msg, max) {
    if (msg) {
      var data = decodeURIComponent(msg);

      if (max < data.length) {
        return data.replace(/[+]/g, " ").substr(0, max) + " ...";
      } else {
        return data.replace(/[+]/g, " ");
      }
    } else {
      return "";
    }
  };
}

"use strict";
function BaseRestCtrl(
  $scope,
  $rootScope,
  $location,
  $routeParams,
  ngAppSettings,
  service
) {
  $scope.request = $rootScope.getRequest();
  $scope.contentStatuses = angular.copy(ngAppSettings.contentStatuses);
  $scope.viewmodel = null;

  $scope.isScrollTop = true;
  $scope.defaultId = 0;
  $scope.data = null;
  $scope.isInit = false;
  $scope.isValid = true;
  $scope.errors = [];
  $scope.saveSuccessCallbackArgs = [];
  $scope.validateArgs = [];
  $scope.removeCallbackArgs = [];
  $scope.range = $rootScope.range;
  $scope.validate = null;
  $scope.getSingleSuccessCallback = null;
  $scope.getSingleFailCallback = null;
  $scope.getListSuccessCallback = null;
  $scope.getListFailCallback = null;
  $scope.saveFailCallback = null;
  $scope.selectedList = {
    action: "",
    data: [],
  };
  $scope.actions = ["Delete", "Publish", "Export"];
  $scope.translate = $rootScope.translate;
  if ($rootScope.referrerUrl) {
    $scope.referrerUrl = $rootScope.referrerUrl;
  }

  $scope.duplicate = async function (id) {
    $rootScope.isBusy = true;
    if (!id) {
      return await this.getDefault();
    } else {
      var resp = await service.duplicate([id]);
      if (resp.success) {
        $scope.goToDetail(resp.data.id, $scope.viewmodelType);
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    }
  };

  $scope.goToDetail = function (id, type) {
    const url = `/admin/${type}/details/${id}`;
    window.location.href = url;
  };
  $scope.getSingle = async function (id) {
    $rootScope.isBusy = true;
    id = id || $routeParams.id;
    if (!id) {
      return await this.getDefault();
    } else {
      var resp = await service.getSingle([id]);
      if (resp.success) {
        $scope.viewmodel = resp.data;
        if ($scope.getSingleSuccessCallback) {
          $scope.getSingleSuccessCallback();
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        if ($scope.getSingleFailCallback) {
          $scope.getSingleFailCallback();
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    }
  };

  $scope.getDefault = async function () {
    $rootScope.isBusy = true;

    var resp = await service.getDefault();
    if (resp.success) {
      $scope.viewmodel = resp.data;
      if ($scope.getSingleSuccessCallback) {
        $scope.getSingleSuccessCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors);
      }
      if ($scope.getSingleFailCallback) {
        $scope.getSingleFailCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.getList = async function (pageIndex, extraQueries = null) {
    $rootScope.isBusy = true;
    if (pageIndex !== undefined) {
      $scope.request.pageIndex = pageIndex;
    }
    if ($scope.request.fromDate !== null) {
      var d = new Date($scope.request.fromDate);
      $scope.request.fromDate = d.toISOString();
    }
    if ($scope.request.toDate !== null) {
      var dt = new Date($scope.request.toDate);
      $scope.request.toDate = dt.toISOString();
    }
    var resp = await service.getList($scope.request, extraQueries);
    if (resp && resp.success) {
      $scope.data = resp.data;
      angular.forEach($scope.data, function (data) {
        angular.forEach($scope.viewmodels, function (e) {
          if (e.dataContentId === data.id) {
            data.isHidden = true;
          }
        });
      });
      if ($scope.getListSuccessCallback) {
        $scope.getListSuccessCallback();
      }
      if ($scope.isScrollTop) {
        // $("html, body").animate({ scrollTop: "0px" }, 500);
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors || ["Failed"]);
      }
      if ($scope.getListFailCallback) {
        $scope.getListFailCallback();
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.remove = function (id) {
    if (
      confirm(
        "Deleted data will not able to recover, are you sure you want to delete this item?"
      )
    ) {
      $scope.removeConfirmed(id);
    }
  };

  $scope.removeConfirmed = async function (id) {
    $rootScope.isBusy = true;
    var result = await service.delete([id]);
    if (result.success) {
      if ($scope.removeCallback) {
        $rootScope.executeFunctionByName(
          "removeCallback",
          $scope.removeCallbackArgs,
          $scope
        );
      }
      $scope.getList();
    } else {
      $rootScope.showErrors(result.errors);
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.save = async function () {
    $rootScope.isBusy = true;
    if ($scope.validate) {
      $scope.isValid = await $rootScope.executeFunctionByName(
        "validate",
        $scope.validateArgs,
        $scope
      );
    }
    if ($scope.isValid) {
      var resp = null;
      if (
        $scope.viewmodel.id == 0 ||
        $scope.viewmodel.id == null ||
        $scope.viewmodel.id == "00000000-0000-0000-0000-000000000000"
      ) {
        resp = await service.create($scope.viewmodel);
      } else {
        resp = await service.update($scope.viewmodel.id, $scope.viewmodel);
      }

      if (resp.success) {
        $scope.viewmodel = resp.data;
        if ($scope.saveSuccessCallback) {
          $rootScope.executeFunctionByName(
            "saveSuccessCallback",
            $scope.saveSuccessCallbackArgs,
            $scope
          );
        } else {
          $rootScope.showMessage("success", "success");
        }
      } else {
        if ($scope.saveFailCallback) {
          $rootScope.executeFunctionByName(
            "saveFailCallback",
            $scope.saveSuccessCallbackArgs,
            $scope
          );
        }
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
      }
      $rootScope.isBusy = false;
      $scope.$apply();
      return resp;
    } else {
      $rootScope.showErrors($scope.errors);
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };
  $scope.select = function (id, isSelected) {
    if (isSelected) {
      $scope.selectedList.data.push(id);
    } else {
      $scope.removeObject($scope.selectedList.data, id);
    }
  };

  $scope.selectAll = function (isSelected) {
    $scope.selectedList.data = [];
    angular.forEach($scope.data.items, function (e) {
      e.isSelected = isSelected;
      if (isSelected) {
        $scope.selectedList.data.push(e.id);
      }
    });
  };

  $scope.applyList = async function () {
    $rootScope.showConfirm(
      $scope,
      "applyListConfirmed",
      [],
      null,
      "Remove",
      "Are you sure to " + $scope.selectedList.action + " these items"
    );
  };

  $scope.applyListConfirmed = async function () {
    $rootScope.isBusy = true;
    var resp = await service.applyList($scope.selectedList);
    if (resp && resp.success) {
      $rootScope.showMessage("success", "success");
      switch ($scope.selectedList.action) {
        case "Export":
          window.top.location = resp.data.data.webPath;
          $rootScope.isBusy = false;
          $scope.$apply();
          break;
        case "Delete":
        default:
          $scope.selectedList.isSelectAll = false;
          $scope.selectedList.data = [];
          $scope.getList();
          break;
      }
    } else {
      if (resp) {
        $rootScope.showErrors(resp.errors);
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };
  $scope.clearCache = async function () {
    if ($scope.viewmodel) {
      $rootScope.isBusy = true;
      var resp = await service.clearCache([$scope.viewmodel.id]);
      if (resp.success) {
        $rootScope.showMessage("success", "success");
      } else {
        $rootScope.showErrors(resp.errors);
      }
      $rootScope.isBusy = false;
      $scope.$apply();
    }
  };

  $scope.handleResult = function (result) {
    if (result.success) {
      $rootScope.showMessage("Success");
    } else {
      $rootScope.showErrors(result.errors);
    }
  };

  $scope.shortString = function (msg, max) {
    if (msg) {
      var data = decodeURIComponent(msg);

      if (max < data.length) {
        return data.replace(/[+]/g, " ").substr(0, max) + " ...";
      } else {
        return data.replace(/[+]/g, " ");
      }
    } else {
      return "";
    }
  };
}

//https://docs.microsoft.com/en-us/aspnet/core/signalr/javascript-client?view=aspnetcore-6.0&tabs=visual-studio
function BaseHub(scope, endpoint) {
  scope.isLog = true;
  scope.connection = null;
  scope.host = `${endpoint || ""}/hub/`;
  scope.responses = [];
  scope.hubRequests = [];
  scope.rooms = [];
  scope.others = [];
  scope.totalReconnect = 10;
  scope.timeDelay = 1000;
  scope.hubRequest = {
    action: "NewMessage",
    title: "New Message",
    message: "",
    data: {},
  };
  scope.joinRoom = function (room) {
    scope.connection.invoke("JoinRoom", room);
    scope.room = room;
  };
  scope.getMessageType = function (type) {
    switch (type) {
      case "Success":
        return "success";
      case "Error":
        return "danger";
      case "Warning":
        return "warning";
      case "Info":
        return "info";
      default:
        return "default";
    }
  };
  scope.connect = function () {
    scope.connection.invoke("join", window.location.host);
  };
  scope.sendGroupMessage = function () {
    scope.connection.invoke(
      "SendGroupMessage",
      scope.hubRequest,
      scope.room,
      false
    );
    scope.hubRequest.message = "";
    scope.hubRequest.data = {};
  };
  scope.sendPrivateMessage = function (connectionId, selfReceive = true) {
    scope.connection.invoke(
      "SendPrivateMessage",
      scope.hubRequest,
      connectionId,
      selfReceive
    );
    scope.hubRequest.message = "";
    scope.hubRequest.data = {};
  };
  scope.receiveMessage = function (msg) {
    scope.responses.splice(0, 0, msg);
    scope.$applyAsync();
  };
  scope.prettyJsonObj = function (obj) {
    return JSON.stringify(obj, null, "\t");
  };
  // Starts a connection with transport fallback - if the connection cannot be started using
  // the webSockets transport the function will fallback to the serverSentEvents transport and
  // if this does not work it will try longPolling. If the connection cannot be started using
  // any of the available transports the function will return a rejected Promise.
  scope.startConnection = async function (hubName, token, errorCallback) {
    scope.connection = new signalR.HubConnectionBuilder()
      .withUrl(scope.host + hubName, {
        accessTokenFactory: () => token,
      })
      //   .withHubProtocol(new signalR.protocols.msgpack.MessagePackHubProtocol())
      .withAutomaticReconnect()
      //   .configureLogging(signalR.LogLevel.Trace)

      .build();
    // Create a function that the hub can call to broadcast messages.

    scope.connection.on("receive_message", (msg) => {
      if (msg && !angular.isObject(msg) && msg.indexOf("{") == 0) {
        msg = JSON.parse(msg);
      }
      scope.receiveMessage(msg);
    });
    scope.connection.onreconnected((connectionId) => {
      scope.connect();
      if (scope.onConnected) {
        scope.onConnected();
      }
    });
    scope.connection
      .start()
      .then(function () {
        scope.connect();
        if (scope.onConnected) {
          scope.onConnected();
        }
      })
      .catch(function (error) {
        if (errorCallback) {
          errorCallback(error);
        }
        return Promise.reject(error);
      });
    scope.connection.onclose((error) => {
      console.assert(
        scope.connection.state === signalR.HubConnectionState.Disconnected
      );

      let textContent = `Connection closed due to error "${error}". Try refreshing this page to restart the connection.`;
      console.error(textContent);
    });

    scope.reconnect = function () {
      scope.connection
        .start()
        .then(function () {
          scope.connect();
          if (scope.onConnected) {
            scope.onConnected();
          }
          return true;
        })
        .catch(function (error) {
          console.log(`Cannot start the connection use transport.`, error);
          return false;
        });
    };
  };
  if (scope.$on) {
    scope.$on("$destroy", function () {
      if (scope.onLeave) {
        scope.onLeave();
      }
      if (scope.connection) {
        scope.connection.stop();
      }
    });
  }
}

"use strict";
appShared.controller("ModuleFormController", [
  "$scope",
  "SharedModuleDataService",
  function ($scope, moduleDataService) {
    $scope.initModuleForm = async function (name) {
      var resp = null;
      if (!$rootScope.isInit) {
        setTimeout(function () {
          $scope.initModuleForm(name);
        }, 500);
      } else {
        resp = await moduleDataService.initModuleForm(name);
        if (resp && resp.success) {
          $scope.data = resp.data;
          $scope.data.postId = $scope.postId;
          $scope.data.productId = $scope.productId;
          $scope.data.categoryId = $scope.categoryId;
          $rootScope.isBusy = false;
          $scope.$apply();
          //$scope.initEditor();
        } else {
          if (resp) {
            $rootScope.showErrors(resp.errors);
          }
          $scope.$apply();
        }
      }
    };

    $scope.loadModuleData = async function (id) {
      $rootScope.isBusy = true;
      var response = await moduleDataService.getModuleData(
        $scope.moduleContentId,
        $scope.d,
        "portal"
      );
      if (response.success) {
        $scope.data = response.data;
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        $rootScope.showErrors(response.errors);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };

    $scope.saveModuleData = async function () {
      var form = $("#module-" + $scope.data.moduleContentId);
      $.each($scope.data.dataProperties, function (i, e) {
        switch (e.dataType) {
          case 5:
            e.value = $(form)
              .find("." + e.name)
              .val();
            break;
          default:
            e.value = e.value ? e.value.toString() : null;
            break;
        }
      });
      var resp = await moduleDataService.saveModuleData($scope.data);
      if (resp && resp.success) {
        $scope.data = resp.data;
        $scope.initModuleForm();
        $rootScope.showMessage("success", "success");
        if ($scope.saveSuccessCallback) {
          $scope.saveSuccessCallback({ data: $scope.data });
        } else {
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
  },
]);

appShared.controller("MixDataController", [
  "$rootScope",
  "$scope",
  "ngAppSettings",
  "RestRelatedAttributeDataFormService",
  "RestMixDatabaseDataClientService",
  function ($rootScope, $scope, ngAppSettings, navService, dataService) {
    $scope.defaultData = null;
    $scope.formData = null;
    $scope.formRecords = null;
    $scope.formName = null;
    $scope.navRequest = angular.copy(ngAppSettings.request);
    $scope.successMsg = "Thành công";
    $scope.init = async function (
      formName,
      parentId,
      parentType,
      validateHandler,
      loadingHandler,
      successHandler,
      failHandler
    ) {
      $scope.successMsg = "Success";
      $scope.validateHandler = validateHandler;
      $scope.loadingHandler = loadingHandler;
      $scope.successHandler = successHandler;
      $scope.failHandler = failHandler;
      $scope.formName = formName;
      $scope.navRequest.mixDatabaseName = formName;
      $scope.navRequest.parentType = parentType;
      $scope.navRequest.parentId = parentId;
      var getDefault = await dataService.initData($scope.formName);
      $scope.defaultData = getDefault.data;
      if ($scope.defaultData) {
        $scope.defaultData.mixDatabaseName = $scope.formName;
        $scope.defaultData.parentType = parentType || "Set";
        $scope.defaultData.parentId = parentId;
        $scope.formData = angular.copy($scope.defaultData);
      }
      $scope.$apply();
    };
    $scope.loadData = function () {
      navService.getList($scope.navRequest).then((resp) => {
        if (resp) {
          $scope.formRecords = resp.data;
          $scope.$apply();
        } else {
          if (resp) {
            $rootScope.showErrors("Failed");
          }
          $scope.$apply();
        }
      });
    };
    $scope.submit = async (data) => {
      $scope.form.$$element.addClass("was-validated");
      if ($scope.form.$valid) {
        $rootScope.isBusy = true;
        if ($scope.loadingHandler) {
          $rootScope.executeFunctionByName($scope.loadingHandler, [true]);
        }
        if (
          !$scope.validateHandler ||
          $rootScope.executeFunctionByName($scope.validateHandler, [data])
        ) {
          var saveResult = await dataService.save(data);
          if (saveResult.success) {
            $scope.loadData();
            if ($scope.successHandler) {
              $rootScope.executeFunctionByName($scope.successHandler, [
                saveResult,
              ]);
            } else {
              $scope.form.$$element.removeClass("was-validated");
              $scope.form.$setPristine();
              $scope.form.$setUntouched();
              console.log($scope.successMsg);
            }
            $scope.formData = angular.copy($scope.defaultData);
            $rootScope.isBusy = false;
            // $scope.loadData();
            if ($scope.loadingHandler) {
              $rootScope.executeFunctionByName($scope.loadingHandler, [false]);
            }
            $scope.$apply();
          } else {
            if (saveResult.errors && saveResult.errors.length) {
              if ($scope.failHandler) {
                $rootScope.executeFunctionByName($scope.failHandler, [
                  data,
                  saveResult,
                ]);
              } else {
                console.error(saveResult.errors);
              }
            }
            if ($scope.loadingHandler) {
              $rootScope.executeFunctionByName($scope.loadingHandler, [false]);
            }
            $rootScope.isBusy = false;
            $scope.$apply();
          }
        }
      }
    };

    $scope.saveValue = async (id, name, value) => {
      if ($scope.form.$valid) {
        $rootScope.isBusy = true;
        var obj = new {}();
        obj[name] = value;
        await dataService.saveValues(id, obj);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
  },
]);

"use strict";
appShared.controller("MvcPostController", [
  "$scope",
  "$rootScope",
  "ngAppSettings",
  "$routeParams",
  "$location",
  "BaseService",
  function (
    $scope,
    $rootScope,
    ngAppSettings,
    $routeParams,
    $location,
    baseService
  ) {
    BaseRestCtrl.call(
      this,
      $scope,
      $rootScope,
      $location,
      $routeParams,
      ngAppSettings,
      service
    );
    $scope.service = null;
    $scope.request.orderBy = "Priority";
    $scope.request.direction = "Asc";
    $scope.mixConfigurations = $rootScope.globalSettings;
    $scope.moduleContentId = null;
    $scope.module = null;
    $scope.allData = [];
    $scope.editDataUrl = null;
    $scope.canLoadMore = false;
    $scope.init = async function (type, parentId, pageSize) {
      $scope.parentId = parentId; // page / post
      $scope.service = Object.create(baseService);
      if (type.toLowerCase() === "page") {
        $scope.service.init("page-post/mvc");
      } else if (type.toLowerCase() === "page") {
        $scope.service.init("module-post/mvc");
      }

      $scope.request.moduleContentId = $scope.moduleContentId;
      $scope.request.pageSize = pageSize || $scope.request.pageSize;
      $scope.loadMore(0);
    };

    $scope.loadMore = async function (pageIndex) {
      $scope.request.pageIndex = pageIndex || $scope.request.pageIndex + 1;
      $rootScope.isBusy = true;
      var response = await service.getList($scope.request);
      if (response.success) {
        $scope.allData = $scope.allData.concat(response.data.items);
        $rootScope.isBusy = false;
        $scope.canLoadMore =
          response.data.totalItems >
          response.data.page * response.data.pageSize;
        $scope.$apply();
      } else {
        $rootScope.showErrors(response.errors);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
  },
]);

"use strict";
appShared.controller("MvcModuleDataController", [
  "$scope",
  "$rootScope",
  "ngAppSettings",
  "$routeParams",
  "$location",
  "RestMvcModuleDataService",
  function (
    $scope,
    $rootScope,
    ngAppSettings,
    $routeParams,
    $location,
    service
  ) {
    BaseRestCtrl.call(
      this,
      $scope,
      $rootScope,
      $location,
      $routeParams,
      ngAppSettings,
      service
    );
    $scope.request.orderBy = "Priority";
    $scope.request.direction = "Asc";
    $scope.mixConfigurations = $rootScope.globalSettings;
    $scope.moduleContentId = null;
    $scope.module = null;
    $scope.allData = [];
    $scope.editDataUrl = null;
    $scope.canLoadMore = false;
    $scope.init = async function (moduleContentId, pageSize) {
      $scope.moduleContentId = moduleContentId;
      $scope.request.moduleContentId = $scope.moduleContentId;
      $scope.request.pageSize = pageSize || $scope.request.pageSize;
      $scope.loadMore(0);
    };

    $scope.getSingle = async function () {
      $rootScope.isBusy = true;
      var resp = await service.getSingle($scope.id, "mvc");
      if (resp && resp.success) {
        $scope.activedModuleData = resp.data;
        $rootScope.initEditor();
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.activeItem = function (arr, item) {
      angular.forEach(arr, function (e) {
        if (e.id != item.id) {
          e.expanded = false;
        } else {
          e.expanded = !e.expanded;
        }
      });
    };
    $scope.loadMore = async function (pageIndex) {
      $scope.request.pageIndex = pageIndex || $scope.request.pageIndex + 1;
      $rootScope.isBusy = true;
      var response = await service.getList($scope.request);
      if (response.success) {
        $scope.allData = $scope.allData.concat(response.data.items);
        $rootScope.isBusy = false;
        $scope.canLoadMore = response.data.totalItems > $scope.allData.length;
        $scope.$apply();
      } else {
        $rootScope.showErrors(response.errors);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
  },
]);

sharedComponents.component("apiFile", {
  templateUrl: "/mix-app/views/app-shared/components/api-file/api-file.html",
  controller: [
    "$rootScope",
    "$scope",
    "Upload",
    function PortalTemplateController($rootScope, $scope, uploader) {
      var ctrl = this;
      ctrl.accept = ctrl.accept || "application/zip";
      ctrl.selectFile = function (files) {
        if (files !== undefined && files !== null && files.length > 0) {
          const file = files[0];
          ctrl.postedFile = file;
        }
      };

      ctrl.uploadFile = function (file) {
        // Create FormData object
        var files = new FormData();
        var folder = ctrl.folder;
        var title = ctrl.title;
        var description = ctrl.description;
        // Looping over all files and add it to FormData object
        files.append(file.name, file);

        // Adding one more key to FormData object
        files.append("fileFolder", folder);
        files.append("title", title);
        files.append("description", description);
        $.ajax({
          url: "/" + $rootScope.mixConfigurations.lang + "/media/upload", //'/tts/UploadImage',
          type: "POST",
          contentType: false, // Not to set any content header
          processData: false, // Not to process data
          data: files,
          success: function (result) {
            ctrl.src = result.data.fullPath;
            $scope.$apply();
          },
          error: function (err) {
            return "";
          },
        });
      };
      ctrl.getBase64 = function (file) {
        if (file !== null) {
          $rootScope.isBusy = true;
          var reader = new FileReader();
          reader.readAsDataURL(file);
          reader.onload = function () {
            var index = reader.result.indexOf(",") + 1;
            var base64 = reader.result.substring(index);
            ctrl.postedFile.fileName = file.name.substring(
              0,
              file.name.lastIndexOf(".")
            );
            ctrl.postedFile.extension = file.name.substring(
              file.name.lastIndexOf(".")
            );
            ctrl.postedFile.fileStream = reader.result;
            $rootScope.isBusy = false;
            $scope.$apply();
          };
          reader.onerror = function (error) {};
        } else {
          return null;
        }
      };
    },
  ],
  bindings: {
    header: "=",
    accept: "=",
    title: "=",
    postedFile: "=",
    formName: "=",
    isBase64: "=",
  },
});

sharedComponents.component("addressEditor", {
  templateUrl: "/mix-app/views/app-shared/components/address-editor/view.html",
  bindings: {
    province: "=",
    provinceClass: "=?",
    district: "=",
    districtClass: "=?",
    ward: "=",
    wardClass: "=?",
  },
  controller: "AddressEditorController",
});

sharedComponents.controller("AddressEditorController", [
  "$rootScope",
  "$scope",
  "ApiService",
  function PortalTemplateController($rootScope, $scope, apiService) {
    var ctrl = this;
    ctrl.provinceEndpoint = "/rest/shared/json-data/provinces.json/true";
    ctrl.districtEndpoint = "/rest/shared/json-data/districts.json/true";
    ctrl.wardEndpoint = "/rest/shared/json-data/wards.json/true";
    ctrl.$onInit = async function () {
      ctrl.provinceClass =
        ctrl.provinceClass || "form-select form-control mb-3";
      ctrl.districtClass =
        ctrl.districtClass || "form-select form-control mb-3";
      ctrl.wardClass = ctrl.wardClass || "form-select form-control mb-3";

      ctrl.provinceOptions = await apiService.getApiResult({
        url: ctrl.provinceEndpoint,
      });
      $scope.$apply();
      $rootScope.$watch(
        () => {
          return ctrl.province;
        },
        async function (newVal, oldVal) {
          if (newVal != oldVal || !ctrl.district) {
            if (!ctrl.allDistrictOptions) {
              ctrl.allDistrictOptions = await apiService.getApiResult({
                url: ctrl.districtEndpoint,
              });
              ctrl.districtOptions = ctrl.allDistrictOptions.filter(
                (m) => m["province"] == ctrl.province
              );
              $scope.$apply();
            } else {
              ctrl.districtOptions = ctrl.allDistrictOptions.filter(
                (m) => m["province"] == ctrl.province
              );
            }
          }
        }
      );
      $rootScope.$watch(
        () => {
          return ctrl.district;
        },
        async function (newVal, oldVal) {
          if (newVal != oldVal) {
            if (!ctrl.allWardOptions) {
              ctrl.allWardOptions = await apiService.getApiResult({
                url: ctrl.wardEndpoint,
              });
              ctrl.wardOptions = ctrl.allWardOptions.filter(
                (m) => m["district"] == ctrl.district
              );
              $scope.$apply();
            } else {
              ctrl.wardOptions = ctrl.allWardOptions.filter(
                (m) => m["district"] == ctrl.district
              );
            }
          }
        }
      );
    };
  },
]);

sharedComponents.component("barCode", {
  templateUrl: "/mix-app/views/app-shared/components/bar-code/view.html",
  bindings: {
    model: "=",
    viewOnly: "=?",
    encode: "=?", // allowed ean8 / ean13
  },
  controller: [
    "$rootScope",
    "$element",
    function ($rootScope, $element) {
      var ctrl = this;
      ctrl.encodes = [
        "EAN8",
        "EAN13",
        "CODE128",
        "CODE128A",
        "CODE128B",
        "CODE128C",
        "UPC",
        "ITF14",
        "ITF",
        "MSI",
        "MSI10",
        "MSI11",
        "MSI1010",
        "MSI1110",
        "pharmacode",
      ];
      ctrl.$onInit = function () {
        if (!ctrl.encode) {
          ctrl.encode = "EAN8";
        }
        setTimeout(() => {
          if (ctrl.model) {
            ctrl.generate();
          }
        }, 200);
      };
      ctrl.initOutput = function () {
        ctrl.element = $element[0].querySelector(".bar-output");
        if (ctrl.model) {
          ctrl.generate();
        }
      };
      ctrl.generate = function () {
        if (ctrl.element) {
          try {
            JsBarcode(ctrl.element, ctrl.model, { format: ctrl.encode });
            ctrl.error = null;
          } catch (error) {
            var context = ctrl.element.getContext("2d");
            // do some drawing
            context.clearRect(
              0,
              0,
              context.canvas.width,
              context.canvas.height
            );
            ctrl.element.width = context.canvas.width;
            ctrl.error = error;
          }
        }
        // $(ctrl.element).empty();
        // $(ctrl.element).barcode(ctrl.model, ctrl.encode, {
        //   barWidth: 2,
        //   barHeight: 50,
        // });
      };
      ctrl.download = function () {
        $rootScope.downloadCanvasImage(ctrl.element);
      };
    },
  ],
});

sharedComponents.component("azureStorage", {
  templateUrl: "/mix-app/views/app-shared/components/azure-storage/view.html",
  bindings: {
    data: "=",
    width: "=",
  },
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;
      ctrl.blobSasUrl = "<placeholder>";
      ctrl.blobServiceClient = new BlobServiceClient(blobSasUrl);
      ctrl.containerName = "container" + new Date().getTime();
      ctrl.containerClient = blobServiceClient.getContainerClient(
        containerName
      );

      const fileInput = document.getElementById("azure-file-input");
      const status = document.getElementById("status");
      const fileList = document.getElementById("file-list");

      const reportStatus = (message) => {
        status.innerHTML += `${message}<br/>`;
        status.scrollTop = status.scrollHeight;
      };

      ctrl.$onInit = function () {};

      ctrl.createContainer = async () => {
        try {
          reportStatus(`Creating container "${containerName}"...`);
          await containerClient.create();
          reportStatus(`Done.`);
        } catch (error) {
          reportStatus(error.message);
        }
      };

      ctrl.deleteContainer = async () => {
        try {
          reportStatus(`Deleting container "${containerName}"...`);
          await containerClient.delete();
          reportStatus(`Done.`);
        } catch (error) {
          reportStatus(error.message);
        }
      };

      ctrl.listFiles = async () => {
        fileList.size = 0;
        fileList.innerHTML = "";
        try {
          reportStatus("Retrieving file list...");
          let iter = containerClient.listBlobsFlat();
          let blobItem = await iter.next();
          while (!blobItem.done) {
            fileList.size += 1;
            fileList.innerHTML += `<option>${blobItem.value.name}</option>`;
            blobItem = await iter.next();
          }
          if (fileList.size > 0) {
            reportStatus("Done.");
          } else {
            reportStatus("The container does not contain any files.");
          }
        } catch (error) {
          reportStatus(error.message);
        }
      };

      ctrl.uploadFiles = async () => {
        try {
          reportStatus("Uploading files...");
          const promises = [];
          for (const file of fileInput.files) {
            const blockBlobClient = containerClient.getBlockBlobClient(
              file.name
            );
            promises.push(blockBlobClient.uploadBrowserData(file));
          }
          await Promise.all(promises);
          reportStatus("Done.");
          listFiles();
        } catch (error) {
          reportStatus(error.message);
        }
      };

      ctrl.deleteFiles = async () => {
        try {
          if (fileList.selectedOptions.length > 0) {
            reportStatus("Deleting files...");
            for (const option of fileList.selectedOptions) {
              await containerClient.deleteBlob(option.text);
            }
            reportStatus("Done.");
            listFiles();
          } else {
            reportStatus("No files selected.");
          }
        } catch (error) {
          reportStatus(error.message);
        }
      };
    },
  ],
});

sharedComponents.component("breadcrumbs", {
  templateUrl:
    "/mix-app/views/app-shared/components/breadcrumbs/breadcrumbs.html",
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;
    },
  ],
  bindings: {
    breadCrumbs: "=",
  },
});

sharedComponents.component("checkboxSwitch", {
  templateUrl: "/mix-app/views/app-shared/components/checkbox-switch/view.html",
  controller: [
    "$rootScope",
    "$location",
    function ($rootScope, $location) {
      var ctrl = this;
      ctrl.guid = $rootScope.generateUUID();
      ctrl.$onInit = function () {
        ctrl.isSelected = ctrl.isSelected || false;
      };
      ctrl.limString = function (str, max) {
        if (str) {
          return str.length > max ? str.substring(0, max) + " ..." : str;
        }
      };
    },
  ],

  bindings: {
    value: "=",
    isSelected: "=?",
    detailUrl: "=?",
    callback: "&",
    description: "=",
  },
});

sharedComponents.component("cultures", {
  templateUrl: "/mix-app/views/app-shared/components/cultures/cultures.html",
  bindings: {
    isClone: "=",
    data: "=",
  },
});

//sharedComponents.controller('ImageController', );
sharedComponents.component("customFile", {
  templateUrl:
    "/mix-app/views/app-shared/components/custom-file/custom-file.html",
  bindings: {
    header: "=",
    title: "=",
    description: "=",
    src: "=",
    srcUrl: "=?",
    data: "=?",
    type: "=?",
    folder: "=",
    auto: "=",
    onInsert: "&?",
    onDelete: "&",
    save: "&",
  },
  controller: [
    "$rootScope",
    "$scope",
    "MediaService",
    function PortalTemplateController($rootScope, $scope, mediaService) {
      var ctrl = this;
      ctrl.media = null;
      ctrl.$onInit = function () {
        ctrl.id = Math.random();
        ctrl.mediaFile = {
          file: null,
          fullPath: "",
          fileFolder: "content/site",
          title: "",
          description: "",
        };
      };
      ctrl.selectFile = function (files) {
        if (files !== undefined && files !== null && files.length > 0) {
          ctrl.file = files[0];
          if ($rootScope.isImage(ctrl.file)) {
            ctrl.canUpload = false;
            mediaService.openCroppie(ctrl.file, ctrl, true);
          } else {
            ctrl.canUpload = true;
            ctrl.uploadFile(ctrl.file);
          }
        }
      };

      ctrl.croppieCallback = function (result) {
        if (result) {
          ctrl.srcUrl = result.filePath;
          if (ctrl.onInsert) {
            ctrl.onInsert({ data: ctrl.srcUrl });
          }
        } else if (ctrl.file) {
          ctrl.uploadFile(ctrl.file);
        }
      };

      ctrl.uploadFile = async function (file) {
        if (file !== null) {
          $rootScope.isBusy = true;
          var reader = new FileReader();
          reader.readAsDataURL(file);
          reader.onload = async function () {
            var getMedia = await mediaService.getSingle(["portal"]);
            if (getMedia.success) {
              ctrl.mediaFile.fileName = file.name.substring(
                0,
                file.name.lastIndexOf(".")
              );
              ctrl.mediaFile.extension = file.name.substring(
                file.name.lastIndexOf(".")
              );
              ctrl.mediaFile.fileStream = reader.result;
              var media = getMedia.data;
              media.mediaFile = ctrl.mediaFile;
              var resp = await mediaService.save(media);
              if (resp && resp.success) {
                ctrl.src = resp.data.targetUrl;
                ctrl.srcUrl = resp.data.targetUrl;
                $rootScope.isBusy = false;
                $scope.$apply();
              } else {
                if (resp) {
                  $rootScope.showErrors(resp.errors);
                }
                $rootScope.isBusy = false;
                $scope.$apply();
              }
            }
          };
          reader.onerror = function (error) {};
        } else {
          return null;
        }
      };
      ctrl.getBase64 = function (file) {
        if (file !== null && ctrl.mediaFile) {
          $rootScope.isBusy = true;
          var reader = new FileReader();
          reader.readAsDataURL(file);
          reader.onload = function () {
            var index = reader.result.indexOf(",") + 1;
            var base64 = reader.result.substring(index);
            ctrl.mediaFile.fileName = file.name.substring(
              0,
              file.name.lastIndexOf(".")
            );
            ctrl.mediaFile.extension = file.name.substring(
              file.name.lastIndexOf(".")
            );
            ctrl.mediaFile.fileStream = reader.result;
            ctrl.srcUrl = reader.result;
            $rootScope.isBusy = false;

            $scope.$apply();
          };
          reader.onerror = function (error) {
            $rootScope.isBusy = false;
            $rootScope.showErrors([error]);
          };
        } else {
          return null;
        }
      };
    },
  ],
});

sharedComponents.component("swDataPreview", {
  templateUrl:
    "/mix-app/views/app-shared/components/data-preview/data-preview.html",
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;
    },
  ],
  bindings: {
    type: "=",
    value: "=",
  },
});

sharedComponents.component("mixDataTypeEditor", {
  templateUrl:
    "/mix-app/views/app-shared/components/data-type-editor/view.html",
  bindings: {
    data: "=",
    datatype: "=",
    inputClass: "=?",
    isShowTitle: "=?",
    columnTitle: "=?",
  },
  controller: [
    "ngAppSettings",
    function (ngAppSettings) {
      var ctrl = this;
      ctrl.icons = ngAppSettings.icons;
      this.dataTypes = ngAppSettings.dataTypes;
      ctrl.$onInit = function () {
        ctrl.obj = null;
        switch (ctrl.datatype) {
          case "datetime":
          case "date":
          case "time":
            if (ctrl.data) {
              ctrl.obj = new Date(ctrl.data);
            }
            break;
          case "boolean":
            ctrl.obj = String(ctrl.data) == "true";
            break;
          default:
            if (ctrl.column && !ctrl.data) {
              ctrl.data = ctrl.column.defaultValue;
              ctrl.obj = ctrl.column.defaultValue;
            }
            break;
        }
      };
      ctrl.updateValue = function () {
        switch (ctrl.datatype) {
          case "datetime":
            if (ctrl.obj) {
              ctrl.data = ctrl.obj.toLocaleString();
            }
            break;
          case "date":
            if (ctrl.obj) {
              ctrl.data = ctrl.obj.toLocaleDateString();
            }
            break;
          case "time":
            if (ctrl.obj) {
              ctrl.data = ctrl.obj.toLocaleTimeString("en-GB");
            }
            break;

          case "boolean":
            ctrl.data = ctrl.obj.toString().toLowerCase();
            break;
          default:
            ctrl.data = ctrl.obj;
            break;
        }
        console.log(ctrl.data);
      };
    },
  ],
});

"use trick";
sharedComponents.directive("pane", function () {
  return {
    require: "^tabs",
    restrict: "E",
    transclude: true,
    scope: { title: "@" },
    link: function (scope, element, attrs, tabsController) {
      tabsController.addPane(scope);
    },
    template:
      '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
      "</div>",
    replace: true,
  };
});

sharedComponents.directive("tabs", function () {
  return {
    restrict: "E",
    transclude: true,
    scope: {},
    controller: function ($scope, $element) {
      var panes = ($scope.panes = []);

      $scope.select = function (pane) {
        angular.forEach(panes, function (pane) {
          pane.selected = false;
        });
        pane.selected = true;
      };

      this.addPane = function (pane) {
        if (panes.length === 0) $scope.select(pane);
        panes.push(pane);
      };
    },
    templateUrl: "/mix-app/views/app-shared/components/templates/tabs.html",
    replace: true,
  };
});

sharedComponents.component("fbLogin", {
  templateUrl: "/mix-app/views/app-shared/components/fb-login/view.html",
  bindings: {
    fbPageId: "=",
    themeColor: "=",
    inGreeting: "=",
    outGreeting: "=",
    loginCallback: "&?",
    logoutCallback: "&?",
  },
  controller: [
    "$rootScope",
    "$scope",
    "$location",
    function ($rootScope, $scope, $location) {
      var ctrl = this;
      ctrl.loginStatus = null;
      ctrl.showLogin = false;
      ctrl.init = function () {
        // ctrl.checkLoginState();
        ctrl.showLogin =
          $rootScope.globalSettings.externalLoginProviders.Facebook != "";
      };
      ctrl.translate = $rootScope.translate;
      ctrl.login = function () {
        FB.login(
          function (response) {
            ctrl.statusChangeCallback(response);
          },
          { scope: "public_profile,email" }
        );
      };
      ctrl.logout = function () {
        FB.getLoginStatus(function (response) {
          if (response.status === "connected") {
            FB.logout(function (response) {
              ctrl.loggedIn = false;
              ctrl.profile = null;
              if (ctrl.logoutCallback) {
                ctrl.logoutCallback();
              }
              $scope.$apply();
            });
          }
        });
      };
      ctrl.getProfile = function (authResponse) {
        FB.api("/me", "GET", { fields: "id,name,email" }, function (response) {
          ctrl.profile = response;
          ctrl.loggedIn = true;
          if (ctrl.loginCallback) {
            let loginData = {
              userID: authResponse.userID,
              email: response.email,
              accessToken: authResponse.accessToken,
            };
            ctrl.loginCallback({ resp: loginData });
          }
          $scope.$apply();
        });
      };
      ctrl.checkLoginState = function () {
        FB.getLoginStatus(function (response) {
          ctrl.statusChangeCallback(response);
          ctrl.loginStatus = response;
        });
      };
      ctrl.statusChangeCallback = function (response) {
        // Called with the results from FB.getLoginStatus().
        if (response.status === "connected") {
          // Logged into your webpage and Facebook.
          ctrl.getProfile(response.authResponse);
        }
      };
    },
  ],
});

sharedComponents.component("goToTop", {
  templateUrl: "/mix-app/views/app-shared/components/go-to-top/view.html",
  controller: [
    "$rootScope",
    "$scope",
    function ($rootScope, $scope) {
      var ctrl = this;
      ctrl.$onInit = function () {
        $(window).scroll(function () {
          if ($(window).scrollTop() >= 50) {
            // If page is scrolled more than 50px
            $("#return-to-top").fadeIn(200); // Fade in the arrow
          } else {
            $("#return-to-top").fadeOut(200); // Else fade out the arrow
          }
        });
      };
      ctrl.goToTop = function () {
        // ===== Scroll to Top ====
        $("body,html").animate(
          {
            scrollTop: 0, // Scroll to top of body
          },
          500
        );
      };
    },
  ],
  bindings: {},
});

sharedComponents.component("googlePay", {
  templateUrl: "/mix-app/views/app-shared/components/google-pay/view.html",
  bindings: {
    items: "=",
    currencyCode: "=",
    totalPriceStatus: "=",
    totalPrice: "=",
    processPaymentData: "&",
  },
  controller: [
    "$rootScope",
    "$element",
    "gpayService",
    function ($rootScope, $element, service) {
      var ctrl = this;
      ctrl.merchantInfo = {
        merchantId: "BCR2DN6TV7RIL73C",
        merchantName: "Mixcore",
      };
      ctrl.payPalPaymentMethod = {
        type: "PAYPAL",
        parameters: {
          purchase_context: {
            purchase_units: [
              {
                payee: {
                  merchant_id: "08975416670814987822",
                },
              },
            ],
          },
        },
      };
      ctrl.environment = "TEST";

      ctrl.init = function () {
        ctrl.onGooglePayLoaded($element[0]);
      };

      ctrl.onGooglePayLoaded = function (element) {
        const paymentsClient = service.getGooglePaymentsClient(
          ctrl.merchantInfo,
          ctrl.onPaymentAuthorized
        );
        paymentsClient
          .isReadyToPay(service.getGoogleIsReadyToPayRequest())
          .then(function (response) {
            if (response.result) {
              ctrl.addGooglePayButton(element);
              // @todo prefetch payment data to improve performance after confirming site functionality
              // prefetchGooglePaymentData();
            }
          })
          .catch(function (err) {
            // show error in developer console for debugging
            console.error(err);
          });
      };

      /**
       * Provide Google Pay API with a payment amount, currency, and amount status
       *
       * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#TransactionInfo|TransactionInfo}
       * @returns {object} transaction info, suitable for use as transactionInfo property of PaymentDataRequest
       */
      ctrl.getGoogleTransactionInfo = function () {
        return {
          displayItems: ctrl.items,
          countryCode: "VN",
          currencyCode: "VND",
          totalPriceStatus: "FINAL",
          totalPrice: `${ctrl.totalPrice}`,
          totalPriceLabel: "Total",
        };
      };

      /**
       * Add a Google Pay purchase button alongside an existing checkout button
       *
       * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#ButtonOptions|Button options}
       * @see {@link https://developers.google.com/pay/api/web/guides/brand-guidelines|Google Pay brand guidelines}
       */
      ctrl.addGooglePayButton = function (element) {
        const paymentsClient = service.getGooglePaymentsClient(
          ctrl.merchantInfo,
          ctrl.onPaymentAuthorized
        );
        const button = paymentsClient.createButton({
          buttonColor: "default",
          buttonType: "plain",
          buttonSizeMode: "fill",
          onClick: ctrl.onGooglePaymentButtonClicked,
        });
        element.appendChild(button);
        // @todo prefetch payment data to improve performance after confirming site functionality
        // prefetchGooglePaymentData();
      };

      /**
       * Show Google Pay payment sheet when Google Pay payment button is clicked
       */
      ctrl.onGooglePaymentButtonClicked = function () {
        let transactionInfo = ctrl.getGoogleTransactionInfo();
        const paymentDataRequest = service.getGooglePaymentDataRequest(
          ctrl.merchantInfo,
          transactionInfo
        );
        paymentDataRequest.transactionInfo = transactionInfo;

        const paymentsClient = service.getGooglePaymentsClient(
          ctrl.merchantInfo,
          ctrl.onPaymentAuthorized
        );
        paymentsClient.loadPaymentData(paymentDataRequest);
      };

      ctrl.onPaymentAuthorized = function (paymentData) {
        return new Promise(function (resolve, reject) {
          // handle the response
          ctrl
            .processPayment(paymentData)
            .then(function (resp) {
              console.log(resp);
              resolve({ transactionState: "SUCCESS" });
            })
            .catch(function () {
              resolve({
                transactionState: "ERROR",
                error: {
                  intent: "PAYMENT_AUTHORIZATION",
                  message: "Insufficient funds",
                  reason: "PAYMENT_DATA_INVALID",
                },
              });
            });
        });
      };

      /**
       * Process payment data returned by the Google Pay API
       *
       * @param {object} paymentData response from Google Pay API after user approves payment
       * @see {@link https://developers.google.com/pay/api/web/reference/response-objects#PaymentData|PaymentData object reference}
       */
      ctrl.processPayment = async function (paymentData) {
        return await ctrl.processPaymentData({ paymentData: paymentData });
      };
    },
  ],
});

(function (angular) {
  appShared.component("languageSwitcher", {
    templateUrl:
      "/mix-app/views/app-shared/components/language-switcher/language-switcher.html",
    controller: [
      "$rootScope",
      "ApiService",
      "TranslatorService",
      function ($rootScope, apiService, translatorService) {
        var ctrl = this;
        ctrl.mixConfigurations = {};
        this.$onInit = function () {
          ctrl.mixConfigurations = $rootScope.mixConfigurations;
          if ($rootScope.globalSettings) {
            ctrl.mixConfigurations.cultures =
              $rootScope.globalSettings.cultures;
          }
        };

        ctrl.changeLang = async function (lang, langIcon) {
          ctrl.mixConfigurations.lang = lang;
          ctrl.mixConfigurations.langIcon = langIcon;
          // await commonService.removeSettings();
          // await commonService.removeTranslator();
          // commonService.fillSettings(lang).then(function () {
          //     translatorService.reset(lang).then(function () {
          apiService.getAllSettings(lang).then(function (response) {
            translatorService.translateUrl(lang).then(function (url) {
              window.top.location = url;
            });
          });
          //     });
          // });
        };
        ctrl.logOut = function () {
          $rootScope.logOut();
        };
      },
    ],
    bindings: {
      //settings: '=',
      ulStyle: "=",
      liStyle: "=",
      aStyle: "=",
      activeClass: "=",
    },
  });
})(window.angular);

appShared.component("loginPopup", {
  templateUrl: "/mix-app/views/app-shared/components/login-popup/view.html",
  controller: "LoginPopupController",
});

appShared.controller("LoginPopupController", [
  "$scope",
  "$rootScope",
  "AuthService",
  "ApiService",
  "CommonService",
  function LoginPopupController(
    $scope,
    $rootScope,
    authService,
    commonService
  ) {
    $scope.loginData = {
      username: "",
      password: "",
      rememberMe: false,
    };
    $scope.login = async function () {
      var result = await authService.loginPopup($scope.loginData);
      if (result && result.success) {
        $rootScope.isBusy = false;
        $scope.message = result.errors[0];
        $("#login-popup").modal("hide");
        $scope.$apply();

        if ($rootScope.loginCallbackRequest) {
          if ($rootScope.loginCallbackType == "rest") {
            apiService.sendRequest($rootScope.loginCallbackRequest);
          } else {
            apiService.getRestResult($rootScope.loginCallbackRequest);
          }
          $rootScope.loginCallbackRequest = null;
          $rootScope.loginCallbackType = null;
        }
      } else {
        $rootScope.goToSiteUrl("/security/login");
      }
    };
    $scope.closeDialog = function () {
      $("#login-popup").modal("hide");
    };
  },
]);

sharedComponents.component("limitString", {
  templateUrl:
    "/mix-app/views/app-shared/components/limit-string/limit-string.html",
  controller: [
    "$rootScope",
    "$scope",
    "ngAppSettings",
    function ($rootScope, $scope, ngAppSettings) {
      var ctrl = this;
      ctrl.shortenString = "";
      ctrl.previousContentId = undefined;

      this.$onInit = () => {
        ctrl.previousContentId = angular.copy(ctrl.contentId);
      };

      this.$doCheck = () => {
        if (ctrl.contentId !== ctrl.previousContentId) {
          ctrl.loadModuleData();
          ctrl.previousContentId = ctrl.contentId;
        }
      };
      ctrl.shortString = function () {
        var data = decodeURIComponent(ctrl.content);
        if (data) {
          if (ctrl.max < data.length) {
            ctrl.shortenString =
              data.replace(/[+]/g, " ").substr(0, ctrl.max) + " ...";
          } else {
            ctrl.shortenString = data.replace(/[+]/g, " ");
          }
        }
      };
      ctrl.view = function () {
        var obj = {
          moduleContentId: ctrl.moduleContentId,
          id: ctrl.contentId,
        };
        $rootScope.preview("module-data", obj, null, "modal-lg");
      };
      ctrl.translate = $rootScope.translate;
    },
  ],
  bindings: {
    content: "=",
    showData: "=",
    max: "=",
    moduleContentId: "=",
    contentId: "=",
  },
});

appShared.component("mediaNavs", {
  templateUrl:
    "/mix-app/views/app-shared/components/media-navs/media-navs.html",
  controller: [
    "$rootScope",
    "$scope",
    "ngAppSettings",
    "MediaService",
    function ($rootScope, $scope, ngAppSettings, mediaService) {
      var ctrl = this;
      mediaService.init("media");
      ctrl.request = {
        pageSize: "10",
        pageIndex: 0,
        status: "Published",
        orderBy: "CreatedDateTime",
        direction: "Desc",
        fromDate: null,
        toDate: null,
        keyword: "",
      };
      ctrl.medias = [];
      ctrl.activeMedia = function (media) {
        var currentItem = null;
        if (ctrl.data === null || ctrl.isSingle) {
          ctrl.data = [];
        }
        $.each(ctrl.data, function (i, e) {
          if (e.mediaId === media.id) {
            e.isActived = media.isActived;
            currentItem = e;
            return false;
          }
        });
        if (currentItem === null) {
          currentItem = {
            description:
              media.description !== "undefined" ? media.description : "",
            image: media.filePath,
            mediaId: media.id,
            product: ctrl.id,
            specificulture: media.specificulture,
            position: 0,
            priority: ctrl.data.length + 1,
            isActived: true,
          };
          ctrl.data.push(currentItem);
        }
        if (ctrl.isSingle) {
          if (!media.isActived) {
            ctrl.output = "";
            ctrl.data = [];
          } else {
            ctrl.output = ctrl.data[0].image;
            //ctrl.loadMedias(ctrl.request.pageIndex);
          }
        }
      };
      ctrl.loadMedias = async function (pageIndex) {
        if (!ctrl.prefix) {
          ctrl.prefix = "media_navs";
        }
        if (pageIndex !== undefined) {
          ctrl.request.pageIndex = pageIndex;
        }
        if (ctrl.request.fromDate !== null) {
          var d = new Date(ctrl.request.fromDate);
          ctrl.request.fromDate = d.toISOString();
        }
        if (ctrl.request.toDate !== null) {
          ctrl.request.toDate = ctrl.request.toDate.toISOString();
        }
        if ($rootScope.globalSettings) {
          ctrl.isBusy = true;
          var resp = await mediaService.getList(ctrl.request);
          if (resp && resp.success) {
            ctrl.medias = resp.data;
            if (ctrl.data) {
              angular.forEach(ctrl.medias.items, function (value, key) {
                var temp = ctrl.data.filter(function (item) {
                  return item.mediaId === value.id;
                })[0];
                value.isActived = temp !== undefined;
              });
            }
            ctrl.isBusy = false;
            $scope.$apply();
          } else {
            if (resp) {
              $rootScope.showErrors(resp.errors);
            }
            ctrl.isBusy = false;
            $scope.$apply();
          }
        }
      };
    },
  ],
  bindings: {
    data: "=",
    prefix: "=",
    sourceFieldName: "=",
    isSingle: "=",
    output: "=",
    loadMedia: "&",
    onDelete: "&",
    onUpdate: "&",
  },
});

"use strict";
appShared.controller("MediaController", [
  "$scope",
  "$rootScope",
  "ngAppSettings",
  "$routeParams",
  "MediaService",
  "ApiService",
  "CommonService",
  function (
    $scope,
    $rootScope,
    ngAppSettings,
    $routeParams,
    service,
    apiService,
    commonService
  ) {
    BaseCtrl.call(
      this,
      $scope,
      $rootScope,
      $routeParams,
      ngAppSettings,
      service
    );

    $scope.viewmodel = {
      title: "",
      description: "",
      status: "Published",
      mediaFile: {
        file: null,
        fullPath: "",
        folderName: "Media",
        fileFolder: "",
        fileName: "",
        extension: "",
        content: "",
        fileStream: "",
      },
    };
    // multipart form
    $scope.formFile = null;
    $scope.relatedMedias = [];

    $scope.init = function () {
      $("#modal-files").on("shown.bs.modal", function () {
        $scope.getList();
      });
    };
    $scope.getListSuccessCallback = function () {
      //   angular.forEach($scope.data.items, function (e) {
      //     e.isImage = $scope.isImage(e.fullPath);
      //     if (e.isImage) {
      //       e.fullPath = `${e.fullPath.split(".")[0]}-XXS.${
      //         e.fullPath.split(".")[1]
      //       }`;
      //     }
      //   });
    };
    $scope.isImage = function (url) {
      return url
        .toLowerCase()
        .match(/([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|svg|webp|jfif|webp)/g);
    };
    $scope.save = async function () {
      var data = $scope.viewmodel;
      $rootScope.isBusy = true;
      if ($scope.validate) {
        $scope.isValid = await $rootScope.executeFunctionByName(
          "validate",
          $scope.validateArgs,
          $scope
        );
      }
      if ($scope.isValid) {
        var resp = await service.save(
          data,
          $scope.formFile,
          $scope.onUploadFileProgress
        );
        if (resp && resp.success) {
          $scope.viewmodel = resp.data;
          $rootScope.showMessage("success", "success");

          if ($scope.saveSuccessCallback) {
            $rootScope.executeFunctionByName(
              "saveSuccessCallback",
              $scope.saveSuccessCallbackArgs,
              $scope
            );
          } else {
            $rootScope.goToPath("/admin/media/list");
          }
          $rootScope.isBusy = false;
          $scope.$apply();
        } else {
          if ($scope.saveFailCallback) {
            $rootScope.executeFunctionByName(
              "saveFailCallback",
              $scope.saveSuccessCallbackArgs,
              $scope
            );
          }
          if (resp) {
            $rootScope.showErrors(resp.errors);
          }
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      } else {
        $rootScope.showErrors(["invalid model"]);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.uploadMedia = async function () {
      $rootScope.isBusy = true;
      var resp = await service.uploadMedia($scope.mediaFile);
      if (resp && resp.success) {
        //$scope.activedMedia = resp.data;
        $scope.getList();
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.selectFile = function (file, errFiles) {
      if (file !== undefined && file !== null) {
        $scope.mediaFile.folder = "Media";
        $scope.mediaFile.file = file;
        $scope.getBase64(file);
      }
    };
    $scope.getBase64 = function (file) {
      if (file !== null && $scope.postedFile) {
        $rootScope.isBusy = true;
        var reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function () {
          var index = reader.result.indexOf(",") + 1;
          var base64 = reader.result.substring(index);
          $scope.activedMedia.mediaFile.fileName = $rootScope.generateKeyword(
            file.name.substring(0, file.name.lastIndexOf(".")),
            "-"
          );
          $scope.activedMedia.mediaFile.extension = file.name.substring(
            file.name.lastIndexOf(".")
          );
          $scope.activedMedia.mediaFile.fileStream = reader.result;
          $rootScope.isBusy = false;
          $scope.$apply();
        };
        reader.onerror = function (error) {
          $rootScope.showErrors([error]);
          $rootScope.isBusy = false;
        };
      } else {
        return null;
      }
    };
    $scope.togglePreview = function (item) {
      item.isPreview = item.isPreview === undefined ? true : !item.isPreview;
    };
    $scope.clone = async function (id) {
      $rootScope.isBusy = true;
      var resp = await service.cloneMedia(id);
      if (resp && resp.success) {
        $scope.activedMedia = resp.data;
        $rootScope.showMessage("Update successfully!", "success");
        $rootScope.isBusy = false;
        $scope.$apply();
        //$location.path('/admin/media/details/' + resp.data.id);
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };

    $scope.removeCallback = function () {
      $scope.getList();
    };
    $scope.onUploadFileProgress = function (progress) {
      $scope.progress = progress;
    };
  },
]);

"use strict";
appShared.factory("MediaService", [
  "$rootScope",
  "$uibModal",
  "ApiService",
  "CommonService",
  "BaseRestService",
  function ($rootScope, $uibModal, apiService, commonService, baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.initService("/rest", "mix-storage", true);
    var _cloneMedia = async function (id) {
      var req = {
        method: "GET",
        url: serviceFactory.prefixUrl + "/clone/" + id,
      };
      return await apiService.sendRequest(req);
    };
    var _save = async function (objData, file, onUploadFileProgress) {
      if (file) {
        var url = this.prefixUrl + "/upload-file";
        var fd = new FormData();
        //   var file = objData.mediaFile.file;
        //   objData.mediaFile.file = null;
        fd.append("model", angular.toJson(objData));
        fd.append("file", file);
        return await serviceFactory.ajaxSubmitForm(
          fd,
          url,
          onUploadFileProgress
        );
      } else if (objData.fileBase64) {
        this.saveFileStream(objData);
      }
    };
    var _saveFileStream = async function (objData) {
      var url = this.prefixUrl + "/upload-file-stream";
      var req = {
        method: "POST",
        url: url,
        data: JSON.stringify(objData),
      };
      return await apiService.sendRequest(req);
    };
    var _uploadMedia = async function (file, folder, onUploadFileProgress) {
      //var container = $(this).parents('.model-media').first().find('.custom-file').first();
      if (file !== null) {
        // Create FormData object
        var url = this.prefixUrl + "/upload-file";
        var fd = new FormData();

        fd.append("file", file);
        fd.append("folder", folder || "");
        return await serviceFactory.ajaxSubmitForm(
          fd,
          url,
          onUploadFileProgress
        );
      }
    };
    var _openCroppie = function (file, scope, autoSave = true) {
      const w = parseInt(scope.w);
      const h = parseInt(scope.h);
      const rto = w && h ? scope.w / scope.h : null;

      var modalInstance = $uibModal.open({
        animation: true,
        windowClass: "show",
        templateUrl:
          "/mix-app/views/app-shared/components/modal-croppie/croppie.html",
        controller: "ModalCroppieController",
        controllerAs: "$ctrl",
        size: "lg",
        resolve: {
          mediaService: this,
          file: function () {
            return file;
          },
          w,
          h,
          rto,
          autoSave,
        },
      });
      modalInstance.result.then(
        function (result) {
          scope.croppieCallback(result);
        },
        function () {}
      );
    };
    serviceFactory.openCroppie = _openCroppie;
    serviceFactory.cloneMedia = _cloneMedia;
    serviceFactory.uploadMedia = _uploadMedia;
    serviceFactory.saveFileStream = _saveFileStream;
    serviceFactory.save = _save;
    return serviceFactory;
  },
]);

sharedComponents.component("medias", {
  templateUrl: "/mix-app/views/app-shared/components/medias/medias.html",
  controller: "MediaController",
  bindings: {},
});

sharedComponents.component("message", {
  templateUrl: "/mix-app/views/app-shared/components/message/message.html",
  bindings: {
    message: "=",
  },
});

"use strict";
appShared.controller("MessengerController", [
  "$scope",
  "$rootScope",
  "AuthService",
  function ($scope, $rootScope, authService) {
    $scope.user = {
      loggedIn: false,
      info: {},
    };
    $scope.isHide = true;
    $scope.hideContact = true;
    $scope.members = [];
    $scope.messages = [];
    $scope.message = { connection: {}, content: "" };
    $scope.request = {
      uid: "",
      objectType: null,
      action: "",
      data: {},
      room: "",
      isMyself: false,
    };
    $scope.loadMsgButton = function () {};
    $scope.init = function () {
      var endpoints = JSON.parse(localStorage.getItem("ls.endpoints") || "{}");
      BaseHub.call(this, $scope, endpoints.Messenger);

      authService.fillAuthData().then(() => {
        $scope.user.loggedIn = true;
        $scope.user.info = {
          id: authService.authentication.info.id,
          avatar: authService.authentication.info.userData.avatar,
          name: authService.authentication.info.userName,
        };
      });
      $scope.newMsgCount = 0;
      $scope.messages = [];
      $scope.onConnected = () => {
        $scope.joinRoom("portal");
      };
      $scope.init = function () {
        $scope.startConnection(
          "portalHub",
          authService.authentication.accessToken,
          (err) => {
            if (
              authService.authentication.refreshToken &&
              err.message.indexOf("401") >= 0
            ) {
              authService.refreshToken().then(async () => {
                $scope.startConnection(
                  "portalHub",
                  authService.authentication.accessToken
                );
              });
            }
          }
        );
      };
      $("button").on("click", function () {
        var text = $("#message").val();
        var hnow = new Date().getHours();
        var mnow = new Date().getMinutes();
        mnow = mnow < 10 ? "0" + mnow : mnow;
        var d = hnow + ":" + mnow;

        if (text.length > 0) {
          $("#message").css("border", "1px solid #f4f5f9");
          $("#conversation").append(
            "<li class='message-right'><div class='message-avatar'><div class='avatar ion-ios-person'></div><div class='name'>You</div></div><div class='message-text'>" +
              text +
              "</div><div class='message-hour'>" +
              d +
              " <span class='ion-android-done-all'></span></div></li>"
          );
          $("#message").val("");
          $(".widget-conversation").scrollTop(
            $("ul li").last().position().top + $("ul li").last().height()
          );
        } else {
          $("#message").css("border", "1px solid #eb9f9f");
          $("#message").animate({ opacity: "0.1" }, "slow");
          $("#message").animate({ opacity: "1" }, "slow");
          $("#message").animate({ opacity: "0.1" }, "slow");
          $("#message").animate({ opacity: "1" }, "slow");
        }
      });
    };
    $scope.toggle = function () {
      $scope.isHide = !$scope.isHide;
    };
    $scope.toggleContact = function () {
      $scope.hideContact = !$scope.hideContact;
    };
    $scope.sendMessage = function () {
      if ($scope.user.loggedIn) {
        $scope.request.data = $scope.message;
        $scope.sendMessage();
        $scope.message.content = "";
      }
    };
    $scope.receiveMessage = function (msg) {
      //$scope.responses.splice(0, 0, msg);
      switch (msg.title) {
        case "MemberList":
          $scope.members = msg.data;
          $scope.$apply();
          break;
        case "NewMember":
          $scope.newMember(msg.data);
          $(".widget-conversation").scrollTop = $(
            ".widget-conversation"
          )[0].scrollHeight;
          break;

        case "NewMessage":
          $scope.newMessage(msg);
          break;
        case "ConnectSuccess":
          $scope.user.loggedIn = true;
          $scope.initList(msg.data);
          $scope.$apply();
          break;

        case "MemberOffline":
          $scope.removeMember(msg.data);
          break;
      }
    };
    $scope.newMember = function (member) {
      var index = $scope.members.findIndex((x) => x.id === member.id);
      if (index < 0) {
        $scope.members.splice(0, 0, member);
      }
      $scope.$apply();
    };

    $scope.initList = function (data) {
      data.forEach((member) => {
        var index = $scope.members.findIndex((x) => x.id === member.id);
        if (index < 0) {
          $scope.members.splice(0, 0, member);
        }
      });

      $scope.$apply();
    };

    $scope.removeMember = function (memberId) {
      var index = $scope.members.findIndex((x) => x.id === memberId);
      if (index >= 0) {
        $scope.members.splice(index, 1);
      }
      $scope.$apply();
    };

    $scope.newMessage = function (msg) {
      $scope.messages.push(msg);
      $scope.$apply();
      var objDiv = document.getElementsByClassName("widget-conversation")[0];
      objDiv.scrollTop = objDiv.scrollHeight + 20;
    };
  },
]);

sharedComponents.component("messenger", {
  templateUrl: "/mix-app/views/app-shared/components/messenger/index.html",
  controller: "MessengerController",
  bindings: {
    message: "=",
  },
});

sharedComponents.component("mixColumnEditor", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-column-editor/view.html",
  bindings: {
    model: "=",
    column: "=",
    intParentId: "=?",
    guidParentId: "=?",
    isShowTitle: "=?",
    inputClass: "=?",
    createUrl: "=?",
    updateUrl: "=?",
    backUrl: "=?",
    level: "=?",
  },
  controller: [
    "$rootScope",
    "$scope",
    "$location",
    "ngAppSettings",
    "$filter",
    "ApiService",
    function (
      $rootScope,
      $scope,
      $location,
      ngAppSettings,
      $filter,
      apiService
    ) {
      var ctrl = this;
      ctrl.jsonObj = null;
      ctrl.mediaFile = {};
      ctrl.icons = ngAppSettings.icons;
      ctrl.previousValue = null;
      ctrl.translate = (keyword, isWrap, defaultText) => {
        return $rootScope.translate(keyword, isWrap, defaultText);
      };

      ctrl.refData = null;
      ctrl.defaultDataModel = null;

      ctrl.refDataModel = {
        id: null,
        data: null,
      };

      ctrl.dataTypes = $rootScope.globalSettings.dataTypes;
      ctrl.previousId = null;
      ctrl.options = [];
      ctrl.$onInit = async function () {
        ctrl.column.systemName = ctrl.toCamelCase(ctrl.column.systemName);
        ctrl.editor = ctrl.column.columnConfigurations.editor
          ? ctrl.column.columnConfigurations.editor.toLowerCase()
          : ctrl.column.dataType.toLowerCase();
        if (!ctrl.createUrl && ctrl.model && ctrl.column.referenceId) {
          ctrl.buildCreateUrl();
        }
        if (!ctrl.updateUrl) {
          ctrl.updateUrl = "/admin/mix-database-data/details";
        }
        if (ctrl.model && ctrl.column.isSelect) {
          // Load options from system configutation by name if exist else load options from column configurations
          if (ctrl.column.columnConfigurations.optionsConfigurationName) {
            // load options if not belong to other column value
            let belongTo = ctrl.column.columnConfigurations.belongTo;
            let endpoint =
              ctrl.column.columnConfigurations.optionsConfigurationName;
            if (!belongTo) {
              let options = await apiService.getApiResult({
                url: endpoint,
              });
              ctrl.options = options;
            } else {
              //   ctrl.options = options.filter(
              //     (m) => m[belongTo] == ctrl.model[belongTo]
              //   );
              $rootScope.$watch(
                () => {
                  return ctrl.model[belongTo];
                },
                async function (newVal, oldVal) {
                  if (newVal != oldVal) {
                    if (!ctrl.allOptions) {
                      ctrl.allOptions = await apiService.getApiResult({
                        url: endpoint,
                      });
                    }
                    ctrl.options = ctrl.allOptions.filter(
                      (m) => m[belongTo] == ctrl.model[belongTo]
                    );
                  }
                }
              );
            }
          } else {
            ctrl.options = ctrl.column.options;
          }
        }

        ctrl.watchId();
      };
      ctrl.watchId = function () {
        $rootScope.$watch(
          () => {
            if (ctrl.model) {
              return ctrl.model.id;
            }
          },
          async function (newVal, oldVal) {
            if (newVal != oldVal) {
              ctrl.buildCreateUrl();
            }
          }
        );
      };
      ctrl.toCamelCase = (txt) => {
        return txt.charAt(0).toLowerCase() + txt.substr(1);
      };
      ctrl.buildCreateUrl = function () {
        var backUrl = encodeURIComponent(`${$location.url()}`);
        ctrl.createUrl = `/admin/mix-database-data/create?mixDatabaseId=${ctrl.column.referenceId}&dataContentId=default&guidParentId=${ctrl.model.id}&parentType=Set&backUrl=${backUrl}`;
      };
      ctrl.initData = async function () {
        setTimeout(() => {
          ctrl.initDefaultValue();
          switch (ctrl.column.columnConfigurations.editor.toLowerCase()) {
            case "datetime":
            case "date":
            case "time":
              if (ctrl.model[ctrl.column.systemName]) {
                var date = $filter("date")(
                  ctrl.model[ctrl.column.systemName],
                  "yyyy-MM-ddTHH:mm"
                );
                ctrl.dateObj = new Date(date);
              }
              break;
            case "json":
            case "arrayradio":
              if (ctrl.model[ctrl.column.systemName]) {
                if (typeof ctrl.model[ctrl.column.systemName] === "object") {
                  ctrl.jsonObj = ctrl.model[ctrl.column.systemName];
                } else {
                  ctrl.jsonObj = JSON.parse(ctrl.model[ctrl.column.systemName]);
                  ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
                }
                ctrl.jsonContent = JSON.stringify(ctrl.jsonObj, null, "\t");
              } else {
                ctrl.jsonObj = JSON.parse(ctrl.column.defaultValue || "{}");
                ctrl.jsonContent = JSON.stringify(ctrl.jsonObj, null, "\t");
                ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
              }
              break;
            case "array":
            case "arraymedia":
              if (ctrl.model[ctrl.column.systemName]) {
                if (Array.isArray(ctrl.model[ctrl.column.systemName])) {
                  ctrl.jsonObj = ctrl.model[ctrl.column.systemName];
                } else {
                  ctrl.jsonObj = JSON.parse(ctrl.model[ctrl.column.systemName]);
                }
                ctrl.arrayContent = JSON.stringify(ctrl.jsonObj, null, "\t");
                ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
              } else {
                ctrl.jsonObj = [];
                ctrl.arrayContent = JSON.stringify(ctrl.jsonObj, null, "\t");
                ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
              }
              break;
            case "reference": // reference
              // if(ctrl.column.referenceId && ctrl.model.id){
              //     ctrl.model[ctrl.column.systemName] = ctrl.column.referenceId;
              //     navService.getSingle(['default']).then(resp=>{
              //         resp.mixDatabaseId = ctrl.column.referenceId;
              //         resp.parentId = ctrl.parentId;
              //         resp.parentType = ctrl.parentType;
              //         ctrl.defaultDataModel = resp;
              //         ctrl.refDataModel = angular.copy(ctrl.defaultDataModel);
              //     });
              //     ctrl.loadRefData();
              // }
              break;
            case "boolean":
              if (
                ctrl.column &&
                ctrl.column.defaultValue &&
                !ctrl.model[ctrl.column.systemName]
              ) {
                ctrl.model[ctrl.column.systemName] = JSON.parse(
                  ctrl.column.defaultValue
                );
              }
              break;
            default:
              //   if (ctrl.column && !ctrl.model[ctrl.column.systemName]) {
              //     ctrl.model[ctrl.column.systemName] = ctrl.column.defaultValue;
              //   }
              break;
          }
          ctrl.isInit = true;
          $scope.$apply();
        }, 200);
      };
      ctrl.addField = () => {
        if (Array.isArray(ctrl.jsonObj)) {
          ctrl.jsonObj.push("");
          ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
        }
      };
      ctrl.removeField = (index) => {
        if (Array.isArray(ctrl.jsonObj)) {
          ctrl.jsonObj.splice(index, 1);
          ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
        }
      };
      ctrl.parseEncryptedData = function (data) {
        var encryptedData = $rootScope.testJSON(data);
        return $rootScope.decrypt(encryptedData);
      };
      ctrl.initDefaultValue = async function () {
        if (
          ctrl.model[ctrl.column.systemName] == null ||
          ctrl.model[ctrl.column.systemName] == undefined
        ) {
          switch (ctrl.column.columnConfigurations.editor.toLowerCase()) {
            case "datetime":
            case "date":
            case "time":
              if (ctrl.column.defaultValue) {
                ctrl.dateObj = new Date(ctrl.column.defaultValue);
              }
              break;
            case "integer":
              if (ctrl.column.defaultValue) {
                ctrl.model[ctrl.column.systemName] = parseInt(
                  ctrl.column.defaultValue
                );
              }
              break;
            case "double":
              if (ctrl.column.defaultValue) {
                ctrl.model[ctrl.column.systemName] = parseFloat(
                  ctrl.column.defaultValue
                );
              }
              break;
            case "boolean":
              if (ctrl.column.defaultValue) {
                ctrl.model[ctrl.column.systemName] =
                  ctrl.column.defaultValue == "true";
              }
              break;
            case "upload":
              if (ctrl.column.defaultValue) {
                ctrl.model[ctrl.column.systemName] = ctrl.column.defaultValue;
              }
              break;
            default:
              if (ctrl.column.defaultValue) {
                ctrl.model[ctrl.column.systemName] = ctrl.column.defaultValue;
              }
              break;
          }
        }
      };
      ctrl.updateJsonColumn = (index, value) => {
        if (Array.isArray(ctrl.jsonObj)) {
          ctrl.jsonObj[index] = value;
          ctrl.model[ctrl.column.systemName] = ctrl.jsonObj;
        }
      };
      ctrl.updateJsonContent = function (content) {
        // mysql connector not support Jobject
        ctrl.model[ctrl.column.systemName] = content;
        // $scope.$apply();
      };
      ctrl.updateValue = function () {
        switch (ctrl.column.columnConfigurations.editor.toLowerCase()) {
          case "datetime":
            if (ctrl.dateObj) {
              ctrl.model[ctrl.column.systemName] = ctrl.dateObj.toISOString();
            }
            break;
          case "date":
            if (ctrl.dateObj) {
              ctrl.model[ctrl.column.systemName] = ctrl.dateObj.toISOString();
            }
            break;
          case "time":
            if (ctrl.dateObj) {
              ctrl.model[ctrl.column.systemName] =
                ctrl.dateObj.toLocaleTimeString("en-GB");
            }
            break;
          default:
            if (ctrl.column.defaultValue) {
              ctrl.model[ctrl.column.systemName] = ctrl.column.defaultValue;
            }
            break;
        }
      };
    },
  ],
});

sharedComponents.component("messengerPrivate", {
  templateUrl:
    "/mix-app/views/app-shared/components/messenger-private/index.html",
  controller: "MessengerController",
  bindings: {
    message: "=",
    connectionId: "=",
  },
});

sharedComponents.component("mixColumnPreview", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-column-preview/view.html",
  bindings: {
    model: "=",
    column: "=",
    datatype: "=?",
    maxLength: "=?",
    isShowTitle: "=?",
    inputClass: "=?",
  },
  controller: [
    "$rootScope",
    "$sce",
    "$filter",
    function ($rootScope, $sce, $filter) {
      var ctrl = this;
      ctrl.previousId = null;

      ctrl.$onInit = function () {
        ctrl.parseView();
      };
      ctrl.parseView = function () {
        ctrl.uuid = $rootScope.generateUUID();
        var obj = $rootScope.testJSON(ctrl.model);
        ctrl.view = ctrl.model;
        if (ctrl.column) {
          if (!ctrl.datatype) {
            ctrl.datatype = ctrl.column.dataType;
          }
          if (ctrl.column.isEncrypt) {
            if (obj) {
              ctrl.encryptedData = obj;
              ctrl.model = ctrl.encryptedData.data;
              ctrl.decrypted = $rootScope.decrypt(ctrl.encryptedData);
            }
          } else {
            if (obj && ctrl.maxLength) {
              ctrl.view = JSON.stringify(ctrl.model);
            }
          }
          if (ctrl.maxLength && ctrl.view) {
            ctrl.view = $filter("trim")(ctrl.view, ctrl.maxLength);
          }
          if (ctrl.column.dataType == 20 && ctrl.model) {
            // youtube video
            ctrl.model = $sce.trustAsResourceUrl(
              "https://www.youtube.com/embed/" +
                ctrl.model +
                "?rel=0&showinfo=0&autoplay=0"
            );
          }
        }
        // if(ctrl.column.dataType == 24 && ctrl.model) // youtube video
        // {
        //     ctrl.generateQRCode();
        // }
      };
      ctrl.generateQRCode = function () {
        setTimeout(() => {
          $("#" + ctrl.uuid).empty();
          $("#" + ctrl.uuid).qrcode(ctrl.model);
        }, 200);
      };
    },
  ],
});

sharedComponents.component("mixDataPreview", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-data-preview/mix-data-preview.html",
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;
    },
  ],
  bindings: {
    type: "=",
    value: "=",
    width: "=",
  },
});

sharedComponents.component("mixDataTable", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-data-table/mix-data-table.html",
  controller: [
    "$rootScope",
    "$scope",
    "$location",
    "ngAppSettings",
    function ($rootScope, $scope, $location, ngAppSettings) {
      var ctrl = this;
      ctrl.colWidth = 3;
      ctrl.init = function () {
        if (ctrl.data.items.length) {
          ctrl.min = ctrl.data.items[0].priority;
        }
        ctrl.colWidth = parseInt(9 / ctrl.columns.length);
        ctrl.lastColWidth = 9 % ctrl.columns.length > 0 ? 2 : 1;
      };
      ctrl.translate = $rootScope.translate;
      ctrl.selected = null;
      ctrl.updateOrders = function (index, items) {
        items.splice(index, 1);
        for (var i = 0; i < items.length; i++) {
          items[i].priority = ctrl.min + i;
        }
        ctrl.onUpdateInfos({ items: items });
      };

      ctrl.updateChildOrders = function (index, items) {
        items.splice(index, 1);
        for (var i = 0; i < items.length; i++) {
          items[i].priority = ctrl.min + i;
        }
        ctrl.onUpdateChildInfos({ items: items });
      };
      ctrl.dragoverCallback = function (index, item, external, type) {
        //console.log('drop ', index, item, external, type);
      };
      ctrl.insertCallback = function (index, item, external, type) {
        //console.log('insert ', index, item, external, type);
      };
      ctrl.delete = function (id) {
        ctrl.onDelete({ id: id });
      };
      ctrl.goTo = function (id) {
        $location.path(ctrl.editUrl + "/" + id);
      };
      ctrl.toggleChildNavs = function (nav) {
        nav.showChildNavs = nav.childNavs.length > 0 && !nav.showChildNavs;
      };
    },
  ],
  bindings: {
    data: "=",
    childName: "=",
    canDrag: "=",
    editUrl: "=",
    columns: "=",
    onDelete: "&",
    onUpdateInfos: "&",
    onUpdateChildInfos: "&",
  },
});

"use strict";
appShared.controller("MixDatabaseDataClientController", [
  "$scope",
  "$rootScope",
  "ngAppSettings",
  "$routeParams",
  "$location",
  "RestMixDatabaseDataPortalService",
  "RestRelatedMixDatabasePortalService",
  "ApiService",
  "CommonService",
  function (
    $scope,
    $rootScope,
    ngAppSettings,
    $routeParams,
    $location,
    service,
    navService,
    commonService
  ) {
    BaseODataCtrl.call(
      this,
      $scope,
      $rootScope,
      $routeParams,
      ngAppSettings,
      service
    );
    $scope.defaultId = "default";
    $scope.parentId = null;
    $scope.parentType = null;
    $scope.cates = ["Site", "System"];
    $scope.others = [];
    $scope.importFile = {
      file: null,
      fullPath: "",
      folder: "import",
      title: "",
      description: "",
    };
    $scope.mixConfigurations = $rootScope.globalSettings;
    $scope.canDrag =
      $scope.request.orderBy !== "Priority" || $scope.request.direction !== "0";
    $scope.init = async function () {
      $scope.mixDatabaseId = $routeParams.mixDatabaseId;
      $scope.mixDatabaseName = $routeParams.mixDatabaseName;
      $scope.dataContentId = $routeParams.dataContentId;
      $scope.refParentId = $routeParams.refParentId;
      $scope.refParentType = $routeParams.refParentType;
      if ($scope.refParentId && $scope.refParentType) {
        $scope.refDataModel = {
          parentId: $scope.refParentId,
          parentType: $scope.refParentType,
        };
      }
    };
    $scope.saveSuccessCallback = function () {
      if ($scope.refDataModel) {
        $scope.refDataModel.id = $scope.viewmodel.id;
        $scope.refDataModel.mixDatabaseId = $scope.viewmodel.mixDatabaseId;
        $scope.refDataModel.mixDatabaseName = $scope.viewmodel.mixDatabaseName;
        $scope.refDataModel.specificulture = $scope.viewmodel.specificulture;
        $scope.refDataModel.data = $scope.viewmodel;
        $rootScope.isBusy = true;
        navService.save("portal", $scope.refDataModel).then((resp) => {
          if (resp.success) {
            $rootScope.isBusy = false;
            $scope.$apply();
          } else {
            $rootScope.showErrors(result.errors);
            $rootScope.isBusy = false;
            $scope.$apply();
          }
        });
      }
    };
    $scope.export = async function (page = 0) {
      $rootScope.isBusy = true;
      $scope.mixDatabaseId = $routeParams.mixDatabaseId;
      $scope.mixDatabaseName = $routeParams.mixDatabaseName;
      if (page != undefined) {
        $scope.request.pageIndex = page;
      }
      var type = $routeParams.type;
      var parentId = $routeParams.parentId;
      var resp = await service.export(
        "portal",
        $scope.request,
        $scope.mixDatabaseId,
        $scope.mixDatabaseName,
        type,
        parentId
      );
      $scope.canDrag =
        $scope.request.orderBy !== "Priority" ||
        $scope.request.direction !== "0";
      if (resp && resp.success) {
        window.top.location = resp.data;
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.openImportDialog = function () {
      $("#inp-import-data").click();
    };

    $scope.getList = async function (page = 0) {
      $rootScope.isBusy = true;
      $scope.mixDatabaseId = $routeParams.mixDatabaseId;
      $scope.mixDatabaseName = $routeParams.mixDatabaseName;
      if (page != undefined) {
        $scope.request.pageIndex = page;
      }
      var type = $routeParams.type;
      var parentId = $routeParams.parentId;
      var response = await service.getList(
        "read",
        $scope.request,
        $scope.mixDatabaseId,
        $scope.mixDatabaseName,
        type,
        parentId
      );
      $scope.canDrag =
        $scope.request.orderBy !== "Priority" ||
        $scope.request.direction !== "0";
      if (response) {
        $scope.data = response;
        $scope.count([$routeParams.mixDatabaseName]);
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        $rootScope.showErrors("Failed");
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.getSingle = async function () {
      $rootScope.isBusy = true;
      var id = $routeParams.id || $scope.defaultId;
      $scope.mixDatabaseId = $routeParams.mixDatabaseId;
      $scope.mixDatabaseName = $routeParams.mixDatabaseName;
      var resp = await service.getSingle("portal", [
        id,
        $scope.mixDatabaseId,
        $scope.mixDatabaseName,
      ]);
      if (resp) {
        $scope.viewmodel = resp;
        $scope.viewmodel.parentType = $scope.parentType;
        $scope.viewmodel.parentId = $scope.parentId;
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors("Failed");
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.preview = function (item) {
      item.editUrl = "/admin/post/details/" + item.id;
      $rootScope.preview("post", item, item.title, "modal-lg");
    };
    $scope.edit = function (data) {
      $scope.goToPath(
        "/admin/mix-database-data/details?dataContentId=" +
          data.id +
          "&mixDatabaseId=" +
          $scope.mixDatabaseId
      );
    };
    $scope.remove = function (data) {
      $rootScope.showConfirm(
        $scope,
        "removeConfirmed",
        [data.id],
        null,
        "Remove",
        "Deleted data will not able to recover, are you sure you want to delete this item?"
      );
    };

    $scope.removeConfirmed = async function (dataContentId) {
      $rootScope.isBusy = true;
      var result = await service.delete([dataContentId]);
      if (result.success) {
        if ($scope.removeCallback) {
          $rootScope.executeFunctionByName(
            "removeCallback",
            $scope.removeCallbackArgs,
            $scope
          );
        }
        $scope.getList();
      } else {
        $rootScope.showErrors(result.errors);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };

    $scope.saveOthers = async function () {
      var response = await service.saveList($scope.others);
      if (response.success) {
        $scope.getList();
        $scope.$apply();
      } else {
        $rootScope.showErrors(response.errors);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
  },
]);

sharedComponents.component("mixDatabaseDataValuePreview", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-database-data-value-preview/view.html",
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;
      ctrl.$onInit = function () {
        if (ctrl.data.column && ctrl.data.column.isEncrypt) {
          var encryptedData = {
            key: ctrl.data.encryptKey,
            data: ctrl.data.encryptValue,
          };
          ctrl.data.stringValue = $rootScope.decrypt(encryptedData);
        }
      };
    },
  ],
  bindings: {
    data: "=",
    width: "=",
  },
});

sharedComponents.component("mixDatabaseFormWeb", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-database-form-web/view.html",
  bindings: {
    mixDatabaseId: "=",
    mixDatabaseName: "=",
    mixDatabaseDataId: "=?",
    mixDatabaseData: "=?",
    parentType: "=?",
    parentId: "=?",
    defaultId: "=",
    saveData: "&?",
  },
  controller: [
    "$rootScope",
    "$scope",
    "RestMixDatabasePortalService",
    function ($rootScope, $scope, service) {
      var ctrl = this;
      ctrl.isBusy = false;
      ctrl.attributes = [];
      ctrl.defaultData = null;
      ctrl.selectedProp = null;
      ctrl.mixConfigurations = $rootScope.globalSettings;
      ctrl.$onInit = async function () {
        ctrl.defaultData = await service.getSingle("web", [
          ctrl.defaultId,
          ctrl.mixDatabaseId,
          ctrl.mixDatabaseName,
        ]);
        ctrl.loadData();
      };
      ctrl.loadData = async function () {
        /*
                    If input is data id => load ctrl.mixDatabaseData from service and handle it independently
                    Else modify input ctrl.mixDatabaseData
                */
        $rootScope.isBusy = true;
        if (ctrl.mixDatabaseDataId) {
          ctrl.mixDatabaseData = await service.getSingle("portal", [
            ctrl.mixDatabaseDataId,
            ctrl.mixDatabaseId,
            ctrl.mixDatabaseName,
          ]);
          if (ctrl.mixDatabaseData) {
            ctrl.defaultData.mixDatabaseId = ctrl.mixDatabaseData.mixDatabaseId;
            ctrl.defaultData.mixDatabaseName =
              ctrl.mixDatabaseData.mixDatabaseName;
            $rootScope.isBusy = false;
            $scope.$apply();
          } else {
            if (ctrl.mixDatabaseData) {
              $rootScope.showErrors("Failed");
            }
            $rootScope.isBusy = false;
            $scope.$apply();
          }
        } else {
          if (!ctrl.mixDatabaseData) {
            ctrl.mixDatabaseData = angular.copy(ctrl.defaultData);
          }
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      };
      ctrl.reload = async function () {
        ctrl.mixDatabaseData = angular.copy(ctrl.defaultData);
      };
      ctrl.submit = async function () {
        angular.forEach(ctrl.mixDatabaseData.values, function (e) {
          //Encrypt column before send
          if (e.column.isEncrypt) {
            var encryptData = $rootScope.encrypt(e.stringValue);
            e.encryptKey = encryptData.key;
            e.encryptValue = encryptData.data;
            e.stringValue = null;
          }
        });
        if (ctrl.saveData) {
          ctrl.isBusy = true;
          var result = await ctrl.saveData({ data: ctrl.mixDatabaseData });
          if (result && result.success) {
            ctrl.isBusy = false;
            ctrl.mixDatabaseData = result.data;
            $scope.$apply();
          } else {
            ctrl.isBusy = false;
            // ctrl.mixDatabaseData = await service.getSingle('portal', [ctrl.defaultId, ctrl.mixDatabaseId, ctrl.mixDatabaseName]);
            $scope.$apply();
          }
        } else {
          ctrl.isBusy = true;
          var saveResult = await service.save(ctrl.mixDatabaseData);
          if (saveResult.success) {
            ctrl.isBusy = false;
          } else {
            ctrl.isBusy = false;
            if (saveResult) {
              $rootScope.showErrors(saveResult.errors);
            }
            $scope.$apply();
          }
        }
      };

      ctrl.filterData = function (attributeName) {
        if (ctrl.mixDatabaseData) {
          var attr = $rootScope.findObjectByKey(
            ctrl.mixDatabaseData.data,
            "mixDatabaseColumnName",
            attributeName
          );
          if (!attr) {
            attr = angular.copy(
              $rootScope.findObjectByKey(
                ctrl.defaultData.data,
                "mixDatabaseColumnName",
                attributeName
              )
            );
            ctrl.mixDatabaseData.data.push(attr);
          }
          return attr;
        }
      };
    },
  ],
});

sharedComponents.component("mixDateEditor", {
  templateUrl: "/mix-app/views/app-shared/components/mix-date-editor/view.html",
  bindings: {
    utcDate: "=",
    isReadonly: "=?",
  },
  controller: [
    "$filter",
    function ($filter) {
      var ctrl = this;
      ctrl.$onInit = async function () {
        ctrl.readonly = ctrl.isReadonly === "true";
        if (ctrl.utcDate) {
          let local = $filter("utcToLocal")(ctrl.utcDate, "yyyy-MM-ddTHH:mm");
          ctrl.local = new Date(local);
        }
      };
      ctrl.update = function () {
        ctrl.utcDate = ctrl.local.toISOString();
      };
    },
  ],
});

sharedComponents.component("mixLoader", {
  templateUrl: "/mix-app/views/app-shared/components/mix-loader/view.html",
  controller: [
    "$rootScope",
    "$location",
    function ($rootScope, $location) {
      var ctrl = this;
      ctrl.imageDataArray = [];
      ctrl.canvasCount = 10;
      ctrl.duration = 500;
      ctrl.bgDuration = 2500;
      ctrl.canvas = null;
      ctrl.init = function () {
        html2canvas($(".mix-loader-container .content")[0]).then((canvas) => {
          ctrl.canvas = canvas;
        });
      };
      ctrl.swap = function () {
        var temp = document.createElement("canvas");
        var buffer = temp.getContext("2d");
        var scale = 0.5;
        //capture all div data as image
        // ctx = ctrl.canvas.getContext("2d");
        temp.width = ctrl.canvas.width * scale;
        temp.height = ctrl.canvas.height * scale;
        buffer.drawImage(
          ctrl.canvas,
          0,
          0,
          ctrl.canvas.width * scale,
          ctrl.canvas.height * scale
        );
        var imageData = buffer.getImageData(0, 0, temp.width, temp.height);
        var pixelArr = imageData.data;
        ctrl.createBlankImageData(imageData);
        //put pixel info to ctrl.imageDataArray (Weighted Distributed)
        for (let i = 0; i < pixelArr.length; i += 4) {
          //find the highest probability canvas the pixel should be in
          let p = Math.floor((i / pixelArr.length) * ctrl.canvasCount);
          let a = ctrl.imageDataArray[ctrl.weightedRandomDistrib(p)];
          a[i] = pixelArr[i];
          a[i + 1] = pixelArr[i + 1];
          a[i + 2] = pixelArr[i + 2];
          a[i + 3] = pixelArr[i + 3];
        }
        //create canvas for each imageData and append to target element
        for (let i = 0; i < ctrl.canvasCount; i++) {
          let c = ctrl.newCanvasFromImageData(
            ctrl.imageDataArray[i],
            temp.width,
            temp.height
          );
          c.classList.add("dust");
          $(".mix-loader-container").append(c);
        }
        //clear all children except the canvas
        $(".mix-loader-container .content")
          .children()
          .not(".dust")
          .fadeOut(ctrl.bgDuration);
        //apply animation
        $(".dust").each(function (index) {
          ctrl.animateBlur($(this), 0.8, ctrl.duration);
          setTimeout(() => {
            ctrl.animateTransform(
              $(this),
              100,
              -100,
              chance.integer({ min: -15, max: 15 }),
              ctrl.duration + 110 * index
            );
          }, 70 * index);
          //remove the canvas from DOM tree when faded
          $(this)
            .delay(70 * index)
            .fadeOut(110 * index + ctrl.duration, "swing", () => {
              $(this).remove();
            });
        });
      };
      ctrl.weightedRandomDistrib = function (peak) {
        var prob = [],
          seq = [];
        for (let i = 0; i < ctrl.canvasCount; i++) {
          prob.push(Math.pow(ctrl.canvasCount - Math.abs(peak - i), 3));
          seq.push(i);
        }
        return chance.weighted(seq, prob);
      };
      ctrl.animateBlur = function (elem, radius, duration) {
        var r = 0;
        $({ rad: 0 }).animate(
          { rad: radius },
          {
            duration: duration,
            easing: "swing",
            step: function (now) {
              elem.css({
                filter: "blur(" + now + "px)",
              });
            },
          }
        );
      };
      ctrl.animateTransform = function (elem, sx, sy, angle, duration) {
        var td = (tx = ty = 0);
        $({ x: 0, y: 0, deg: 0 }).animate(
          { x: sx, y: sy, deg: angle },
          {
            duration: duration,
            easing: "swing",
            step: function (now, fx) {
              if (fx.prop == "x") tx = now;
              else if (fx.prop == "y") ty = now;
              else if (fx.prop == "deg") td = now;
              elem.css({
                transform:
                  "rotate(" +
                  td +
                  "deg)" +
                  "translate(" +
                  tx +
                  "px," +
                  ty +
                  "px)",
              });
            },
          }
        );
      };
      ctrl.createBlankImageData = function (imageData) {
        for (let i = 0; i < ctrl.canvasCount; i++) {
          let arr = new Uint8ClampedArray(imageData.data);
          for (let j = 0; j < arr.length; j++) {
            arr[j] = 0;
          }
          ctrl.imageDataArray.push(arr);
        }
      };
      ctrl.newCanvasFromImageData = function (imageDataArray, w, h) {
        var canvas = document.createElement("canvas");
        canvas.width = w;
        canvas.height = h;
        tempCtx = canvas.getContext("2d");
        tempCtx.putImageData(new ImageData(imageDataArray, w, h), 0, 0);

        return canvas;
      };
    },
  ],

  bindings: {
    isShow: "=",
  },
});

sharedComponents.component("mixModuleDataTable", {
  templateUrl:
    "/mix-app/views/app-shared/components/mix-module-data-table/mix-module-data-table.html",
  controller: [
    "$rootScope",
    "$scope",
    "$location",
    "ngAppSettings",
    "SharedModuleDataService",
    function ($rootScope, $scope, $location, ngAppSettings, dataService) {
      var ctrl = this;
      ctrl.colWidth = 3;
      ctrl.init = function () {
        ctrl.editUrl = "/admin/module-data/details/" + ctrl.moduleContentId;
        ctrl.visible = $rootScope.visible;
        if (ctrl.data.items.length) {
          ctrl.min = ctrl.data.items[0].priority;
          if (!ctrl.min) {
            ctrl.min = 0;
          }
        }
        ctrl.colWidth = parseInt(9 / ctrl.columns.length);
        ctrl.lastColWidth = 9 % ctrl.columns.length > 0 ? 2 : 1;
      };
      ctrl.translate = $rootScope.translate;
      ctrl.selected = null;
      ctrl.updateOrders = function (index, items) {
        items.splice(index, 1);
        for (var i = 0; i < items.length; i++) {
          items[i].priority = ctrl.min + i;
        }
        ctrl.updateDataInfos(items);
      };
      ctrl.updateDataInfos = async function (items) {
        $rootScope.isBusy = true;
        var resp = await dataService.updateInfos(items);
        if (resp && resp.success) {
          $scope.activedPage = resp.data;
          $rootScope.showMessage("success", "success");
          $rootScope.isBusy = false;
          $scope.$apply();
        } else {
          if (resp) {
            $rootScope.showErrors(resp.errors);
          }
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      };
      ctrl.dragoverCallback = function (index, item, external, type) {
        //console.log('drop ', index, item, external, type);
      };
      ctrl.insertCallback = function (index, item, external, type) {
        //console.log('insert ', index, item, external, type);
      };
      ctrl.delete = function (id) {
        ctrl.onDelete({ id: id });
      };
      ctrl.goTo = function (id) {
        $location.path(ctrl.editUrl + "/" + id);
      };
      ctrl.toggleChildNavs = function (nav) {
        nav.showChildNavs = nav.childNavs.length > 0 && !nav.showChildNavs;
      };
      ctrl.view = function (contentId) {
        var obj = {
          id: contentId,
        };
        $rootScope.preview("module-data", obj, null, "modal-lg");
      };
    },
  ],
  bindings: {
    moduleContentId: "=",
    data: "=",
    childName: "=",
    canDrag: "=",
    editUrl: "=",
    columns: "=",
    onDelete: "&",
    // onUpdateInfos: '&',
    onUpdateChildInfos: "&",
  },
});

sharedComponents.component("mixSelect", {
  templateUrl: "/mix-app/views/app-shared/components/mix-select/view.html",
  bindings: {
    options: "=",
    model: "=",
    allowNull: "=?",
    callback: "&?",
  },
  controller: [
    "$rootScope",
    "$scope",
    function PortalTemplateController($rootScope, $scope) {
      var ctrl = this;
      ctrl.onSelect = function () {
        if (ctrl.callback) {
          ctrl.callback({ type: ctrl.model });
        }
      };
    },
  ],
});

// sharedComponents.component('modalConfirm', {
//     templateUrl: '/mix-app/views/app-shared/components/modal-confirm/modal-confirm.html',
//     controller: ModalConfirmController,
//     bindings: {
//         message: '='
//     }
// });
function ModalConfirmController($rootScope, $scope, $mdDialog, message) {
  $scope.message = message;
  $scope.executeFunctionByName = async function (functionName, args, context) {
    var result = await $rootScope.executeFunctionByName(
      functionName,
      args,
      context
    );
    if (result) {
      $scope.$apply();
    }
    $mdDialog.hide();
  };
  $scope.closeDialog = function () {
    $mdDialog.hide();
  };
}

"use strict";
appShared.controller("ModalPostController", [
  "$scope",
  "$rootScope",
  "$location",
  "ngAppSettings",
  "$routeParams",
  "PostRestService",
  function (
    $scope,
    $rootScope,
    $location,
    ngAppSettings,
    $routeParams,
    service
  ) {
    BaseCtrl.call(
      this,
      $scope,
      $rootScope,
      $routeParams,
      ngAppSettings,
      service
    );
    $scope.columns = [
      {
        title: "Title",
        name: "title",
        filter: true,
        type: "string",
      },
      {
        title: "Url",
        name: "imageUrl",
        filter: true,
        type: "upload",
      },
    ];
  },
]);

"use strict";
appShared.factory("ModalPostRestService", [
  "$rootScope",
  "ApiService",
  "CommonService",
  "BaseService",
  function ($rootScope, apiService, commonService, baseService) {
    var serviceFactory = Object.create(baseService);
    serviceFactory.init("page-post");
    return serviceFactory;
  },
]);

sharedComponents.component("modalPosts", {
  templateUrl:
    "/mix-app/views/app-shared/components/modal-posts/modal-posts.html",
  controller: "ModalPostController",
  bindings: {
    data: "=",
    childName: "=",
    canDrag: "=",
    editUrl: "=",
    columns: "=",
    onDelete: "&",
    onUpdateInfos: "&",
    onUpdateChildInfos: "&",
  },
});

sharedComponents.controller(
  "ModalCroppieController",
  function (
    $rootScope,
    $scope,
    $http,
    $uibModalInstance,
    mediaService,
    file,
    w,
    h,
    rto,
    autoSave
  ) {
    var ctrl = this;
    ctrl.autoSave = autoSave;
    ctrl.maxW = 400;
    ctrl.file = file;
    ctrl.w = w;
    ctrl.h = h;
    ctrl.rto = rto;
    ctrl.isAdmin = $rootScope.isAdmin;
    ctrl.postedFile = {};
    ctrl.isImage = false;
    ctrl.mediaNavs = [];
    ctrl.media = {
      title: "",
      mediaFile: {},
    };
    ctrl.image_placeholder = "/mix-app/assets/img/image_placeholder.jpg";
    ctrl.options = null;
    ctrl.init = function () {
      ctrl.srcUrl = ctrl.srcUrl || ctrl.image_placeholder;
      ctrl.maxHeight = ctrl.maxHeight || "2000px";
      ctrl.id = Math.floor(Math.random() * 100);
      ctrl.canvas = document.getElementById(`canvas-${ctrl.id}`);
      ctrl.cropped = {
        source: null,
      };
      if (ctrl.frameUrl) {
        ctrl.frame = ctrl.loadImage(frameUrl);
      }

      if (ctrl.srcUrl) {
        ctrl.loadBase64(ctrl.srcUrl);
      }

      if (ctrl.file) {
        setTimeout(() => {
          ctrl.selectFile([ctrl.file]);
        }, 500);
      }

      // Assign blob to component when selecting a image
    };

    ctrl.loadFromUrl = function () {
      if (ctrl.src !== ctrl.srcUrl && ctrl.srcUrl != ctrl.image_placeholder) {
        ctrl.src = ctrl.srcUrl;
        ctrl.isImage = ctrl.srcUrl
          .toLowerCase()
          .match(/([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|svg)/g);
        if (ctrl.isImage) {
          ctrl.loadBase64(ctrl.srcUrl);
        }
      }
    };

    ctrl.origin = function () {
      $uibModalInstance.close();
    };

    ctrl.ok = async function () {
      if (!ctrl.autoSave) {
        $uibModalInstance.close(ctrl.cropped.image);
      } else {
        // ctrl.media.fileFolder = ctrl.folder || "Media";
        // ctrl.media.fileName = ctrl.media.mediaFile.fileName;
        // ctrl.media.extension = ctrl.media.mediaFile.extension;
        ctrl.media.mediaFile.fileStream = ctrl.cropped.image;
        ctrl.media.mediaFile.folderName = ctrl.folder || "Media";
        var result = await mediaService.saveFileStream(ctrl.media.mediaFile);
        if (result.success) {
          $uibModalInstance.close(result.data);
        }
      }
    };

    ctrl.cancel = function () {
      $uibModalInstance.dismiss("cancel");
    };
    ctrl.combineImage = function () {
      ctrl.canvas = document.getElementById(`canvas-${ctrl.id}`);
      if (ctrl.canvas) {
        var img = document.getElementById("croppie-src");
        var w = ctrl.options.boundary.width;
        var h = ctrl.options.boundary.height;
        // var rto = w / h;
        var newW = ctrl.options.output.width;
        var newH = ctrl.options.output.height;
        var ctx = ctrl.canvas.getContext("2d");
        ctx.imageSmoothingEnabled = true;
        ctx.drawImage(img, 0, 0, newW, newH);
        if (ctrl.frame) {
          // combine with frame
          ctx.drawImage(ctrl.frame, 0, 0, w, h);
        }

        $scope.$apply(function () {
          ctrl.postedFile.fileStream = ctrl.canvas.toDataURL(); //ctx.getImageData(0, 0, 300, 350);
          ctrl.imgUrl = ctrl.postedFile.fileStream.replace(
            "image/png",
            "image/octet-stream"
          );
        });
      }
    };
    ctrl.saveCanvas = function () {
      var link = document.createElement("a");
      link.download = ctrl.postedFile.fileName + ctrl.postedFile.extension;
      $rootScope.isBusy = true;
      ctrl.canvas.toBlob(function (blob) {
        link.href = URL.createObjectURL(blob);
        link.click();
        $rootScope.isBusy = false;
        $scope.$apply();
      }, "image/png");
    };
    ctrl._arrayBufferToBase64 = function (buffer) {
      var binary = "";
      var bytes = new Uint8Array(buffer);
      var len = bytes.byteLength;
      for (var i = 0; i < len; i++) {
        binary += String.fromCharCode(bytes[i]);
      }
      return window.btoa(binary);
    };

    ctrl.selectFile = function (files) {
      if (files !== undefined && files !== null && files.length > 0) {
        const file = files[0];
        ctrl.media.folder = ctrl.folder ? ctrl.folder : "Media";
        ctrl.media.title = ctrl.title ? ctrl.title : file.name;
        ctrl.media.description = ctrl.description ? ctrl.description : "";
        ctrl.media.mediaFile.fileName = file.name.substring(
          0,
          file.name.lastIndexOf(".")
        );
        ctrl.media.mediaFile.extension = file.name.substring(
          file.name.lastIndexOf(".")
        );
        ctrl.getBase64(file);
        // if (file.size < 100000) {
        //   var msg = "Please choose a better photo (larger than 100kb)!";
        //   $rootScope.showConfirm(ctrl, null, [], null, null, msg);
        // } else {
        // }
      }
    };
    ctrl.loadBase64 = function (url) {
      var ext = url.substring(url.lastIndexOf(".") + 1);
      $http({
        method: "GET",
        url: url,
        responseType: "arraybuffer",
      }).then(function (resp) {
        var base64 = `data:image/${ext};base64,${ctrl._arrayBufferToBase64(
          resp.data
        )}`;
        var image = new Image();
        image.src = base64;
        image.onload = function () {
          // access image size here
          ctrl.originW = this.width;
          ctrl.originH = this.height;

          ctrl.loadImageSize(this.width, this.height);
          ctrl.cropped.source = base64;
          $scope.$apply();
        };
        return base64;
      });
    };
    ctrl.getBase64 = function (file) {
      if (file !== null) {
        $rootScope.isBusy = true;
        var reader = new FileReader();
        reader.readAsDataURL(file);
        // ctrl.cropped.source = null;
        reader.onload = function () {
          if (ctrl.media.mediaFile) {
            ctrl.media.mediaFile.fileName = file.name.substring(
              0,
              file.name.lastIndexOf(".")
            );
            ctrl.media.mediaFile.extension = file.name.substring(
              file.name.lastIndexOf(".")
            );
            // ctrl.postedFile.fileStream = reader.result;
          }
          var image = new Image();
          image.src = reader.result;

          image.onload = function () {
            // access image size here
            ctrl.originW = this.width;
            ctrl.originH = this.height;
            ctrl.loadImageSize(this.width, this.height);
            ctrl.cropped.source = reader.result;
            $rootScope.isBusy = false;
            $scope.$apply();
          };
        };
        reader.onerror = function (error) {
          $rootScope.isBusy = false;
          $rootScope.showErrors([error]);
        };
      } else {
        return null;
      }
    };
    ctrl.loadImageSize = function (w, h) {
      // const maxW = ctrl.w + 100;
      w = w || ctrl.originW;
      h = h || ctrl.originH;
      var rto = w / h;
      ctrl.rto = ctrl.rto || rto;
      ctrl.w = ctrl.w || w;
      ctrl.h = ctrl.w / ctrl.rto;
      ctrl.options = {
        boundary: { height: ctrl.maxW / rto, width: ctrl.maxW },
        render: { height: ctrl.maxW / rto, width: ctrl.maxW },
        output: { height: ctrl.h, width: ctrl.h * ctrl.rto },
      };
      ctrl.loadViewport();
    };
    ctrl.loadViewport = function () {
      if (ctrl.w && ctrl.h) {
        ctrl.rto = ctrl.w / ctrl.h;
        let w = ctrl.w > ctrl.maxW ? ctrl.maxW * 0.6 : ctrl.w * 0.6;
        let h = w / ctrl.rto;
        if (w > ctrl.options.boundary.width) {
          w = ctrl.options.boundary.width;
          h = w / ctrl.rto;
        }
        ctrl.options.viewport = {
          height: h,
          width: w,
        };
      }
    };
  }
);

"use strict";
appShared.controller("SharedModuleDataController", [
  "$scope",
  "$rootScope",
  "ngAppSettings",
  "$routeParams",
  "$timeout",
  "$location",
  "AuthService",
  "SharedModuleDataService",
  function (
    $scope,
    $rootScope,
    ngAppSettings,
    $routeParams,
    $timeout,
    $location,
    authService,
    moduleDataService
  ) {
    $scope.request = {
      pageSize: "10",
      pageIndex: 0,
      status: "Published",
      orderBy: "CreatedDateTime",
      direction: "Desc",
      fromDate: null,
      toDate: null,
      keyword: "",
    };
    $scope.moduleDataFile = {
      file: null,
      fullPath: "",
      folder: "ModuleData",
      title: "",
      description: "",
    };
    $scope.activedModuleData = null;
    $scope.relatedModuleDatas = [];
    $rootScope.isBusy = false;
    $scope.data = {
      pageIndex: 0,
      pageSize: 1,
      totalItems: 0,
    };
    $scope.errors = [];

    $scope.range = function (max) {
      var input = [];
      for (var i = 1; i <= max; i += 1) input.push(i);
      return input;
    };

    $scope.getModuleData = async function (id) {
      $rootScope.isBusy = true;
      var resp = await moduleDataService.getModuleData(id, "portal");
      if (resp && resp.success) {
        $scope.activedModuleData = resp.data;
        $rootScope.initEditor();
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };

    $scope.initModuleForm = async function (name) {
      var resp = null;
      $scope.name = name;
      if ($scope.id) {
        resp = await moduleDataService.getModuleData(
          $scope.id,
          $scope.dataContentId,
          "portal"
        );
      } else {
        resp = await moduleDataService.initModuleForm($scope.name);
      }

      if (resp && resp.success) {
        $scope.activedModuleData = resp.data;
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };

    $scope.loadParams = async function () {
      $scope.dataContentId = $routeParams.id;
      $scope.backUrl =
        "/admin/module-data/list/" + $routeParams.moduleContentId;
      $scope.moduleContentId = $routeParams.moduleContentId;
    };

    $scope.loadModuleData = async function () {
      $rootScope.isBusy = true;
      var moduleContentId = $routeParams.moduleContentId;
      var id = $routeParams.id;
      var response = await moduleDataService.getModuleData(
        moduleContentId,
        id,
        "portal"
      );
      if (response.success) {
        $scope.activedModuleData = response.data;
        $rootScope.initEditor();
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        $rootScope.showErrors(response.errors);
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
    $scope.loadModuleDatas = async function (moduleContentId, pageIndex) {
      $scope.request.key = moduleContentId;
      if (pageIndex !== undefined) {
        $scope.request.pageIndex = pageIndex;
      }
      if ($scope.request.fromDate !== null) {
        var d = new Date($scope.request.fromDate);
        $scope.request.fromDate = d.toISOString();
      }
      if ($scope.request.toDate !== null) {
        var d = new Date($scope.request.toDate);
        $scope.request.toDate = d.toISOString();
      }
      var resp = await moduleDataService.getModuleDatas($scope.request);
      if (resp && resp.success) {
        $scope.data = resp.data;
        $rootScope.isBusy = false;
        $scope.$apply();
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };

    $scope.removeModuleData = async function (id) {
      if (confirm("Are you sure!")) {
        var resp = await moduleDataService.removeModuleData(id);
        if (resp && resp.success) {
          $scope.loadModuleDatas();
        } else {
          if (resp) {
            $rootScope.showErrors(resp.errors);
          }
        }
      }
    };

    $scope.saveModuleData = async function () {
      var resp = await moduleDataService.saveModuleData(
        $scope.activedModuleData
      );
      if (resp && resp.success) {
        $scope.activedModuleData = resp.data;
        $rootScope.showMessage("Update successfully!", "success");
        $rootScope.isBusy = false;
        $scope.initModuleForm($scope.name);
        $rootScope.isBusy = false;
        $scope.$apply();
        //$location.path('/admin/moduleData/details/' + resp.data.id);
      } else {
        if (resp) {
          $rootScope.showErrors(resp.errors);
        }
        $rootScope.isBusy = false;
        $scope.$apply();
      }
    };
  },
]);

"use strict";
appShared.factory("SharedModuleDataService", [
  "$http",
  "$rootScope",
  "ApiService",
  "CommonService",
  function ($http, $rootScope, apiService, commonService) {
    var moduleDatasServiceFactory = {};

    var _updateInfos = async function (pages) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data";
      var req = {
        method: "POST",
        url: apiUrl + "/update-infos",
        data: JSON.stringify(pages),
      };
      return await apiService.sendRequest(req);
    };

    var _getModuleData = async function (moduleContentId, id, type) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var url = apiUrl + "details/" + type;
      if (id) {
        url += "/" + moduleContentId + "/" + id;
      } else {
        url += "/" + moduleContentId;
      }
      var req = {
        method: "GET",
        url: url,
      };
      return await apiService.sendRequest(req);
    };

    var _getModuleDatas = async function (request) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var req = {
        method: "POST",
        url: apiUrl + "list",
        data: JSON.stringify(request),
      };

      return await apiService.sendRequest(req);
    };

    var _exportModuleData = async function (request) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var req = {
        method: "POST",
        url: apiUrl + "export",
        data: JSON.stringify(request),
      };

      return await apiService.sendRequest(req);
    };

    var _initModuleForm = async function (name) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var req = {
        method: "GET",
        url: apiUrl + "init-by-name/" + name,
      };

      return await apiService.sendRequest(req);
    };

    var _removeModuleData = async function (id) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var req = {
        method: "GET",
        url: apiUrl + "delete/" + id,
      };
      return await apiService.sendRequest(req);
    };

    var _saveModuleData = async function (moduleData) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var req = {
        method: "POST",
        url: apiUrl + "save",
        data: JSON.stringify(moduleData),
      };
      return await apiService.sendRequest(req);
    };
    var _saveFields = async function (id, propertyName, propertyValue) {
      var apiUrl = "/" + $rootScope.mixConfigurations.lang + "/module-data/";
      var column = [
        {
          propertyName: propertyName,
          propertyValue: propertyValue,
        },
      ];
      var req = {
        method: "POST",
        url: apiUrl + "save/" + id,
        data: JSON.stringify(column),
      };
      return await apiService.sendRequest(req);
    };
    moduleDatasServiceFactory.getModuleData = _getModuleData;
    moduleDatasServiceFactory.getModuleDatas = _getModuleDatas;
    moduleDatasServiceFactory.exportModuleData = _exportModuleData;
    moduleDatasServiceFactory.removeModuleData = _removeModuleData;
    moduleDatasServiceFactory.saveModuleData = _saveModuleData;
    moduleDatasServiceFactory.initModuleForm = _initModuleForm;
    moduleDatasServiceFactory.saveFields = _saveFields;
    moduleDatasServiceFactory.updateInfos = _updateInfos;
    return moduleDatasServiceFactory;
  },
]);

sharedComponents.component("moduleDataPreview", {
  templateUrl:
    "/mix-app/views/app-shared/components/module-data-preview/module-data-preview.html",
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;

      ctrl.translate = $rootScope.translate;
      ctrl.$onInit = () => {
        if (!ctrl.datatype) {
          ctrl.datatype = ctrl.data.dataType;
        }
      };
    },
  ],
  bindings: {
    data: "=",
    datatype: "=?",
    width: "=",
    header: "=",
  },
});

sharedComponents.component("moduleForm", {
  templateUrl: "/mix-app/views/app-shared/components/module-form/view.html",
  bindings: {
    moduleContentId: "=",
    categoryId: "=",
    productId: "=",
    postId: "=",
    d: "=",
    title: "=",
    name: "=",
    submitText: "=",
    isShowTitle: "=",
    backUrl: "=?",
    saveCallback: "&?",
    failedCallback: "&?",
  },
  controller: [
    "$scope",
    "$rootScope",
    "ngAppSettings",
    "$routeParams",
    "$timeout",
    "$location",
    "AuthService",
    "ModuleDataRestService",
    function (
      $scope,
      $rootScope,
      ngAppSettings,
      $routeParams,
      $timeout,
      $location,
      authService,
      moduleDataService
    ) {
      var ctrl = this;
      $rootScope.isBusy = false;

      ctrl.initModuleForm = async function () {
        var resp = null;
        if (!$rootScope.isInit) {
          setTimeout(function () {
            ctrl.initModuleForm();
          }, 500);
        } else {
          if (!ctrl.moduleContentId) {
            resp = await moduleDataService.initModuleForm(ctrl.name);
          } else {
            if (ctrl.d) {
              resp = await moduleDataService.getSingle([ctrl.d]);
            } else {
              resp = await moduleDataService.initForm(ctrl.moduleContentId);
            }
          }
          if (resp && resp.success) {
            ctrl.data = resp.data;
            ctrl.data.postId = ctrl.postId;
            ctrl.data.productId = ctrl.productId;
            ctrl.data.categoryId = ctrl.categoryId;
            angular.forEach(ctrl.data.dataProperties, function (e) {
              if (!ctrl.data.jItem[e.name]) {
                ctrl.data.jItem[e.name] = {
                  dataType: e.dataType,
                  value: null,
                };
              }
            });

            $rootScope.isBusy = false;
            $scope.$apply();
          } else {
            if (resp) {
              $rootScope.showErrors(resp.errors);
            }
            $rootScope.isBusy = false;
            $scope.$apply();
          }
        }
      };

      ctrl.loadModuleData = async function () {
        $rootScope.isBusy = true;
        var id = $routeParams.id;
        var response = await moduleDataService.getModuleData(
          ctrl.moduleContentId,
          ctrl.d,
          "portal"
        );
        if (response.success) {
          ctrl.data = response.data;
          //$rootScope.initEditor();
          $rootScope.isBusy = false;
          $scope.$apply();
        } else {
          $rootScope.showErrors(response.errors);
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      };
      ctrl.submitFormData = async function () {
        if ($(".g-recaptcha").length > 0) {
        } else {
          ctrl.saveModuleData();
        }
      };
      ctrl.saveModuleData = async function () {
        $rootScope.isBusy = true;
        var form = $("#module-" + ctrl.data.moduleContentId);
        console.log(ctrl.data);
        $.each(ctrl.data.dataProperties, function (i, e) {
          switch (e.dataType) {
            case 5:
              e.value = $(form)
                .find("." + e.name)
                .val();
              break;
            default:
              e.value = e.value ? e.value.toString() : null;
              break;
          }
        });
        var resp = await moduleDataService.save(ctrl.data);
        if (resp && resp.success) {
          ctrl.data = resp.data;
          if (ctrl.saveSuccessCallback) {
            ctrl.saveSuccessCallback({
              data: ctrl.data,
            });
            $rootScope.isBusy = false;
            $scope.$apply();
          } else {
            var msg = $rootScope.translate("success");
            $rootScope.showMessage(msg, "success");
            // ctrl.initModuleForm();
            $rootScope.isBusy = false;
            $scope.$apply();
          }
        } else {
          if (resp) {
            // if(ctrl.failedCallback){
            //     ctrl.failedCallback({ response: resp });
            // }
            // else{
            //     $rootScope.showErrors(resp.errors);
            // }
            $rootScope.showErrors(resp.errors);
          }

          $rootScope.isBusy = false;
          $scope.$apply();
        }
      };
    },
  ],
});

sharedComponents.component("moduleFormEditor", {
  templateUrl:
    "/mix-app/views/app-shared/components/module-form-editor/view.html",
  bindings: {
    data: "=",
    datatype: "=?",
    column: "=?",
    inputClass: "=",
    isShowTitle: "=",
    columnTitle: "=",
  },
  controller: [
    "$rootScope",
    "$scope",
    "$filter",
    "ngAppSettings",
    function ($rootScope, $scope, $filter, ngAppSettings) {
      var ctrl = this;
      ctrl.icons = ngAppSettings.icons;
      this.dataTypes = ngAppSettings.dataTypes;
      ctrl.$onInit = function () {
        ctrl.dataType = ctrl.datatype
          ? ctrl.datatype.toLowerCase()
          : ctrl.data.dataType.toLowerCase();
        ctrl.obj = null;
        switch (ctrl.dataType) {
          case "datetime":
          case "date":
          case "time":
            if (ctrl.data.value) {
              ctrl.obj = new Date(ctrl.data.value);
            }
            break;
          case "boolean":
            ctrl.obj = String(ctrl.data.value) == "true";
            break;
          default:
            if (ctrl.column && !ctrl.data.value) {
              ctrl.data.value = ctrl.column.defaultValue;
              ctrl.obj = ctrl.column.defaultValue;
            }
            break;
        }
      };
      ctrl.updateValue = function () {
        switch (ctrl.dataType) {
          case "datetime":
            if (ctrl.obj) {
              ctrl.data.value = ctrl.obj.toLocaleString();
            }
            break;
          case "date":
            if (ctrl.obj) {
              ctrl.data.value = ctrl.obj.toLocaleDateString();
            }
            break;
          case "time":
            if (ctrl.obj) {
              ctrl.data.value = ctrl.obj.toLocaleTimeString("en-GB");
            }
            break;

          case "boolean":
            ctrl.data.value = ctrl.obj.toString().toLowerCase();
            break;
          default:
            ctrl.data.value = ctrl.obj;
            break;
        }
        console.log(ctrl.data.value);
      };
    },
  ],
});

sharedComponents.component("modulePreview", {
  templateUrl: "/mix-app/views/app-shared/components/module-preview/view.html",
  controller: [
    "$scope",
    "$rootScope",
    "ModuleDataRestService",
    function ($scope, $rootScope, moduleDataService) {
      var ctrl = this;
      $rootScope.isBusy = false;
      ctrl.previousContentId = undefined;

      this.$onInit = () => {
        ctrl.previousContentId = angular.copy(ctrl.contentId);
      };

      this.$doCheck = () => {
        if (ctrl.contentId !== ctrl.previousContentId) {
          ctrl.loadModuleData();
          ctrl.previousContentId = ctrl.contentId;
        }
      };

      ctrl.loadModuleData = async function () {
        $rootScope.isBusy = true;
        var response = await moduleDataService.getSingle([ctrl.contentId]);
        if (response.success) {
          ctrl.data = response.data;
          $rootScope.isBusy = false;
          $scope.$apply();
        } else {
          $rootScope.showErrors(response.errors);
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      };
    },
  ],
  bindings: {
    contentId: "=",
  },
});

sharedComponents.component("onePay", {
  templateUrl: "/mix-app/views/app-shared/components/one-pay/view.html",
  bindings: {
    cartData: "=?",
    successCallback: "&?",
  },
  controller: "OnePayShoppingCartController",
});

sharedComponents.controller("OnePayShoppingCartController", [
  "$rootScope",
  "$scope",
  "$controller",
  "localStorageService",
  "RestMixDatabaseDataClientService",
  function ($rootScope, $scope, $controller, localStorageService, dataService) {
    angular.extend(
      this,
      $controller("ShoppingCartController", { $scope: $scope })
    );
    $scope.url = " https://mtf.onepay.vn/onecomm-pay/vpc.op";

    $scope.init = async function (
      validateCallback,
      successCallback,
      failCallback
    ) {
      $scope.validateCallback = validateCallback;
      $scope.successCallback = successCallback;
      $scope.failCallback = failCallback;

      $scope.cartData =
        $scope.cartData || localStorageService.get("shoppingCart");
      $scope.initRequest();
      $scope.initResponse();
    };

    $scope.initRequest = async function () {
      var getRequest = await dataService.initData("onepayRequest");
      $scope.request = getRequest.data;
      $scope.request.obj.vpc_Amount = $scope.cartData.total;
      $scope.request.obj.vpc_ReturnURL = window.top.location.href;
      $scope.request.obj.AgainLink = window.top.location.href;
    };
    $scope.initResponse = async function () {
      var getResponse = await dataService.initData("onepayResponse");
      $scope.response = getResponse.data.obj;
    };
    $scope.onSuccess = async function (resp) {
      $scope.cartData = resp;
      localStorageService.set("shoppingCart", $scope.cartData);

      $scope.request.obj.vpc_MerchTxnRef = resp.id;
      $scope.request.obj.vpc_OrderInfo = resp.id;
      $scope.request.obj.Title = `Order ${$scope.cartData.name}`;
      dataService.save($scope.request);

      $scope.url = `${$scope.url}?${dataService.parseQuery(
        $scope.request.obj
      )}`;
      window.top.location = $scope.url;
    };
    $scope.paymentSuccess = async function (resp) {
      await dataService.saveValues($scope.cartData.id, { status: "Paid" });

      if ($scope.successCallback) {
        $rootScope.executeFunctionByName(
          $scope.successCallback,
          [resp],
          window
        );
      } else {
        window.location.href = "/";
      }
    };
  },
]);

sharedComponents.component("mixPaging", {
  templateUrl: "/mix-app/views/app-shared/components/paging/paging.html",
  controller: [
    "$rootScope",
    function ($rootScope) {
      var ctrl = this;
      ctrl.loadData = function (index) {
        ctrl.pagingAction({ pageIndex: index });
      };
      ctrl.range = $rootScope.range;
    },
  ],
  bindings: {
    data: "=",
    activeClass: "=",
    ulClass: "=",
    page: "=",
    pageSize: "=",
    total: "=",
    totalPage: "=",
    pagingAction: "&",
  },
});

sharedComponents.component("payPal", {
  templateUrl: "/mix-app/views/app-shared/components/pay-pal/view.html",
  bindings: {
    cartData: "=?",
    isBusy: "=?",
    onSuccess: "=?", // name of function ex: window.onSuccess => 'onSuccess'
    onFail: "=?", // name of function ex: window.onFail => 'onFail'
  },
  controller: [
    "$rootScope",
    "$scope",
    "localStorageService",
    "RestMixDatabaseDataClientService",
    function ($rootScope, $scope, localStorageService, dataService) {
      var ctrl = this;

      ctrl.init = function () {
        ctrl.cartData =
          ctrl.cartData || localStorageService.get("shoppingCart");
        let total = Math.round(ctrl.cartData.total / 23000);
        paypal
          .Buttons({
            createOrder: function (data, actions) {
              // This function sets up the details of the transaction, including the amount and line item details.
              return actions.order.create({
                purchase_units: [
                  {
                    amount: {
                      value: total,
                      currency_code: "USD",
                    },
                  },
                ],
              });
            },
            onApprove: function (data, actions) {
              // This function captures the funds from the transaction.
              var obj = {
                data: data,
              };
              return actions.order.capture().then(async function (details) {
                // This function shows a transaction success message to your buyer.
                obj.details = details;
                ctrl.cartData.status = details.status;
                ctrl.cartData.paypalLogs = [obj];
                ctrl.isBusy = true;
                var saveCart = await dataService.saveData(
                  "shoppingCart",
                  ctrl.cartData,
                  true
                );
                ctrl.isBusy = false;
                $scope.$apply();
                if (saveCart.success) {
                  localStorageService.set("shoppingCart", null);
                  if (ctrl.onSuccess && ctrl.cartData.status === "COMPLETED") {
                    $rootScope.executeFunctionByName(
                      ctrl.onSuccess,
                      [ctrl.cartData],
                      window
                    );
                  }
                } else {
                  if (ctrl.onFail && ctrl.cartData.status === "COMPLETED") {
                    $rootScope.executeFunctionByName(
                      ctrl.onFail,
                      [ctrl.cartData],
                      window
                    );
                  }
                }

                // dataService.saveData("paypal", obj);
              });
            },
          })
          .render("#paypal-button-container");
        //This function displays Smart Payment Buttons on your web page.
      };
    },
  ],
});

"use trick";
sharedComponents.directive("pill", function () {
  return {
    require: "^pills",
    restrict: "E",
    transclude: true,
    scope: { header: "@", id: "@", icon: "@" },
    link: function (scope, element, attrs, tabsController) {
      tabsController.addPane(scope);
    },
    template:
      '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
      "</div>",
    replace: true,
  };
});

sharedComponents.directive("pills", function () {
  return {
    restrict: "E",
    transclude: true,
    scope: {
      selectCallback: "&",
    },
    controller: function ($scope, $element) {
      var panes = ($scope.panes = []);

      $scope.select = function (pane) {
        angular.forEach(panes, function (pane) {
          pane.selected = false;
        });
        pane.selected = true;
        this.selectCallback({ pane: pane });
      };

      this.addPane = function (pane) {
        if (panes.length === 0) $scope.select(pane);
        panes.push(pane);
      };
    },
    templateUrl: "/mix-app/views/app-shared/components/pills/pills.html",
    replace: true,
  };
});

sharedComponents.component("portalSearch", {
  templateUrl: "portal-search.html",
  bindings: {
    previewUrl: "=",
    backUrl: "=",
  },
});

sharedComponents.component("previewImage", {
  templateUrl:
    "/mix-app/views/app-shared/components/preview-image/preview-image.html",
  controller: [
    "$rootScope",
    "$scope",
    "ngAppSettings",
    function ($rootScope, $scope) {
      var ctrl = this;
      ctrl.isImage = false;
      ctrl.init = function () {
        if (ctrl.imgSrc) {
          ctrl.imgClass = ctrl.imgClass || "rounded";
          ctrl.isImage = ctrl.imgSrc
            .toLowerCase()
            .match(/([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|svg|webp|jfif)/g);
          // check if facebook avatar Url
          ctrl.isImage =
            ctrl.isImage ||
            ctrl.imgSrc
              .toLowerCase()
              .match(
                /(?:(?:http|https):\/\/)?(?:www.)?(graph.facebook.com)\/([A-Za-z0-9.]{0,})\/(picture)(\?)?([A-Za-z0-9.=&]{0,})?/g
              );
        }
      };
      ctrl.showImage = async function (functionName, args, context) {
        $rootScope.preview("img", ctrl.imgSrc);
      };
    },
  ],
  bindings: {
    imgWidth: "=",
    imgHeight: "=",
    imgSrc: "=",
    imgClass: "=?",
  },
});

sharedComponents.component("qrCode", {
  templateUrl: "/mix-app/views/app-shared/components/qr-code/view.html",
  controller: [
    "$rootScope",
    "$element",
    function ($rootScope, $element) {
      var ctrl = this;

      ctrl.$onInit = function () {
        setTimeout(() => {
          if (ctrl.model) {
            ctrl.generate();
          }
        }, 200);
      };
      ctrl.initOutput = function () {
        ctrl.element = $element[0].querySelector(".qr-output");
        ctrl.generate();
      };
      ctrl.generate = function () {
        $(ctrl.element).empty();
        $(ctrl.element).qrcode(ctrl.model);
      };
      ctrl.download = function () {
        $rootScope.downloadCanvasImage(ctrl.element.querySelector("canvas"));
      };
    },
  ],
  bindings: {
    model: "=",
    viewOnly: "=?",
  },
});

sharedComponents.component("previewPopup", {
  templateUrl:
    "/mix-app/views/app-shared/components/preview-popup/preview-popup.html",
  controller: [
    "$scope",
    "$location",
    function ($scope, $location) {
      var ctrl = this;
      ctrl.$onInit = function () {
        $("#dlg-preview-popup").on("hidden.bs.modal", function (e) {
          ctrl.previewObject.data = null;
          $scope.$apply();
        });
      };
      ctrl.goToLink = async function (link) {
        $("#dlg-preview-popup").modal("hide");
        $location.path(link);
      };
    },
  ],
  bindings: {
    previewObject: "=",
  },
});

sharedComponents.component("quillEditor", {
  templateUrl: "/mix-app/views/app-shared/components/quill-editor/view.html",
  controller: [
    "$rootScope",
    "$scope",
    "$element",
    "ngAppSettings",
    function ($rootScope, $scope, $element, ngAppSettings) {
      var ctrl = this;
      ctrl.previousId = null;
      ctrl.editor = null;
      ctrl.init = function () {
        if (ctrl.content == undefined) {
          ctrl.content = "";
        }
        ctrl.guid = $rootScope.generateUUID();
        setTimeout(() => {
          var toolbarOptions = {
            container: [
              ["bold", "italic", "underline", "strike"], // toggled buttons
              ["blockquote", "image", "link", "code-block"],

              [{ header: 1 }, { header: 2 }], // custom button values
              [{ list: "ordered" }, { list: "bullet" }],
              [{ script: "sub" }, { script: "super" }], // superscript/subscript
              [{ indent: "-1" }, { indent: "+1" }], // outdent/indent
              [{ direction: "rtl" }], // text direction

              [{ size: ["small", false, "large", "huge"] }], // custom dropdown
              [{ header: [1, 2, 3, 4, 5, 6, false] }],

              [{ color: [] }, { background: [] }], // dropdown with defaults from theme
              [{ font: [] }],
              [{ align: [] }],

              ["clean"], // remove formatting button
            ],
            handlers: {
              // handlers object will be merged with default handlers object
              link: function (value) {
                if (value) {
                  var href = prompt("Enter the URL");
                  this.quill.format("link", href);
                } else {
                  this.quill.format("link", false);
                }
              },
              image: function () {
                var range = this.quill.getSelection();
                var value = prompt("Enter the image URL");
                this.quill.insertEmbed(
                  range.index,
                  "image",
                  value,
                  Quill.sources.USER
                );
              },
            },
          };

          ctrl.editor = new Quill("#quill-editor-" + ctrl.guid, {
            modules: {
              toolbar: toolbarOptions,
              imageResize: {},
            },
            placeholder: "Compose an epic...",
            theme: "snow",
          });

          // Init content
          ctrl.editor.clipboard.dangerouslyPasteHTML(0, ctrl.content);

          ctrl.editor.on("text-change", function (delta, oldDelta, source) {
            if (source == "api") {
              console.log("An API call triggered this change.");
            } else if (source == "user") {
              console.log("A user action triggered this change.");
            }
            ctrl.updateContent();
          });
        });
      };
      window.fsClick = function () {
        $(".quill-editor-defaultUI").toggleClass("fs");
      };
      ctrl.updateContent = function () {
        // ctrl.content = JSON.stringify(ctrl.editor.getContents());
        ctrl.content = ctrl.editor.root.innerHTML;
        $scope.$apply();
        // console.log(ctrl.content);
      };
    },
  ],
  bindings: {
    content: "=",
  },
});

sharedComponents.component("recaptcha", {
  templateUrl: "/mix-app/views/app-shared/components/recaptcha/recaptcha.html",
  controller: [
    "$rootScope",
    "ApiService",
    "CommonService",
    function ($rootScope, apiService, commonService) {
      var ctrl = this;
      ctrl.shortenString = "";
      ctrl.previousContentId = undefined;
      ctrl.recaptcha_key = null;
      ctrl.token = null;
      this.$onInit = () => {
        ctrl.recaptcha_key = $rootScope.globalSettings.data.Recaptcha_Key;
        ctrl.recaptcha_secret = $rootScope.globalSettings.data.Recaptcha_Secret;
        grecaptcha.ready(function () {
          grecaptcha
            .execute(ctrl.recaptcha_key, { action: ctrl.action })
            .then(function (token) {
              ctrl.token = token;
            });
        });
      };
      ctrl.verify = function () {
        var url = "https://www.google.com/recaptcha/api/siteverify";
        var data = {
          secret: ctrl.recaptcha_secret,
          response: ctrl.token,
        };
        var req = {
          method: "POST",
          url: url,
          data: data,
        };
        return apiService.sendRequest(req).then(function (response) {
          if (response.success) {
            ctrl.callback();
          } else {
            angular.forEach(response.error - codes, function (err) {
              commonService.showAlertMsg("Recaptcha Error", err);
            });
          }
        });
      };
    },
  ],
  bindings: {
    action: "=",
    callback: "&",
  },
});

sharedComponents.component("serviceHub", {
  templateUrl: "/mix-app/views/app-shared/components/service-hub/view.html",
  bindings: {
    hubName: "=",
  },
  controller: [
    "$rootScope",
    "$scope",
    function ($rootScope, $scope) {
      var ctrl = this;
      var endpoints = JSON.parse(localStorage.getItem("ls.endpoints") || "{}");
      BaseHub.call(this, ctrl, endpoints.Messenger);
      $scope.host = `${$rootScope.globalSettings.domain}/${ctrl.host}`;
      ctrl.user = {
        loggedIn: false,
        connection: {},
      };
      ctrl.isHide = true;
      ctrl.hideContact = true;
      ctrl.members = [];
      ctrl.messages = [];
      ctrl.message = { connection: {}, content: "" };
      ctrl.request = {
        uid: "",
        action: "",
        objectType: null,
        data: {},
        room: "",
        isMyself: false,
      };
      ctrl.loadMsgButton = function () {};
      ctrl.init = function () {
        ctrl.user.connection.name = Math.random() * 100;
        ctrl.user.connection.id = "abc";
        ctrl.user.connection.avatar = "";
        ctrl.startConnection("serviceHub", ctrl.join);
      };
      ctrl.logout = function () {
        FB.logout(function (response) {
          // user is now logged out
          ctrl.user.loggedIn = false;
        });
      };
      ctrl.login = function () {
        FB.login(function (response) {
          if (response.authResponse) {
            FB.api("/me", function (response) {
              ctrl.user.info.name = response.name;
              ctrl.user.info.id = response.id;
              ctrl.user.info.avatar =
                "//graph.facebook.com/" +
                response.id +
                "/picture?width=32&height=32";
              ctrl.join();
              $scope.$apply();
            });
          } else {
            console.log("User cancelled login or did not fully authorize.");
          }
        });
      };
      ctrl.join = function () {
        // var obj = {name: 'tinku', message: 'test'};
        // ctrl.connection.invoke("SendMessage", JSON.stringify(obj) ).catch(err => console.error(err.toString()));
        ctrl.request.action = "join_group";
        ctrl.request.uid = ctrl.user.connection.id;
        ctrl.request.data = ctrl.user.connection;
        ctrl.message.connection = ctrl.user.connection;
        ctrl.connection.invoke("HandleRequest", JSON.stringify(ctrl.request));
      };
      ctrl.toggle = function () {
        ctrl.isHide = !ctrl.isHide;
      };
      ctrl.toggleContact = function () {
        ctrl.hideContact = !ctrl.hideContact;
      };
      ctrl.sendMessage = function () {
        // if (ctrl.user.loggedIn) {
        ctrl.request.data = ctrl.message;
        ctrl.request.action = "send_message";
        ctrl.connection.invoke("sendMessage", JSON.stringify(ctrl.request));
        ctrl.message.content = "";
        // }
      };
      ctrl.receiveMessage = function (msg) {
        switch (msg.responseKey) {
          case "NewMember":
            ctrl.newMember(msg.data);
            $(".widget-conversation").scrollTop = $(
              ".widget-conversation"
            )[0].scrollHeight;
            break;

          case "NewMessage":
            ctrl.newMessage(msg.data);
            break;
          case "ConnectSuccess":
            ctrl.user.loggedIn = true;
            ctrl.initList(msg.data);
            $scope.$apply();
            break;

          case "MemberOffline":
            ctrl.removeMember(msg.data);
            break;
          case "Error":
            console.error(msg.data);
            break;
        }
      };
      ctrl.checkLoginStatus = function () {
        FB.getLoginStatus(function (response) {
          if (response.status === "connected") {
            // The user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token
            // and signed request each expire.
            FB.api("/me", function (response) {
              ctrl.user.info.name = response.name;
              ctrl.user.info.id = response.id;
              ctrl.user.info.avatar =
                "//graph.facebook.com/" +
                response.id +
                "/picture?width=32&height=32";
              ctrl.join();
              $scope.$apply();
            });
          } else if (response.status === "authorization_expired") {
            // The user has signed into your application with
            // Facebook Login but must go through the login flow
            // again to renew data authorization. You might remind
            // the user they've used Facebook, or hide other options
            // to avoid duplicate account creation, but you should
            // collect a user gesture (e.g. click/touch) to launch the
            // login dialog so popup blocking is not triggered.
          } else if (response.status === "not_authorized") {
            // The user hasn't authorized your application.  They
            // must click the Login button, or you must call FB.login
            // in response to a user gesture, to launch a login dialog.
          } else {
            // The user isn't logged in to Facebook. You can launch a
            // login dialog with a user gesture, but the user may have
            // to log in to Facebook before authorizing your application.
          }
        });
      };
      ctrl.newMember = function (member) {
        var m = $rootScope.findObjectByKey(ctrl.members, "id", member.id);
        if (!m) {
          ctrl.members.push(member);
        }
        $scope.$apply();
      };

      ctrl.initList = function (data) {
        data.forEach((member) => {
          var index = ctrl.members.findIndex((x) => x.id === member.id);
          if (index < 0) {
            ctrl.members.splice(0, 0, member);
          }
        });

        $scope.$apply();
      };

      ctrl.removeMember = function (memberId) {
        var index = ctrl.members.findIndex((x) => x.id === memberId);
        if (index >= 0) {
          ctrl.members.splice(index, 1);
        }
        $scope.$apply();
      };

      ctrl.newMessage = function (msg) {
        ctrl.messages.push(msg);
        $scope.$apply();
        // var objDiv = document.getElementsByClassName("widget-conversation")[0];
        // objDiv.scrollTop = objDiv.scrollHeight + 20;
      };
    },
  ],
});

sharedComponents.component("shoppingCart", {
  templateUrl: "/mix-app/views/app-shared/components/shopping-cart/view.html",
  bindings: {
    cartData: "=?",
    successCallback: "&?",
  },
  controller: "ShoppingCartController",
});
sharedComponents.controller("ShoppingCartController", [
  "$rootScope",
  "$scope",
  "localStorageService",
  "RestMixDatabaseDataClientService",
  function ($rootScope, $scope, localStorageService, dataService) {
    $scope.submitted = false;
    $scope.isShow = false;
    $scope.init = function (validateCallback, successCallback, failCallback) {
      $scope.validateCallback = validateCallback;
      $scope.successCallback = successCallback;
      $scope.failCallback = failCallback;
    };
    $scope.translate = $rootScope.translate;

    $scope.showShoppingCart = function () {
      $scope.cartModal.show();
    };
    $scope.calculate = function () {
      $scope.cartData.total = 0;
      $scope.cartData.totalItem = $scope.cartData.items.length;
      angular.forEach($scope.cartData.items, function (e) {
        $scope.cartData.total += parseInt(e.price) * e.quantity;
      });
      localStorageService.set("shoppingCart", $scope.cartData);
    };
    $scope.removeItem = function (index) {
      $scope.cartData.items.splice(index, 1);
      $scope.calculate();
    };

    $scope.submit = async function () {
      $scope.onValidate();
      if ($scope.frmCheckOut.$valid) {
        $scope.isBusy = true;
        $rootScope.submitting = true;
        var result = await dataService.saveData(
          "shoppingCart",
          $scope.cartData
        );
        if (result.success) {
          $scope.isBusy = false;
          $scope.cartData = result.data.obj;
          $scope.$apply();
          $scope.onSuccess(result.data);
        } else {
          $scope.isBusy = false;
          $scope.$apply();
          $scope.onFail(result.errors);
        }
      }
    };

    $scope.onValidate = async function () {
      $scope.frmCheckOut.$$element.addClass("was-validated");
      if ($scope.validateCallback) {
        let isValid = await $rootScope.executeFunctionByName(
          $scope.validateCallback,
          [$scope.frmCheckOut, $scope.cartData],
          window
        );
        $scope.frmCheckOut.$valid = $scope.frmCheckOut.$valid && isValid;
      }
    };
    $scope.onSuccess = function (resp) {
      localStorageService.set("shoppingCart", resp.obj);

      if ($scope.successCallback) {
        $rootScope.executeFunctionByName(
          $scope.successCallback,
          [resp],
          window
        );
      } else {
        setTimeout(() => {
          $scope.submitting = false;
        }, 1000);
        $scope.cartData = {
          items: [],
          totalItem: 0,
          total: 0,
        };
        localStorageService.set("shoppingCart", $scope.cartData);
        window.location.href = "/";
      }
    };
    $scope.onFail = function (errors) {
      $scope.errors = errors;
      if ($scope.failCallback) {
        $rootScope.executeFunctionByName($scope.failCallback, [errors], window);
      }
    };
    $scope.sendmail = async function () {
      let edm =
        'Url: <a href="[url]">View Tour</a> <br/>Name: [name] <br/>' +
        "Phone: [phone]<br/>" +
        "Email: [email]<br/>" +
        "Quantity: [quantity]<br/>" +
        "Message: [message] <br/>" +
        "property: [property] <br/>Price: [price] <br/>";

      edm = edm.replace(/\[url\]/g, window.top.location.href);
      edm = edm.replace(/\[name\]/g, $scope.order.name);
      edm = edm.replace(/\[phone\]/g, $scope.order.phone);
      edm = edm.replace(/\[email\]/g, $scope.order.email);
      edm = edm.replace(/\[message\]/g, $scope.order.message);
      edm = edm.replace(/\[property\]/g, $scope.order.propertyId);
      edm = edm.replace(/\[price\]/g, $scope.order.price);
      edm = edm.replace(/\[quantity\]/g, $scope.order.quantity);

      //   TODO Handle cart submit
      await commonService.sendMail("Booking - " + $scope.propertyName, edm);
      $scope.submitted = true;
    };
  },
]);

sharedComponents.component("codeEditor", {
  templateUrl: "codeEditor.html",
  bindings: {
    product: "=",
    onDelete: "&",
    onUpdate: "&",
  },
});

sharedComponents.component("snowy", {
  templateUrl: "/mix-app/views/app-shared/components/snowy/index.html",
  controller: [
    "$scope",
    function ($scope) {
      var ctrl = this;
      this.init = function () {
        var Snowflake = (function () {
          var flakes;
          var flakesTotal = 250;
          var wind = 0;
          var mouseX;
          var mouseY;

          function Snowflake(size, x, y, vx, vy) {
            this.size = size;
            this.x = x;
            this.y = y;
            this.vx = vx;
            this.vy = vy;
            this.hit = false;
            this.melt = false;
            this.div = document.createElement("div");
            this.div.classList.add("snowflake");
            this.div.style.width = this.size + "px";
            this.div.style.height = this.size + "px";
          }

          Snowflake.prototype.move = function () {
            if (this.hit) {
              if (Math.random() > 0.995) this.melt = true;
            } else {
              this.x += this.vx + Math.min(Math.max(wind, -10), 10);
              this.y += this.vy;
            }

            // Wrap the snowflake to within the bounds of the page
            if (this.x > window.innerWidth + this.size) {
              this.x -= window.innerWidth + this.size;
            }

            if (this.x < -this.size) {
              this.x += window.innerWidth + this.size;
            }

            if (this.y > window.innerHeight + this.size) {
              this.x = Math.random() * window.innerWidth;
              this.y -= window.innerHeight + this.size * 2;
              this.melt = false;
            }

            var dx = mouseX - this.x;
            var dy = mouseY - this.y;
            this.hit =
              !this.melt && this.y < mouseY && dx * dx + dy * dy < 2400;
          };

          Snowflake.prototype.draw = function () {
            this.div.style.transform = this.div.style.MozTransform = this.div.style.webkitTransform =
              "translate3d(" + this.x + "px" + "," + this.y + "px,0)";
          };

          function update() {
            for (var i = flakes.length; i--; ) {
              var flake = flakes[i];
              flake.move();
              flake.draw();
            }
            requestAnimationFrame(update);
          }

          Snowflake.init = function (container) {
            flakes = [];

            for (var i = flakesTotal; i--; ) {
              var size = (Math.random() + 0.2) * 2 + 1;
              var flake = new Snowflake(
                size,
                Math.random() * window.innerWidth,
                Math.random() * window.innerHeight,
                Math.random() - 0.5,
                size * 0.3
              );
              container.appendChild(flake.div);
              flakes.push(flake);
            }

            container.onmousemove = function (event) {
              mouseX = event.clientX;
              mouseY = event.clientY;
              wind = ((mouseX - window.innerWidth / 2) / window.innerWidth) * 6;
            };

            container.ontouchstart = function (event) {
              mouseX = event.targetTouches[0].clientX;
              mouseY = event.targetTouches[0].clientY;
              event.preventDefault();
            };

            window.ondeviceorientation = function (event) {
              if (event) {
                wind = event.gamma / 10;
              }
            };

            update();
          };

          return Snowflake;
        })();

        window.onload = function () {
          setTimeout(function () {
            Snowflake.init(document.getElementById("snow"));
          }, 500);
        };
      };
    },
  ],
  bindings: {},
});

sharedComponents.component("starRating", {
  templateUrl:
    "/mix-app/views/app-shared/components/star-rating/star-rating.html",
  bindings: {
    ratingValue: "=",
    max: "=?", // optional (default is 5)
    onRatingSelect: "&?",
    isReadonly: "=?",
  },
  controller: "StarRatingController",
});

appShared.controller("StarRatingController", [
  "$rootScope",
  function ($rootScope) {
    var ctrl = this;
    ctrl.translate = function (keyword) {
      return $rootScope.translate(keyword);
    };
    ctrl.readonly = false;
    ctrl.rateFunction = function (rating) {
      console.log("Rating selected: " + rating);
    };
    ctrl.init = function () {
      ctrl.readonly = ctrl.isReadonly === "true";
      ctrl.stars = [];
      ctrl.max = ctrl.max || 5;
      for (var i = 0; i < ctrl.max; i++) {
        ctrl.stars.push({
          filled: i < ctrl.ratingValue,
        });
      }
    };
    ctrl.toggle = function (index) {
      if (ctrl.readonly === undefined || ctrl.readonly === false) {
        ctrl.ratingValue = index + 1;
      }
    };
    ctrl.filled = function (index) {
      return index < ctrl.ratingValue;
    };
  },
]);

sharedComponents.component("statuses", {
  templateUrl: "/mix-app/views/app-shared/components/statuses/statuses.html",
  controller: [
    "$rootScope",
    "ngAppSettings",
    function ($rootScope, ngAppSettings) {
      this.contentStatuses = ngAppSettings.contentStatuses;
    },
  ],
  bindings: {
    status: "=",
  },
});

sharedComponents.component("mixStore", {
  templateUrl: "/mix-app/views/app-shared/components/store/view.html",
  bindings: {
    installCallback: "&?",
  },
  controller: [
    "$scope",
    "$rootScope",
    "ngAppSettings",
    "CryptoService",
    "TenancyService",
    "ThemeService",
    "StoreService",
    function (
      $scope,
      $rootScope,
      ngAppSettings,
      cryptoService,
      tenancyService,
      themeService,
      service
    ) {
      var ctrl = this;
      ctrl.categories = [];
      BaseHub.call(this, ctrl);
      $scope.host = `${$rootScope.globalSettings.domain}/${ctrl.host}`;
      ctrl.current = null;
      ctrl.viewMode = "list";
      ctrl.packageTypes = [
        {
          title: "Mix Theme",
          value: "mixcoreTheme",
        },
        {
          title: "Mix Portal App",
          value: "mixApplicationPackage",
        },
      ];
      ctrl.init = async function () {
        ctrl.startConnection("mixThemeHub", null, (err) => {
          console.log(err);
        });
        ctrl.onConnected = () => {
          ctrl.joinRoom("Theme");
        };
        ctrl.themeRequest = angular.copy(ngAppSettings.request);
        ctrl.themeRequest.orderBy = "createdDatetime";
        ctrl.themeRequest.mixDatabaseName = "mixcoreTheme";
        ctrl.themeRequest.queries = [
          { fieldName: "mixcoreVersion", value: "2.0.1" },
        ];
        ctrl.cateRequest = angular.copy(ngAppSettings.request);
        ctrl.cateRequest.mixDatabaseName = "sysCategory";
        ctrl.cateRequest.pageSize = null;

        ctrl.mixConfigurations = $rootScope.globalSettings;
        // let getCategories = await service.getCategories(ctrl.cateRequest);
        // ctrl.categories = getCategories.data.items;
        await ctrl.getThemes(ctrl.themeRequest);
        $scope.$apply();
      };
      ctrl.receiveMessage = function (resp) {
        let msg = JSON.parse(resp);
        switch (msg.action) {
          case "Downloading":
            var index = ctrl.data.items.findIndex(
              (m) => m.id == ctrl.current.id
            );
            var progress = Math.round(msg.message);
            if (index >= 0) {
              ctrl.data.items[index].progress = progress;
              if (progress == 100) {
                ctrl.data.items[index].additionalData.installStatus =
                  "Installing";
              }
              $scope.$apply();
            }
            break;

          default:
            console.log(msg);
            break;
        }
      };
      ctrl.getThemes = async function () {
        $rootScope.isBusy = true;

        if (ctrl.themeRequest.fromDate !== null) {
          var d = new Date(ctrl.themeRequest.fromDate);
          ctrl.themeRequest.fromDate = d.toISOString();
        }
        if (ctrl.themeRequest.toDate !== null) {
          var dt = new Date(ctrl.themeRequest.toDate);
          ctrl.themeRequest.toDate = dt.toISOString();
        }
        var resp = await service.getThemes(ctrl.themeRequest);
        if (resp && resp.success) {
          ctrl.data = resp.data;
          $.each(ctrl.data, function (i, data) {
            $.each(ctrl.viewmodels, function (i, e) {
              if (e.dataContentId === data.id) {
                data.isHidden = true;
              }
            });
          });
          $rootScope.isBusy = false;
          $scope.$apply();
        } else {
          if (resp) {
            $rootScope.showErrors(resp.errors || ["Failed"]);
          }
          if (ctrl.getListFailCallback) {
            ctrl.getListFailCallback();
          }
          $rootScope.isBusy = false;
          $scope.$apply();
        }
      };
      ctrl.preview = function (theme) {
        ctrl.current = theme;
        // TODO: verify user - theme to enable install
        ctrl.current.canInstall = true;
        ctrl.viewMode = "detail";
      };
      ctrl.back = function () {
        ctrl.viewMode = "list";
      };
      ctrl.processPaymentData = async function (paymentData) {
        var encrypted = cryptoService.encryptAES(paymentData);
        ctrl.current.canInstall = true;
        $scope.$apply();
        return encrypted;
      };
      ctrl.installTheme = async function (theme, id) {
        $rootScope.isBusy = false;
        theme.installStatus = "downloading";
        ctrl.id = id;
        var result = await tenancyService.install(theme);

        if (result.success) {
          $rootScope.isBusy = false;
          theme.installStatus = "finished";
          $rootScope.showMessage("success");
        } else {
          $rootScope.isBusy = false;
          theme.installStatus = "failed";
          $rootScope.showErrors(result.errors);
        }

        if (ctrl.installCallback) {
          ctrl.installCallback({ data: result });
        }
        $scope.$apply();
      };
      ctrl.installPortal = async function (theme, id) {
        $rootScope.isBusy = false;
        theme.installStatus = "downloading";
        ctrl.id = id;
        var result = null;
        if (ctrl.themeRequest.mixDatabaseName == "mixcoreTheme") {
          result = await themeService.install(theme);
        } else {
          result = await themeService.installPortal(theme);
        }

        if (result.success) {
          $rootScope.isBusy = false;
          theme.installStatus = "finished";
          window.location = result.data;
          $rootScope.showMessage("success");
        } else {
          $rootScope.isBusy = false;
          theme.installStatus = "failed";
          $rootScope.showErrors(result.errors);
        }

        if (ctrl.installCallback) {
          ctrl.installCallback({ data: result });
        }
        $scope.$apply();
      };
    },
  ],
});

"use trick";
sharedComponents.directive("pane", function () {
  return {
    require: "^tabs",
    restrict: "E",
    transclude: true,
    scope: { header: "@", id: "@", icon: "@" },
    link: function (scope, element, attrs, tabsController) {
      tabsController.addPane(scope);
    },
    template:
      '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
      "</div>",
    replace: true,
  };
});

sharedComponents.directive("tabs", function () {
  return {
    restrict: "E",
    transclude: true,
    scope: {
      selectCallback: "&",
    },
    controller: function ($scope, $element) {
      var panes = ($scope.panes = []);

      $scope.select = function (pane) {
        angular.forEach(panes, function (pane) {
          pane.selected = false;
        });
        pane.selected = true;
        this.selectCallback({ pane: pane });
      };

      this.addPane = function (pane) {
        if (panes.length === 0) $scope.select(pane);
        panes.push(pane);
      };
    },
    templateUrl: "/mix-app/views/app-shared/components/tabs/tabs.html",
    replace: true,
  };
});

sharedComponents.component("tags", {
  templateUrl: "/mix-app/views/app-shared/components/tags/tags.html",
  controller: [
    "$scope",
    function ($scope) {
      var ctrl = this;
    },
  ],
  bindings: {
    input: "=",
  },
});

"use trick";
sharedComponents.directive("paneH", function () {
  return {
    require: "^tabs-h",
    restrict: "E",
    transclude: true,
    scope: { header: "@", id: "@", icon: "@" },
    link: function (scope, element, attrs, tabsController) {
      tabsController.addPane(scope);
    },
    template:
      '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
      "</div>",
    replace: true,
  };
});

sharedComponents.directive("tabsH", function () {
  return {
    restrict: "E",
    transclude: true,
    scope: {
      selectCallback: "&",
    },
    controller: function ($scope, $element) {
      var panes = ($scope.panes = []);

      $scope.select = function (pane) {
        angular.forEach(panes, function (pane) {
          pane.selected = false;
        });
        pane.selected = true;
        this.selectCallback({ pane: pane });
      };

      this.addPane = function (pane) {
        if (panes.length === 0) $scope.select(pane);
        panes.push(pane);
      };
    },
    templateUrl:
      "/mix-app/views/app-shared/components/tabs-horizontal/tabs.html",
    replace: true,
  };
});

"use trick";
sharedComponents.directive("paneV", function () {
  return {
    require: "^tabs-v",
    restrict: "E",
    transclude: true,
    scope: { header: "@", id: "@", icon: "@", class: "@" },
    link: function (scope, element, attrs, tabsController) {
      tabsController.addPane(scope);
    },
    template:
      '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
      "</div>",
    replace: true,
  };
});

sharedComponents.directive("tabsV", function () {
  return {
    restrict: "E",
    transclude: true,
    scope: {
      selectCallback: "&",
    },
    controller: function ($scope, $element) {
      var panes = ($scope.panes = []);

      $scope.select = function (pane) {
        angular.forEach(panes, function (pane) {
          pane.selected = false;
        });
        pane.selected = true;
        this.selectCallback({ pane: pane });
      };

      this.addPane = function (pane) {
        if (panes.length === 0) $scope.select(pane);
        panes.push(pane);
      };
    },
    templateUrl: "/mix-app/views/app-shared/components/tabs-verticle/tabs.html",
    replace: true,
  };
});

sharedComponents.component("tagsView", {
  templateUrl: "/mix-app/views/app-shared/components/tags-view/view.html",
  controller: [
    "$rootScope",
    "$scope",
    function ($rootScope, $scope) {
      var ctrl = this;
      ctrl.$onInit = function () {
        if (ctrl.tags) {
          ctrl.data = angular.fromJson(ctrl.tags);
        } else {
          ctrl.data = [];
        }
        angular.forEach(ctrl.data, function (e, i) {
          e.url =
            $rootScope.globalSettings.domain +
            "/" +
            $rootScope.mixConfigurations.lang +
            "/tag/" +
            e.text;
        });
        $scope.$apply();
      };
    },
  ],
  bindings: {
    tags: "=",
  },
});

sharedComponents.component("trumbowyg", {
  templateUrl: "/mix-app/views/app-shared/components/trumbowyg/trumbowyg.html",
  bindings: {
    options: "<?",
    ngDisabled: "<?",
    placeholder: "@?",
    onFocus: "&?",
    onBlur: "&?",
    onInit: "&?",
    onChange: "&?",
    onResize: "&?",
    onPaste: "&?",
    onOpenfullscreen: "&?",
    onClosefullscreen: "&?",
    onClose: "&?",
    removeformatPasted: "=",
  },
  require: {
    ngModel: "ngModel",
  },
  controller: [
    "$element",
    "$scope",
    "$attrs",
    "ngAppSettings",
    function ($element, $scope, $attrs) {
      var ctrl = this;
      const TBW_EVENTS = [
          "focus",
          "blur",
          "init",
          "change",
          "resize",
          "paste",
          "openfullscreen",
          "closefullscreen",
          "close",
        ],
        EVENTS_PREFIX = "tbw";
      ctrl.options = {
        svgPath: "/mix-app/assets/icons.svg",
        removeformatPasted: false,
        imageWidthModalEdit: true,
        resetCss: true,
        tagClasses: {
          iframe: "w-100", // Tailwind CSS example
        },
        btnsDef: {
          // Customizables dropdowns
          image: {
            dropdown: ["insertImage", "upload", "noembed"],
            ico: "insertImage",
          },
        },
        btns: [
          ["table"],
          ["emoji"],
          ["formatting"],
          ["strong", "em", "del", "underline"],
          ["fontsize"],
          ["foreColor", "backColor"],
          ["highlight"],
          ["link"],
          ["image"],
          ["justifyLeft", "justifyCenter", "justifyRight", "justifyFull"],
          ["unorderedList", "orderedList"],
          ["indent", "outdent"],
          ["preformatted"],
          ["horizontalRule"],
          ["fullscreen"],
          ["viewHTML"],
        ],
        plugins: {
          // Add imagur parameters to upload plugin
          upload: {
            serverPath: "/api/v1/vi-vn/media/upload-media",
            fileFieldName: "file",
            headers: {
              Authorization: "Client-ID 9e57cb1c4791cea",
            },
            urlPropertyName: "data.fullPath",
            statusPropertyName: "isSucceed",
          },
          table: {},
          fontfamily: {
            init: function (trumbowyg) {
              trumbowyg.o.plugins.fontfamily =
                trumbowyg.o.plugins.fontfamily || defaultOptions;
              trumbowyg.addBtnDef("fontfamily", {
                dropdown: buildDropdown(trumbowyg),
                hasIcon: false,
                text: trumbowyg.lang.fontFamily,
              });
            },
          },
        },
      };
      ctrl.getElementReference = function () {
        return $($element.find("div"));
      };

      ctrl.getEditorReference = function () {
        return ctrl.getElementReference().find(".trumbowyg-editor");
      };
      ctrl.updateModelValue = () => {
        $scope.$applyAsync(() => {
          const value = ctrl.getEditorReference().trumbowyg("html");
          ctrl.ngModel.$setViewValue(value);
        });
      };

      ctrl.emitEvent = (event) => {
        const attr = $attrs.$normalize(`on-${event}`);
        if (angular.isFunction(this[attr])) {
          $scope.$applyAsync(() => this[attr]());
        }
      };

      ctrl.initializeEditor = (element) => {
        if (ctrl.removeformatPasted) {
          ctrl.options.plugins.removeformatPasted =
            ctrl.removeformatPasted == "true";
        }
        element
          .trumbowyg(ctrl.options)
          .on("tbwchange", () => ctrl.updateModelValue())
          .on("tbwpaste", () => ctrl.updateModelValue());
        angular.forEach(TBW_EVENTS, (event) => {
          element.on(`${EVENTS_PREFIX}${event}`, () => ctrl.emitEvent(event));
        });
        ctrl.ngModel.$render();
      };

      ctrl.$onDestroy = () => {
        ctrl.getElementReference().trumbowyg("destroy");
      };

      ctrl.$onChanges = (changes) => {
        const element = ctrl.getElementReference();

        if (changes.options && !changes.options.isFirstChange()) {
          element.trumbowyg("destroy");
        }
        ctrl.options = ctrl.options || {};
        ctrl.initializeEditor(element);

        if (changes.ngDisabled) {
          element.trumbowyg(ctrl.ngDisabled ? "disable" : "enable");
        }

        if (changes.placeholder) {
          ctrl.getEditorReference().attr("placeholder", ctrl.placeholder);
        }
      };

      ctrl.$onInit = () => {
        ctrl.ngModel.$render = () => {
          const element = ctrl.getEditorReference();
          element.trumbowyg("html", ctrl.ngModel.$modelValue);
        };
      };
    },
  ],
});

sharedComponents.component("tuiEditor", {
  templateUrl: "/mix-app/views/app-shared/components/tui-editor/view.html",
  controller: [
    "$rootScope",
    "$scope",
    "$element",
    "ngAppSettings",
    function ($rootScope, $scope, $element, ngAppSettings) {
      var ctrl = this;
      ctrl.previousId = null;
      ctrl.editor = null;
      ctrl.init = function () {
        ctrl.guid = $rootScope.generateUUID();
        setTimeout(() => {
          ctrl.editor = new tui.Editor({
            el: document.querySelector("#tui-" + ctrl.guid),
            initialEditType: "markdown",
            previewStyle: "vertical",
            height: "300px",
            initialValue: ctrl.content,
            events: {
              // change: ctrl.updateContent,
              // focus: () => onFocus(),
              blur: () => ctrl.updateContent(),
            },
          });
          ctrl.toolbar = ctrl.editor.getUI().getToolbar();
          ctrl.toolbar.addButton(
            {
              name: "fullscreen",
              tooltip: "fullscreen",
              $el: $(
                '<button onclick="fsClick()" class="mi mi-FullScreen mi-lg mi-fw text-secondary" type="button"></button>'
              ),
            },
            1
          );
        }, 100);
      };
      window.fsClick = function () {
        $(".tui-editor-defaultUI").toggleClass("fs");
      };
      ctrl.updateContent = function () {
        ctrl.content = ctrl.editor.getMarkdown();
      };
    },
  ],
  bindings: {
    content: "=",
  },
});

sharedComponents.component("uploadCroppie", {
  templateUrl:
    "/mix-app/views/app-shared/components/upload-croppie/view.html?v=1",
  bindings: {
    header: "=",
    description: "=",
    src: "=",
    srcUrl: "=",
    h: "=?",
    w: "=?",
    isCrop: "=?",
    frameUrl: "=?",
    type: "=",
    folder: "=",
    auto: "=",
    onDelete: "&",
    onUpdate: "&",
  },
  controller: [
    "$rootScope",
    "$scope",
    "$modal",
    "$http",
    "ngAppSettings",
    function ($rootScope, $scope, $modal, $http, ngAppSettings) {
      var ctrl = this;
      ctrl.options = {
        boundary: { height: 250 },
        render: { width: 1000, height: 1000 },
        output: { width: 1000, height: 1000 },
      };
      ctrl.rto = 1;
      ctrl.isAdmin = $rootScope.isAdmin;
      ctrl.postedFile = {};
      ctrl.isImage = false;
      ctrl.mediaNavs = [];
      ctrl.image_placeholder = "/mix-app/assets/img/image_placeholder.jpg";
      // `https://via.placeholder.com/${ctrl.options.render.width}x${ctrl.options.render.height}.png`;
      ctrl.$onInit = function () {
        ctrl.loadViewport();
        ctrl.srcUrl = ctrl.srcUrl || ctrl.image_placeholder;
        ctrl.isImage = ctrl.srcUrl
          .toLowerCase()
          .match(/([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|svg)/g);
        ctrl.maxHeight = ctrl.maxHeight || "2000px";
        ctrl.id = Math.floor(Math.random() * 100);
        ctrl.canvas = document.getElementById(`canvas-${ctrl.id}`);
        ctrl.cropped = {
          source: ctrl.image_placeholder,
        };
        // var frameUrl = '/content/templates/tsets/uploads/2019-10/730149275529721421464195891692074859757568n0037047f8f6f4adab55211aee3538155.png';//$rootScope.mixConfigurations.data['frame_url']
        if (ctrl.frameUrl) {
          ctrl.frame = ctrl.loadImage(frameUrl);
        }
        if (ctrl.isImage) {
          ctrl.loadBase64(ctrl.srcUrl);
        }
        // Assign blob to component when selecting a image
      };
      ctrl.$doCheck = function () {
        if (ctrl.src !== ctrl.srcUrl && ctrl.srcUrl != ctrl.image_placeholder) {
          ctrl.src = ctrl.srcUrl;
          ctrl.isImage = ctrl.srcUrl
            .toLowerCase()
            .match(/([/|.|\w|\s|-])*\.(?:jpg|jpeg|gif|png|svg)/g);
          if (ctrl.isImage) {
            ctrl.loadBase64(ctrl.srcUrl);
          }
        }
      }.bind(ctrl);
      ctrl.combineImage = function () {
        ctrl.canvas = document.getElementById(`canvas-${ctrl.id}`);
        if (ctrl.canvas) {
          var img = document.getElementById("croppie-src");
          var w = ctrl.options.boundary.width;
          var h = ctrl.options.boundary.height;
          // var rto = w / h;
          var newW = ctrl.options.output.width;
          var newH = ctrl.options.output.height;
          var ctx = ctrl.canvas.getContext("2d");
          ctx.imageSmoothingEnabled = true;
          ctx.drawImage(img, 0, 0, newW, newH);
          if (ctrl.frame) {
            // combine with frame
            ctx.drawImage(ctrl.frame, 0, 0, w, h);
          }

          $scope.$apply(function () {
            ctrl.postedFile.fileStream = ctrl.canvas.toDataURL(); //ctx.getImageData(0, 0, 300, 350);
            ctrl.imgUrl = ctrl.postedFile.fileStream.replace(
              "image/png",
              "image/octet-stream"
            );
          });
        }
      };
      ctrl.saveCanvas = function () {
        var link = document.createElement("a");
        link.download = ctrl.postedFile.fileName + ctrl.postedFile.extension;
        $rootScope.isBusy = true;
        ctrl.canvas.toBlob(function (blob) {
          link.href = URL.createObjectURL(blob);
          link.click();
          $rootScope.isBusy = false;
          $scope.$apply();
        }, "image/png");
      };
      ctrl.loadBase64 = function (url) {
        var ext = url.substring(url.lastIndexOf(".") + 1);
        $http({
          method: "GET",
          url: url,
          responseType: "arraybuffer",
        }).then(function (resp) {
          var base64 = `data:image/${ext};base64,${ctrl._arrayBufferToBase64(
            resp.data
          )}`;
          var image = new Image();
          image.src = base64;
          image.onload = function () {
            // access image size here
            ctrl.loadImageSize(this.width, this.height);
          };
          ctrl.cropped.source = base64;
          return base64;
        });
      };
      ctrl.loadImage = function (src) {
        // http://www.thefutureoftheweb.com/blog/image-onload-isnt-being-called
        var img = new Image();
        // img.onload = onload;
        img.src = src;
        return img;
      };
      ctrl._arrayBufferToBase64 = function (buffer) {
        var binary = "";
        var bytes = new Uint8Array(buffer);
        var len = bytes.byteLength;
        for (var i = 0; i < len; i++) {
          binary += String.fromCharCode(bytes[i]);
        }
        return window.btoa(binary);
      };
      ctrl.mediaFile = {
        file: null,
        fullPath: "",
        folder: ctrl.folder,
        title: ctrl.title,
        description: ctrl.description,
      };
      ctrl.media = null;

      ctrl.selectFile = function (files) {
        if (files !== undefined && files !== null && files.length > 0) {
          const file = files[0];
          ctrl.mediaFile.folder = ctrl.folder ? ctrl.folder : "Media";
          ctrl.mediaFile.title = ctrl.title ? ctrl.title : "";
          ctrl.mediaFile.description = ctrl.description ? ctrl.description : "";
          ctrl.mediaFile.file = file;
          ctrl.getBase64(file);
          // if (file.size < 100000) {
          //   var msg = "Please choose a better photo (larger than 100kb)!";
          //   $rootScope.showConfirm(ctrl, null, [], null, null, msg);
          // } else {
          // }
        }
      };

      ctrl.getBase64 = function (file) {
        if (file !== null) {
          $rootScope.isBusy = true;
          var reader = new FileReader();
          reader.readAsDataURL(file);
          reader.onload = function () {
            ctrl.cropped.source = null;
            var index = reader.result.indexOf(",") + 1;
            var base64 = reader.result.substring(index);
            if (ctrl.postedFile) {
              ctrl.postedFile.fileName = file.name.substring(
                0,
                file.name.lastIndexOf(".")
              );
              ctrl.postedFile.extension = file.name.substring(
                file.name.lastIndexOf(".")
              );
              // ctrl.postedFile.fileStream = reader.result;
            }
            var image = new Image();
            image.src = reader.result;

            image.onload = function () {
              // access image size here
              ctrl.loadImageSize(this.width, this.height);
            };

            ctrl.cropped.source = reader.result;
            $rootScope.isBusy = false;
            $scope.$apply();
          };
          reader.onerror = function (error) {
            $rootScope.isBusy = false;
            $rootScope.showErrors([error]);
          };
        } else {
          return null;
        }
      };
      ctrl.loadImageSize = function (w, h) {
        var rto = w / h;
        // ctrl.options.boundary.width = ctrl.options.boundary.height * rto;
        ctrl.options.render.width = ctrl.options.render.height * rto;
        if (!ctrl.rto) {
          ctrl.rto = rto;
          ctrl.w = w;
          ctrl.h = h;
          ctrl.loadViewport();
        }
        $scope.$apply();
        ctrl.image_placeholder = `https://via.placeholder.com/${ctrl.options.render.width}x${ctrl.options.render.height}.png`;
      };
      ctrl.loadViewport = function () {
        if (ctrl.w && ctrl.h) {
          ctrl.rto = ctrl.w / ctrl.h;
          ctrl.options.viewport.height = ctrl.h;
          ctrl.options.viewport.width = ctrl.options.viewport.height * ctrl.rto;
        }
        // ctrl.image_placeholder = "/mix-app/assets/img/image_placeholder.jpg"; // `https://via.placeholder.com/${ctrl.options.render.width}x${ctrl.options.render.height}.png`;
      };
    },
  ],
});

sharedComponents.component("youtubeEditor", {
  templateUrl:
    "/mix-app/views/app-shared/components/youtube-editor/youtube-editor.html",
  controller: [
    "$rootScope",
    "$scope",
    "$sce",
    function ($rootScope, $scope, $sce) {
      var ctrl = this;
      ctrl.isPlay = false;
      ctrl.loadVideo = function () {
        ctrl.isPlay = false;
        ctrl.src = "";
        if (ctrl.code) {
          ctrl.img =
            "https://img.youtube.com/vi/" + ctrl.code + "/sddefault.jpg";
        }
      };
      ctrl.playVideo = function () {
        ctrl.isPlay = true;
        ctrl.src = $sce.trustAsResourceUrl(
          "https://www.youtube.com/embed/" +
            ctrl.code +
            "?rel=0&showinfo=0&autoplay=1"
        );
      };
      ctrl.searchVideo = function () {
        // search
        $rootScope.preview(
          "message",
          "ToDo: Integrate youtube search (https://developers.google.com/youtube/v3/docs/search/list) \r\n PATH: portal-app/app/app-shared/components/youtube-editor/youtube-editor.js"
        );
      };
    },
  ],
  bindings: {
    code: "=",
    hideInput: "=?",
  },
});

"use strict";
appShared.controller("VideoCallController", [
  "$scope",
  function ($scope) {
    BaseHub.call(this, $scope);

    $scope.user = {
      loggedIn: false,
      info: {},
    };
    $scope.isHide = true;
    $scope.hideContact = true;
    $scope.members = [];
    $scope.messages = [];
    $scope.message = { connection: {}, content: "" };
    $scope.request = {
      uid: "",
      objectType: null,
      action: "",
      data: {},
      room: "",
      isMyself: false,
    };
    $scope.loadMsgButton = function () {};
    $scope.init = function () {
      $scope.startConnection("MixChatHub", $scope.checkLoginStatus);

      $("button").on("click", function () {
        var text = $("#message").val();
        var hnow = new Date().getHours();
        var mnow = new Date().getMinutes();
        mnow = mnow < 10 ? "0" + mnow : mnow;
        var d = hnow + ":" + mnow;

        if (text.length > 0) {
          $("#message").css("border", "1px solid #f4f5f9");
          $("#conversation").append(
            "<li class='message-right'><div class='message-avatar'><div class='avatar ion-ios-person'></div><div class='name'>You</div></div><div class='message-text'>" +
              text +
              "</div><div class='message-hour'>" +
              d +
              " <span class='ion-android-done-all'></span></div></li>"
          );
          $("#message").val("");
          $(".widget-conversation").scrollTop(
            $("ul li").last().position().top + $("ul li").last().height()
          );
        } else {
          $("#message").css("border", "1px solid #eb9f9f");
          $("#message").animate({ opacity: "0.1" }, "slow");
          $("#message").animate({ opacity: "1" }, "slow");
          $("#message").animate({ opacity: "0.1" }, "slow");
          $("#message").animate({ opacity: "1" }, "slow");
        }
      });

      // var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError("Cannot call a class as a function");}}var HoverButton = function () {
      //   function HoverButton(el) {_classCallCheck(this, HoverButton);
      //     this.el = el;
      //     this.hover = false;
      //     this.calculatePosition();
      //     this.attachEventsListener();
      //   }_createClass(HoverButton, [{ key: 'attachEventsListener', value: function attachEventsListener()

      //     {var _this = this;
      //       window.addEventListener('mousemove', function (e) {return _this.onMouseMove(e);});
      //       window.addEventListener('resize', function (e) {return _this.calculatePosition(e);});
      //     } }, { key: 'calculatePosition', value: function calculatePosition()

      //     {

      //       var box = this.el.getBoundingClientRect();
      //       this.x = box.left + box.width * 0.5;
      //       this.y = box.top + box.height * 0.5;
      //       this.width = box.width;
      //       this.height = box.height;
      //     } }, { key: 'onMouseMove', value: function onMouseMove(

      //     e) {
      //       var hover = false;
      //       var hoverArea = this.hover ? 0.7 : 0.5;
      //       var x = e.clientX - this.x;
      //       var y = e.clientY - this.y;
      //       var distance = Math.sqrt(x * x + y * y);
      //       if (distance < this.width * hoverArea) {
      //         hover = true;
      //         if (!this.hover) {
      //           this.hover = true;
      //         }
      //         this.onHover(e.clientX, e.clientY);
      //       }

      //       if (!hover && this.hover) {
      //         this.onLeave();
      //         this.hover = false;
      //       }
      //     } }, { key: 'onHover', value: function onHover(

      //     x, y) {
      //       TweenMax.to(this.el, 0.4, {
      //         x: (x - this.x) * 0.4,
      //         y: (y - this.y) * 0.4,
      //         scale: 1.15,
      //         ease: Power2.easeOut });

      //       this.el.style.zIndex = 10;
      //     } }, { key: 'onLeave', value: function onLeave()
      //     {
      //       TweenMax.to(this.el, 0.7, {
      //         x: 0,
      //         y: 0,
      //         scale: 1,
      //         ease: Elastic.easeOut.config(1.2, 0.4) });

      //       this.el.style.zIndex = 1;
      //     } }]);return HoverButton;}();

      // var btn1 = document.querySelector('#quest');
      // new HoverButton(btn1);
    };
    $scope.logout = function () {
      FB.logout(function (response) {
        // user is now logged out
        $scope.user.loggedIn = false;
      });
    };
    $scope.login = function () {
      FB.login(function (response) {
        if (response.authResponse) {
          FB.api("/me", function (response) {
            $scope.user.info.name = response.name;
            $scope.user.info.id = response.id;
            $scope.user.info.avatar =
              "//graph.facebook.com/" +
              response.id +
              "/picture?width=32&height=32";
            $scope.join();
            $scope.$apply();
          });
        } else {
          console.log("User cancelled login or did not fully authorize.");
        }
      });
    };
    $scope.join = function () {
      $scope.request.uid = $scope.user.info.id;
      $scope.request.data = $scope.user.info;
      $scope.message.connection = $scope.user.info;
      $scope.connection.invoke("join", window.location.host);
    };
    $scope.toggle = function () {
      $scope.isHide = !$scope.isHide;
    };
    $scope.toggleContact = function () {
      $scope.hideContact = !$scope.hideContact;
    };
    $scope.sendMessage = function () {
      if ($scope.user.loggedIn) {
        $scope.request.data = $scope.message;
        $scope.connection.invoke("sendMessage", $scope.request);
        $scope.message.content = "";
      }
    };
    $scope.receiveMessage = function (msg) {
      //$scope.responses.splice(0, 0, msg);
      switch (msg.responseKey) {
        case "NewMember":
          $scope.newMember(msg.data);
          $(".widget-conversation").scrollTop = $(
            ".widget-conversation"
          )[0].scrollHeight;
          break;

        case "NewMessage":
          $scope.newMessage(msg.data);
          break;
        case "ConnectSuccess":
          $scope.user.loggedIn = true;
          $scope.initList(msg.data);
          $scope.$apply();
          break;

        case "MemberOffline":
          $scope.removeMember(msg.data);
          break;
      }
    };
    $scope.checkLoginStatus = function () {
      FB.getLoginStatus(function (response) {
        if (response.status === "connected") {
          // The user is logged in and has authenticated your
          // app, and response.authResponse supplies
          // the user's ID, a valid access token, a signed
          // request, and the time the access token
          // and signed request each expire.
          FB.api("/me", function (response) {
            $scope.user.info.name = response.name;
            $scope.user.info.id = response.id;
            $scope.user.info.avatar =
              "//graph.facebook.com/" +
              response.id +
              "/picture?width=32&height=32";
            $scope.join();
            $scope.$apply();
          });
        } else if (response.status === "authorization_expired") {
          // The user has signed into your application with
          // Facebook Login but must go through the login flow
          // again to renew data authorization. You might remind
          // the user they've used Facebook, or hide other options
          // to avoid duplicate account creation, but you should
          // collect a user gesture (e.g. click/touch) to launch the
          // login dialog so popup blocking is not triggered.
        } else if (response.status === "not_authorized") {
          // The user hasn't authorized your application.  They
          // must click the Login button, or you must call FB.login
          // in response to a user gesture, to launch a login dialog.
        } else {
          // The user isn't logged in to Facebook. You can launch a
          // login dialog with a user gesture, but the user may have
          // to log in to Facebook before authorizing your application.
        }
      });
    };
    $scope.newMember = function (member) {
      var index = $scope.members.findIndex((x) => x.id === member.id);
      if (index < 0) {
        $scope.members.splice(0, 0, member);
      }
      $scope.$apply();
    };

    $scope.initList = function (data) {
      data.forEach((member) => {
        var index = $scope.members.findIndex((x) => x.id === member.id);
        if (index < 0) {
          $scope.members.splice(0, 0, member);
        }
      });

      $scope.$apply();
    };

    $scope.removeMember = function (memberId) {
      var index = $scope.members.findIndex((x) => x.id === memberId);
      if (index >= 0) {
        $scope.members.splice(index, 1);
      }
      $scope.$apply();
    };

    $scope.newMessage = function (msg) {
      $scope.messages.push(msg);
      $scope.$apply();
      var objDiv = document.getElementsByClassName("widget-conversation")[0];
      objDiv.scrollTop = objDiv.scrollHeight + 20;
    };
  },
]);

sharedComponents.component("videoCall", {
  templateUrl: "/mix-app/views/app-shared/components/video-call/index.html",
  controller: [
    function () {
      var ctrl = this;
      ctrl.constraints = {
        audio: {},
        video: {},
      };
      ctrl.isPlayed = false;
      ctrl.videoElement = document.querySelector("video");
      ctrl.audioSelect = document.querySelector("select#audioSource");
      ctrl.videoSelect = document.querySelector("select#videoSource");
      ctrl.init = function () {
        navigator.mediaDevices
          .enumerateDevices()
          .then(ctrl.gotDevices)
          .then(ctrl.getStream)
          .catch(ctrl.handleError);
      };
      ctrl.gotDevices = function (deviceInfos) {
        for (let i = 0; i !== deviceInfos.length; ++i) {
          const deviceInfo = deviceInfos[i];
          const option = document.createElement("option");
          option.value = deviceInfo.deviceId;
          if (deviceInfo.kind === "audioinput") {
            option.text =
              deviceInfo.label || "microphone " + (ctrl.audioSelect.length + 1);
            ctrl.audioSelect.appendChild(option);
          } else if (deviceInfo.kind === "videoinput") {
            option.text =
              deviceInfo.label || "camera " + (ctrl.videoSelect.length + 1);
            ctrl.videoSelect.appendChild(option);
          } else {
            console.log("Found another kind of device: ", deviceInfo);
          }
        }
      };
      ctrl.getStream = function () {
        if (window.stream) {
          window.stream.getTracks().forEach(function (track) {
            track.stop();
          });
        }
        ctrl.constraints.audio.deviceId = { exact: ctrl.audioSelect.value };
        ctrl.constraints.video.deviceId = { exact: ctrl.videoSelect.value };
        navigator.mediaDevices
          .getUserMedia(ctrl.constraints)
          .then(ctrl.gotStream)
          .catch(ctrl.handleError);
      };
      ctrl.gotStream = function (stream) {
        window.stream = stream; // make stream available to console
        ctrl.videoElement.srcObject = stream;
      };

      ctrl.handleError = function (error) {
        console.error("Error: ", error);
      };
      ctrl.play = function () {
        ctrl.video.play();
        ctrl.isPlayed = true;
      };
      ctrl.stop = function () {
        ctrl.video.stop();
        ctrl.isPlayed = false;
      };
    },
  ],
  bindings: {
    message: "=",
  },
});

/*!
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!(function () {
  "use strict";
  angular.module("angular-loading-bar", ["cfp.loadingBarInterceptor"]),
    angular.module("chieffancypants.loadingBar", ["cfp.loadingBarInterceptor"]),
    angular.module("cfp.loadingBarInterceptor", ["cfp.loadingBar"]).config([
      "$httpProvider",
      function (a) {
        var b = [
          "$q",
          "$cacheFactory",
          "$timeout",
          "$rootScope",
          "$log",
          "cfpLoadingBar",
          function (b, c, d, e, f, g) {
            function h() {
              d.cancel(j), g.complete(), (l = 0), (k = 0);
            }
            function i(b) {
              var d,
                e = c.get("$http"),
                f = a.defaults;
              (!b.cache && !f.cache) ||
                b.cache === !1 ||
                ("GET" !== b.method && "JSONP" !== b.method) ||
                (d = angular.isObject(b.cache)
                  ? b.cache
                  : angular.isObject(f.cache)
                  ? f.cache
                  : e);
              var g = void 0 !== d ? void 0 !== d.get(b.url) : !1;
              return void 0 !== b.cached && g !== b.cached
                ? b.cached
                : ((b.cached = g), g);
            }
            var j,
              k = 0,
              l = 0,
              m = g.latencyThreshold;
            return {
              request: function (a) {
                return (
                  a.ignoreLoadingBar ||
                    i(a) ||
                    (e.$broadcast("cfpLoadingBar:loading", { url: a.url }),
                    0 === k &&
                      (j = d(function () {
                        g.start();
                      }, m)),
                    k++,
                    g.set(l / k)),
                  a
                );
              },
              response: function (a) {
                return a && a.config
                  ? (a.config.ignoreLoadingBar ||
                      i(a.config) ||
                      (l++,
                      l >= k
                        ? (e.$broadcast("cfpLoadingBar:loaded", {
                            url: a.config.url,
                            result: a,
                          }),
                          h())
                        : g.set(l / k)),
                    a)
                  : (f.error(
                      "Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"
                    ),
                    a);
              },
              responseError: function (a) {
                return a && a.config
                  ? (a.config.ignoreLoadingBar ||
                      i(a.config) ||
                      (l++,
                      l >= k
                        ? (e.$broadcast("cfpLoadingBar:loaded", {
                            url: a.config.url,
                            result: a,
                          }),
                          h())
                        : g.set(l / k)),
                    b.reject(a))
                  : (f.error(
                      "Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"
                    ),
                    b.reject(a));
              },
            };
          },
        ];
        a.interceptors.push(b);
      },
    ]),
    angular.module("cfp.loadingBar", []).provider("cfpLoadingBar", function () {
      (this.autoIncrement = !0),
        (this.includeSpinner = !0),
        (this.includeBar = !0),
        (this.latencyThreshold = 100),
        (this.startSize = 0.02),
        (this.parentSelector = "body"),
        (this.spinnerTemplate =
          '<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>'),
        (this.loadingBarTemplate =
          '<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>'),
        (this.$get = [
          "$injector",
          "$document",
          "$timeout",
          "$rootScope",
          function (a, b, c, d) {
            function e() {
              if ((k || (k = a.get("$animate")), c.cancel(m), !r)) {
                var e = b[0],
                  g = e.querySelector ? e.querySelector(n) : b.find(n)[0];
                g || (g = e.getElementsByTagName("body")[0]);
                var h = angular.element(g),
                  i = g.lastChild && angular.element(g.lastChild);
                d.$broadcast("cfpLoadingBar:started"),
                  (r = !0),
                  v && k.enter(o, h, i),
                  u && k.enter(q, h, o),
                  f(w);
              }
            }
            function f(a) {
              if (r) {
                var b = 100 * a + "%";
                p.css("width", b),
                  (s = a),
                  t &&
                    (c.cancel(l),
                    (l = c(function () {
                      g();
                    }, 250)));
              }
            }
            function g() {
              if (!(h() >= 1)) {
                var a = 0,
                  b = h();
                a =
                  b >= 0 && 0.25 > b
                    ? (3 * Math.random() + 3) / 100
                    : b >= 0.25 && 0.65 > b
                    ? (3 * Math.random()) / 100
                    : b >= 0.65 && 0.9 > b
                    ? (2 * Math.random()) / 100
                    : b >= 0.9 && 0.99 > b
                    ? 0.005
                    : 0;
                var c = h() + a;
                f(c);
              }
            }
            function h() {
              return s;
            }
            function i() {
              (s = 0), (r = !1);
            }
            function j() {
              k || (k = a.get("$animate")),
                f(1),
                c.cancel(m),
                (m = c(function () {
                  var a = k.leave(o, i);
                  a && a.then && a.then(i),
                    k.leave(q),
                    d.$broadcast("cfpLoadingBar:completed");
                }, 500));
            }
            var k,
              l,
              m,
              n = this.parentSelector,
              o = angular.element(this.loadingBarTemplate),
              p = o.find("div").eq(0),
              q = angular.element(this.spinnerTemplate),
              r = !1,
              s = 0,
              t = this.autoIncrement,
              u = this.includeSpinner,
              v = this.includeBar,
              w = this.startSize;
            return {
              start: e,
              set: f,
              status: h,
              inc: g,
              complete: j,
              autoIncrement: this.autoIncrement,
              includeSpinner: this.includeSpinner,
              latencyThreshold: this.latencyThreshold,
              parentSelector: this.parentSelector,
              startSize: this.startSize,
            };
          },
        ]);
    });
})();

/**
 * @ngDoc directive
 * @name ng.directive:paging
 *
 * @description
 * A directive to aid in paging large datasets
 * while requiring a small amount of page
 * information.
 *
 * @element EA
 *
 */
angular.module("bw.paging", []).directive("paging", function () {
  /**
   * The regex expression to use for any replace methods
   * Feel free to tweak / fork values for your application
   */
  var regex = /\{page\}/g;

  /**
   * The angular return value required for the directive
   * Feel free to tweak / fork values for your application
   */
  return {
    // Restrict to elements and attributes
    restrict: "EA",

    // Assign the angular link function
    link: columnLink,

    // Assign the angular directive template HTML
    template: columnTemplate,

    // Assign the angular scope attribute formatting
    scope: {
      page: "=",
      pageSize: "=",
      total: "=",
      scrollTop: "=",
      disabled: "@",
      dots: "@",
      ulClass: "@",
      aClass: "@",
      activeClass: "@",
      disabledClass: "@",
      adjacent: "@",
      pagingAction: "&",
      pgHref: "@",
      textFirst: "@",
      textLast: "@",
      textNext: "@",
      textPrev: "@",
      textFirstClass: "@",
      textLastClass: "@",
      textNextClass: "@",
      textPrevClass: "@",
      textTitlePage: "@",
      textTitleFirst: "@",
      textTitleLast: "@",
      textTitleNext: "@",
      textTitlePrev: "@",
    },
  };

  /**
   * Link the directive to enable our scope watch values
   *
   * @param {object} scope - Angular link scope
   * @param {object} el - Angular link element
   * @param {object} attrs - Angular link attribute
   */
  function columnLink(scope, el, attrs) {
    // Hook in our watched items
    scope.$watchCollection("[page,pageSize,total,disabled]", function () {
      build(scope, attrs);
    });
  }

  /**
   * Create our template html
   * We use a function to figure out how to handle href correctly
   *
   * @param {object} el - Angular link element
   * @param {object} attrs - Angular link attribute
   */
  function columnTemplate(el, attrs) {
    return (
      '<ul data-ng-hide="Hide" data-ng-class="ulClass"> ' +
      '<li class="page-item"' +
      'title="{{item.title}}" ' +
      'data-ng-class="Item.liClass" ' +
      'data-ng-repeat="Item in List"> ' +
      "<a " +
      (attrs.pgHref ? 'data-ng-href="{{Item.pgHref}}" ' : "href ") +
      'data-ng-class="aClass" ' +
      'data-ng-click="Item.action()" ' +
      'data-ng-bind="Item.value">' +
      "</a> " +
      "</li>" +
      "</ul>"
    );
  }

  /**
   * Assign default scope values from settings
   * Feel free to tweak / fork these for your application
   *
   * @param {Object} scope - The local directive scope object
   * @param {Object} attrs - The local directive attribute object
   */
  function setScopeValues(scope, attrs) {
    scope.List = [];
    scope.Hide = false;

    scope.page = parseInt(scope.page) || 1;
    scope.total = parseInt(scope.total) || 0;
    scope.adjacent = parseInt(scope.adjacent) || 2;

    scope.pgHref = scope.pgHref || "";
    scope.dots = scope.dots || "...";

    scope.ulClass = scope.ulClass || "pagination";
    scope.activeClass = scope.activeClass || "active";
    scope.disabledClass = scope.disabledClass || "disabled";

    scope.textFirst = scope.textFirst || "<<";
    scope.textLast = scope.textLast || ">>";
    scope.textNext = scope.textNext || ">";
    scope.textPrev = scope.textPrev || "<";

    scope.textFirstClass = scope.textFirstClass || "";
    scope.textLastClass = scope.textLastClass || "";
    scope.textNextClass = scope.textNextClass || "";
    scope.textPrevClass = scope.textPrevClass || "";

    scope.textTitlePage = scope.textTitlePage || "Page {page}";
    scope.textTitleFirst = scope.textTitleFirst || "First Page";
    scope.textTitleLast = scope.textTitleLast || "Last Page";
    scope.textTitleNext = scope.textTitleNext || "Next Page";
    scope.textTitlePrev = scope.textTitlePrev || "Previous Page";

    scope.hideIfEmpty = evalBoolAttribute(scope, attrs.hideIfEmpty);
    scope.showPrevNext = evalBoolAttribute(scope, attrs.showPrevNext);
    scope.showFirstLast = evalBoolAttribute(scope, attrs.showFirstLast);
    scope.scrollTop = String(scope.scrollTop) == "true"; //evalBoolAttribute(scope, attrs.scrollTop);
    scope.isDisabled = evalBoolAttribute(scope, attrs.disabled);
  }

  /**
   * A helper to perform our boolean eval on attributes
   * This allows flexibility in the attribute for strings and variables in scope
   *
   * @param {Object} scope - The local directive scope object
   * @param {Object} value - The attribute value of interest
   */
  function evalBoolAttribute(scope, value) {
    return angular.isDefined(value) ? !!scope.$parent.$eval(value) : false;
  }

  /**
   * Validate and clean up any scope values
   * This happens after we have set the scope values
   *
   * @param {Object} scope - The local directive scope object
   * @param {int} pageCount - The last page number or total page count
   */
  function validateScopeValues(scope, pageCount) {
    // Block where the page is larger than the pageCount
    // if (scope.page > pageCount) {
    //     scope.page = pageCount;
    // }

    // Block where the page is less than 0
    if (scope.page <= 0) {
      scope.page = 1;
    }

    // Block where adjacent value is 0 or below
    if (scope.adjacent <= 0) {
      scope.adjacent = 2;
    }

    // Hide from page if we have 1 or less pages
    // if directed to hide empty
    if (pageCount <= 1) {
      scope.Hide = scope.hideIfEmpty;
    }
  }

  /**
   * Assign the method action to take when a page is clicked
   *
   * @param {Object} scope - The local directive scope object
   * @param {int} page - The current page of interest
   */
  function internalAction(scope, page) {
    // Block clicks we try to load the active page
    if (scope.page === page) {
      return;
    }

    // Block if we are forcing disabled
    if (scope.isDisabled) {
      return;
    }

    // Update the page in scope
    scope.page = page;

    // Pass our parameters to the paging action
    scope.pagingAction({
      page: scope.page,
      pageSize: scope.pageSize,
      total: scope.total,
    });

    // If allowed scroll up to the top of the page
    if (scope.scrollTop) {
      //scrollTo(0, 0);
      $("html, body").animate({ scrollTop: "0px" }, 500);
    }
  }

  /**
   * Add the first, previous, next, and last buttons if desired
   * The logic is defined by the mode of interest
   * This method will simply return if the scope.showPrevNext is false
   * This method will simply return if there are no pages to display
   *
   * @param {Object} scope - The local directive scope object
   * @param {int} pageCount - The last page number or total page count
   * @param {string} mode - The mode of interest either prev or last
   */
  function addPrevNext(scope, pageCount, mode) {
    // Ignore if we are not showing
    // or there are no pages to display
    if ((!scope.showPrevNext && !scope.showFirstLast) || pageCount < 1) {
      return;
    }

    // Local variables to help determine logic
    var disabled, alpha, beta;

    // Determine logic based on the mode of interest
    // Calculate the previous / next page and if the click actions are allowed
    if (mode === "prev") {
      disabled = scope.page - 1 <= 0;
      var prevPage = scope.page - 1 <= 0 ? 1 : scope.page - 1;

      if (scope.showFirstLast) {
        alpha = {
          value: scope.textFirst,
          title: scope.textTitleFirst,
          aClass: scope.textFirstClass,
          page: 1,
        };
      }

      if (scope.showPrevNext) {
        beta = {
          value: scope.textPrev,
          title: scope.textTitlePrev,
          aClass: scope.textPrevClass,
          page: prevPage,
        };
      }
    } else {
      disabled = scope.page + 1 > pageCount;
      var nextPage = scope.page + 1 >= pageCount ? pageCount : scope.page + 1;

      if (scope.showPrevNext) {
        alpha = {
          value: scope.textNext,
          title: scope.textTitleNext,
          aClass: scope.textNextClass,
          page: nextPage,
        };
      }

      if (scope.showFirstLast) {
        beta = {
          value: scope.textLast,
          title: scope.textTitleLast,
          aClass: scope.textLastClass,
          page: pageCount,
        };
      }
    }

    // Create the Add Item Function
    var buildItem = function (item, disabled) {
      return {
        title: item.title,
        aClass: item.aClass,
        value: item.aClass ? "" : item.value,
        liClass: disabled ? scope.disabledClass : "",
        pgHref: disabled ? "" : scope.pgHref.replace(regex, item.page),
        action: function () {
          if (!disabled) {
            internalAction(scope, item.page);
          }
        },
      };
    };

    // Force disabled if specified
    if (scope.isDisabled) {
      disabled = true;
    }

    // Add alpha items
    if (alpha) {
      var alphaItem = buildItem(alpha, disabled);
      scope.List.push(alphaItem);
    }

    // Add beta items
    if (beta) {
      var betaItem = buildItem(beta, disabled);
      scope.List.push(betaItem);
    }
  }

  /**
   * Adds a range of numbers to our list
   * The range is dependent on the start and finish parameters
   *
   * @param {int} start - The start of the range to add to the paging list
   * @param {int} finish - The end of the range to add to the paging list
   * @param {Object} scope - The local directive scope object
   */
  function addRange(start, finish, scope) {
    // Add our items where i is the page number
    var i = 0;
    for (i = start; i <= finish; i++) {
      var pgHref = scope.pgHref.replace(regex, i);
      var liClass = scope.page === i ? scope.activeClass : "";

      // Handle items that are affected by disabled
      if (scope.isDisabled) {
        pgHref = "";
        liClass = scope.disabledClass;
      }

      scope.List.push({
        value: i,
        title: scope.textTitlePage.replace(regex, i),
        liClass: liClass,
        pgHref: pgHref,
        action: function () {
          internalAction(scope, this.value);
        },
      });
    }
  }

  /**
   * Add Dots ie: 1 2 [...] 10 11 12 [...] 56 57
   * This is my favorite function not going to lie
   *
   * @param {Object} scope - The local directive scope object
   */
  function addDots(scope) {
    scope.List.push({
      value: scope.dots,
      liClass: scope.disabledClass,
    });
  }

  /**
   * Add the first or beginning items in our paging list
   * We leverage the 'next' parameter to determine if the dots are required
   *
   * @param {Object} scope - The local directive scope object
   * @param {int} next - the next page number in the paging sequence
   */
  function addFirst(scope, next) {
    addRange(1, 2, scope);

    // We ignore dots if the next value is 3
    // ie: 1 2 [...] 3 4 5 becomes just 1 2 3 4 5
    if (next !== 3) {
      addDots(scope);
    }
  }

  /**
   * Add the last or end items in our paging list
   * We leverage the 'prev' parameter to determine if the dots are required
   *
   * @param {int} pageCount - The last page number or total page count
   * @param {Object} scope - The local directive scope object
   * @param {int} prev - the previous page number in the paging sequence
   */
  // Add Last Pages
  function addLast(pageCount, scope, prev) {
    // We ignore dots if the previous value is one less that our start range
    // ie: 1 2 3 4 [...] 5 6  becomes just 1 2 3 4 5 6
    if (prev !== pageCount - 2) {
      addDots(scope);
    }

    addRange(pageCount - 1, pageCount, scope);
  }

  /**
   * The main build function used to determine the paging logic
   * Feel free to tweak / fork values for your application
   *
   * @param {Object} scope - The local directive scope object
   * @param {Object} attrs - The local directive attribute object
   */
  function build(scope, attrs) {
    // Block divide by 0 and empty page size
    if (!scope.pageSize || scope.pageSize <= 0) {
      scope.pageSize = 1;
    }

    // Determine the last page or total page count
    var pageCount = Math.ceil(scope.total / scope.pageSize);

    // Set the default scope values where needed
    setScopeValues(scope, attrs);

    // Validate the scope values to protect against strange states
    validateScopeValues(scope, pageCount);

    // Create the beginning and end page values
    var start, finish;

    // Calculate the full adjacency value
    var fullAdjacentSize = scope.adjacent * 2 + 2;

    // Add the Next and Previous buttons to our list
    addPrevNext(scope, pageCount, "prev");

    // If the page count is less than the full adjacnet size
    // Then we simply display all the pages, Otherwise we calculate the proper paging display
    if (pageCount <= fullAdjacentSize + 2) {
      start = 1;
      addRange(start, pageCount, scope);
    } else {
      // Determine if we are showing the beginning of the paging list
      // We know it is the beginning if the page - adjacent is <= 2
      if (scope.page - scope.adjacent <= 2) {
        start = 1;
        finish = 1 + fullAdjacentSize;

        addRange(start, finish, scope);
        addLast(pageCount, scope, finish);
      }

      // Determine if we are showing the middle of the paging list
      // We know we are either in the middle or at the end since the beginning is ruled out above
      // So we simply check if we are not at the end
      // Again 2 is hard coded as we always display two pages after the dots
      else if (scope.page < pageCount - (scope.adjacent + 2)) {
        start = scope.page - scope.adjacent;
        finish = scope.page + scope.adjacent;

        addFirst(scope, start);
        addRange(start, finish, scope);
        addLast(pageCount, scope, finish);
      }

      // If nothing else we conclude we are at the end of the paging list
      // We know this since we have already ruled out the beginning and middle above
      else {
        start = pageCount - fullAdjacentSize;
        finish = pageCount;

        addFirst(scope, start);
        addRange(start, finish, scope);
      }
    }

    // Add the next and last buttons to our paging list
    addPrevNext(scope, pageCount, "next");
  }
});

!(function (t, e) {
  "object" == typeof exports
    ? (module.exports = exports = e())
    : "function" == typeof define && define.amd
    ? define([], e)
    : (t.CryptoJS = e());
})(this, function () {
  var h,
    t,
    e,
    r,
    i,
    n,
    f,
    o,
    s,
    c,
    a,
    l,
    d,
    m,
    x,
    b,
    H,
    z,
    A,
    u,
    p,
    _,
    v,
    y,
    g,
    B,
    w,
    k,
    S,
    C,
    D,
    E,
    R,
    M,
    F,
    P,
    W,
    O,
    I,
    U,
    K,
    X,
    L,
    j,
    N,
    T,
    q,
    Z,
    V,
    G,
    J,
    $,
    Q,
    Y,
    tt,
    et,
    rt,
    it,
    nt,
    ot,
    st,
    ct,
    at,
    ht,
    lt,
    ft,
    dt,
    ut,
    pt,
    _t,
    vt,
    yt,
    gt,
    Bt,
    wt,
    kt,
    St,
    bt =
      bt ||
      (function (l) {
        var t;
        if (
          ("undefined" != typeof window && window.crypto && (t = window.crypto),
          !t &&
            "undefined" != typeof window &&
            window.msCrypto &&
            (t = window.msCrypto),
          !t &&
            "undefined" != typeof global &&
            global.crypto &&
            (t = global.crypto),
          !t && "function" == typeof require)
        )
          try {
            t = require("crypto");
          } catch (t) {}
        function i() {
          if (t) {
            if ("function" == typeof t.getRandomValues)
              try {
                return t.getRandomValues(new Uint32Array(1))[0];
              } catch (t) {}
            if ("function" == typeof t.randomBytes)
              try {
                return t.randomBytes(4).readInt32LE();
              } catch (t) {}
          }
          throw new Error(
            "Native crypto module could not be used to get secure random number."
          );
        }
        var r =
          Object.create ||
          function (t) {
            var e;
            return (n.prototype = t), (e = new n()), (n.prototype = null), e;
          };
        function n() {}
        var e = {},
          o = (e.lib = {}),
          s = (o.Base = {
            extend: function (t) {
              var e = r(this);
              return (
                t && e.mixIn(t),
                (e.hasOwnProperty("init") && this.init !== e.init) ||
                  (e.init = function () {
                    e.$super.init.apply(this, arguments);
                  }),
                ((e.init.prototype = e).$super = this),
                e
              );
            },
            create: function () {
              var t = this.extend();
              return t.init.apply(t, arguments), t;
            },
            init: function () {},
            mixIn: function (t) {
              for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);
              t.hasOwnProperty("toString") && (this.toString = t.toString);
            },
            clone: function () {
              return this.init.prototype.extend(this);
            },
          }),
          f = (o.WordArray = s.extend({
            init: function (t, e) {
              (t = this.words = t || []),
                (this.sigBytes = null != e ? e : 4 * t.length);
            },
            toString: function (t) {
              return (t || a).stringify(this);
            },
            concat: function (t) {
              var e = this.words,
                r = t.words,
                i = this.sigBytes,
                n = t.sigBytes;
              if ((this.clamp(), i % 4))
                for (var o = 0; o < n; o++) {
                  var s = (r[o >>> 2] >>> (24 - (o % 4) * 8)) & 255;
                  e[(i + o) >>> 2] |= s << (24 - ((i + o) % 4) * 8);
                }
              else for (o = 0; o < n; o += 4) e[(i + o) >>> 2] = r[o >>> 2];
              return (this.sigBytes += n), this;
            },
            clamp: function () {
              var t = this.words,
                e = this.sigBytes;
              (t[e >>> 2] &= 4294967295 << (32 - (e % 4) * 8)),
                (t.length = l.ceil(e / 4));
            },
            clone: function () {
              var t = s.clone.call(this);
              return (t.words = this.words.slice(0)), t;
            },
            random: function (t) {
              for (var e = [], r = 0; r < t; r += 4) e.push(i());
              return new f.init(e, t);
            },
          })),
          c = (e.enc = {}),
          a = (c.Hex = {
            stringify: function (t) {
              for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n++) {
                var o = (e[n >>> 2] >>> (24 - (n % 4) * 8)) & 255;
                i.push((o >>> 4).toString(16)), i.push((15 & o).toString(16));
              }
              return i.join("");
            },
            parse: function (t) {
              for (var e = t.length, r = [], i = 0; i < e; i += 2)
                r[i >>> 3] |=
                  parseInt(t.substr(i, 2), 16) << (24 - (i % 8) * 4);
              return new f.init(r, e / 2);
            },
          }),
          h = (c.Latin1 = {
            stringify: function (t) {
              for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n++) {
                var o = (e[n >>> 2] >>> (24 - (n % 4) * 8)) & 255;
                i.push(String.fromCharCode(o));
              }
              return i.join("");
            },
            parse: function (t) {
              for (var e = t.length, r = [], i = 0; i < e; i++)
                r[i >>> 2] |= (255 & t.charCodeAt(i)) << (24 - (i % 4) * 8);
              return new f.init(r, e);
            },
          }),
          d = (c.Utf8 = {
            stringify: function (t) {
              try {
                return decodeURIComponent(escape(h.stringify(t)));
              } catch (t) {
                throw new Error("Malformed UTF-8 data");
              }
            },
            parse: function (t) {
              return h.parse(unescape(encodeURIComponent(t)));
            },
          }),
          u = (o.BufferedBlockAlgorithm = s.extend({
            reset: function () {
              (this._data = new f.init()), (this._nDataBytes = 0);
            },
            _append: function (t) {
              "string" == typeof t && (t = d.parse(t)),
                this._data.concat(t),
                (this._nDataBytes += t.sigBytes);
            },
            _process: function (t) {
              var e,
                r = this._data,
                i = r.words,
                n = r.sigBytes,
                o = this.blockSize,
                s = n / (4 * o),
                c =
                  (s = t
                    ? l.ceil(s)
                    : l.max((0 | s) - this._minBufferSize, 0)) * o,
                a = l.min(4 * c, n);
              if (c) {
                for (var h = 0; h < c; h += o) this._doProcessBlock(i, h);
                (e = i.splice(0, c)), (r.sigBytes -= a);
              }
              return new f.init(e, a);
            },
            clone: function () {
              var t = s.clone.call(this);
              return (t._data = this._data.clone()), t;
            },
            _minBufferSize: 0,
          })),
          p =
            ((o.Hasher = u.extend({
              cfg: s.extend(),
              init: function (t) {
                (this.cfg = this.cfg.extend(t)), this.reset();
              },
              reset: function () {
                u.reset.call(this), this._doReset();
              },
              update: function (t) {
                return this._append(t), this._process(), this;
              },
              finalize: function (t) {
                return t && this._append(t), this._doFinalize();
              },
              blockSize: 16,
              _createHelper: function (r) {
                return function (t, e) {
                  return new r.init(e).finalize(t);
                };
              },
              _createHmacHelper: function (r) {
                return function (t, e) {
                  return new p.HMAC.init(r, e).finalize(t);
                };
              },
            })),
            (e.algo = {}));
        return e;
      })(Math);
  function mt(t, e, r) {
    return t ^ e ^ r;
  }
  function xt(t, e, r) {
    return (t & e) | (~t & r);
  }
  function Ht(t, e, r) {
    return (t | ~e) ^ r;
  }
  function zt(t, e, r) {
    return (t & r) | (e & ~r);
  }
  function At(t, e, r) {
    return t ^ (e | ~r);
  }
  function Ct(t, e) {
    return (t << e) | (t >>> (32 - e));
  }
  function Dt(t, e, r, i) {
    var n,
      o = this._iv;
    o ? ((n = o.slice(0)), (this._iv = void 0)) : (n = this._prevBlock),
      i.encryptBlock(n, 0);
    for (var s = 0; s < r; s++) t[e + s] ^= n[s];
  }
  function Et(t) {
    if (255 == ((t >> 24) & 255)) {
      var e = (t >> 16) & 255,
        r = (t >> 8) & 255,
        i = 255 & t;
      255 === e
        ? ((e = 0), 255 === r ? ((r = 0), 255 === i ? (i = 0) : ++i) : ++r)
        : ++e,
        (t = 0),
        (t += e << 16),
        (t += r << 8),
        (t += i);
    } else t += 1 << 24;
    return t;
  }
  function Rt() {
    for (var t = this._X, e = this._C, r = 0; r < 8; r++) ft[r] = e[r];
    (e[0] = (e[0] + 1295307597 + this._b) | 0),
      (e[1] = (e[1] + 3545052371 + (e[0] >>> 0 < ft[0] >>> 0 ? 1 : 0)) | 0),
      (e[2] = (e[2] + 886263092 + (e[1] >>> 0 < ft[1] >>> 0 ? 1 : 0)) | 0),
      (e[3] = (e[3] + 1295307597 + (e[2] >>> 0 < ft[2] >>> 0 ? 1 : 0)) | 0),
      (e[4] = (e[4] + 3545052371 + (e[3] >>> 0 < ft[3] >>> 0 ? 1 : 0)) | 0),
      (e[5] = (e[5] + 886263092 + (e[4] >>> 0 < ft[4] >>> 0 ? 1 : 0)) | 0),
      (e[6] = (e[6] + 1295307597 + (e[5] >>> 0 < ft[5] >>> 0 ? 1 : 0)) | 0),
      (e[7] = (e[7] + 3545052371 + (e[6] >>> 0 < ft[6] >>> 0 ? 1 : 0)) | 0),
      (this._b = e[7] >>> 0 < ft[7] >>> 0 ? 1 : 0);
    for (r = 0; r < 8; r++) {
      var i = t[r] + e[r],
        n = 65535 & i,
        o = i >>> 16,
        s = ((((n * n) >>> 17) + n * o) >>> 15) + o * o,
        c = (((4294901760 & i) * i) | 0) + (((65535 & i) * i) | 0);
      dt[r] = s ^ c;
    }
    (t[0] =
      (dt[0] +
        ((dt[7] << 16) | (dt[7] >>> 16)) +
        ((dt[6] << 16) | (dt[6] >>> 16))) |
      0),
      (t[1] = (dt[1] + ((dt[0] << 8) | (dt[0] >>> 24)) + dt[7]) | 0),
      (t[2] =
        (dt[2] +
          ((dt[1] << 16) | (dt[1] >>> 16)) +
          ((dt[0] << 16) | (dt[0] >>> 16))) |
        0),
      (t[3] = (dt[3] + ((dt[2] << 8) | (dt[2] >>> 24)) + dt[1]) | 0),
      (t[4] =
        (dt[4] +
          ((dt[3] << 16) | (dt[3] >>> 16)) +
          ((dt[2] << 16) | (dt[2] >>> 16))) |
        0),
      (t[5] = (dt[5] + ((dt[4] << 8) | (dt[4] >>> 24)) + dt[3]) | 0),
      (t[6] =
        (dt[6] +
          ((dt[5] << 16) | (dt[5] >>> 16)) +
          ((dt[4] << 16) | (dt[4] >>> 16))) |
        0),
      (t[7] = (dt[7] + ((dt[6] << 8) | (dt[6] >>> 24)) + dt[5]) | 0);
  }
  function Mt() {
    for (var t = this._X, e = this._C, r = 0; r < 8; r++) wt[r] = e[r];
    (e[0] = (e[0] + 1295307597 + this._b) | 0),
      (e[1] = (e[1] + 3545052371 + (e[0] >>> 0 < wt[0] >>> 0 ? 1 : 0)) | 0),
      (e[2] = (e[2] + 886263092 + (e[1] >>> 0 < wt[1] >>> 0 ? 1 : 0)) | 0),
      (e[3] = (e[3] + 1295307597 + (e[2] >>> 0 < wt[2] >>> 0 ? 1 : 0)) | 0),
      (e[4] = (e[4] + 3545052371 + (e[3] >>> 0 < wt[3] >>> 0 ? 1 : 0)) | 0),
      (e[5] = (e[5] + 886263092 + (e[4] >>> 0 < wt[4] >>> 0 ? 1 : 0)) | 0),
      (e[6] = (e[6] + 1295307597 + (e[5] >>> 0 < wt[5] >>> 0 ? 1 : 0)) | 0),
      (e[7] = (e[7] + 3545052371 + (e[6] >>> 0 < wt[6] >>> 0 ? 1 : 0)) | 0),
      (this._b = e[7] >>> 0 < wt[7] >>> 0 ? 1 : 0);
    for (r = 0; r < 8; r++) {
      var i = t[r] + e[r],
        n = 65535 & i,
        o = i >>> 16,
        s = ((((n * n) >>> 17) + n * o) >>> 15) + o * o,
        c = (((4294901760 & i) * i) | 0) + (((65535 & i) * i) | 0);
      kt[r] = s ^ c;
    }
    (t[0] =
      (kt[0] +
        ((kt[7] << 16) | (kt[7] >>> 16)) +
        ((kt[6] << 16) | (kt[6] >>> 16))) |
      0),
      (t[1] = (kt[1] + ((kt[0] << 8) | (kt[0] >>> 24)) + kt[7]) | 0),
      (t[2] =
        (kt[2] +
          ((kt[1] << 16) | (kt[1] >>> 16)) +
          ((kt[0] << 16) | (kt[0] >>> 16))) |
        0),
      (t[3] = (kt[3] + ((kt[2] << 8) | (kt[2] >>> 24)) + kt[1]) | 0),
      (t[4] =
        (kt[4] +
          ((kt[3] << 16) | (kt[3] >>> 16)) +
          ((kt[2] << 16) | (kt[2] >>> 16))) |
        0),
      (t[5] = (kt[5] + ((kt[4] << 8) | (kt[4] >>> 24)) + kt[3]) | 0),
      (t[6] =
        (kt[6] +
          ((kt[5] << 16) | (kt[5] >>> 16)) +
          ((kt[4] << 16) | (kt[4] >>> 16))) |
        0),
      (t[7] = (kt[7] + ((kt[6] << 8) | (kt[6] >>> 24)) + kt[5]) | 0);
  }
  return (
    (h = bt.lib.WordArray),
    (bt.enc.Base64 = {
      stringify: function (t) {
        var e = t.words,
          r = t.sigBytes,
          i = this._map;
        t.clamp();
        for (var n = [], o = 0; o < r; o += 3)
          for (
            var s =
                (((e[o >>> 2] >>> (24 - (o % 4) * 8)) & 255) << 16) |
                (((e[(o + 1) >>> 2] >>> (24 - ((o + 1) % 4) * 8)) & 255) << 8) |
                ((e[(o + 2) >>> 2] >>> (24 - ((o + 2) % 4) * 8)) & 255),
              c = 0;
            c < 4 && o + 0.75 * c < r;
            c++
          )
            n.push(i.charAt((s >>> (6 * (3 - c))) & 63));
        var a = i.charAt(64);
        if (a) for (; n.length % 4; ) n.push(a);
        return n.join("");
      },
      parse: function (t) {
        var e = t.length,
          r = this._map,
          i = this._reverseMap;
        if (!i) {
          i = this._reverseMap = [];
          for (var n = 0; n < r.length; n++) i[r.charCodeAt(n)] = n;
        }
        var o = r.charAt(64);
        if (o) {
          var s = t.indexOf(o);
          -1 !== s && (e = s);
        }
        return (function (t, e, r) {
          for (var i = [], n = 0, o = 0; o < e; o++)
            if (o % 4) {
              var s = r[t.charCodeAt(o - 1)] << ((o % 4) * 2),
                c = r[t.charCodeAt(o)] >>> (6 - (o % 4) * 2),
                a = s | c;
              (i[n >>> 2] |= a << (24 - (n % 4) * 8)), n++;
            }
          return h.create(i, n);
        })(t, e, i);
      },
      _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    }),
    (function (l) {
      var t = bt,
        e = t.lib,
        r = e.WordArray,
        i = e.Hasher,
        n = t.algo,
        H = [];
      !(function () {
        for (var t = 0; t < 64; t++)
          H[t] = (4294967296 * l.abs(l.sin(t + 1))) | 0;
      })();
      var o = (n.MD5 = i.extend({
        _doReset: function () {
          this._hash = new r.init([
            1732584193,
            4023233417,
            2562383102,
            271733878,
          ]);
        },
        _doProcessBlock: function (t, e) {
          for (var r = 0; r < 16; r++) {
            var i = e + r,
              n = t[i];
            t[i] =
              (16711935 & ((n << 8) | (n >>> 24))) |
              (4278255360 & ((n << 24) | (n >>> 8)));
          }
          var o = this._hash.words,
            s = t[e + 0],
            c = t[e + 1],
            a = t[e + 2],
            h = t[e + 3],
            l = t[e + 4],
            f = t[e + 5],
            d = t[e + 6],
            u = t[e + 7],
            p = t[e + 8],
            _ = t[e + 9],
            v = t[e + 10],
            y = t[e + 11],
            g = t[e + 12],
            B = t[e + 13],
            w = t[e + 14],
            k = t[e + 15],
            S = o[0],
            m = o[1],
            x = o[2],
            b = o[3];
          (S = z(S, m, x, b, s, 7, H[0])),
            (b = z(b, S, m, x, c, 12, H[1])),
            (x = z(x, b, S, m, a, 17, H[2])),
            (m = z(m, x, b, S, h, 22, H[3])),
            (S = z(S, m, x, b, l, 7, H[4])),
            (b = z(b, S, m, x, f, 12, H[5])),
            (x = z(x, b, S, m, d, 17, H[6])),
            (m = z(m, x, b, S, u, 22, H[7])),
            (S = z(S, m, x, b, p, 7, H[8])),
            (b = z(b, S, m, x, _, 12, H[9])),
            (x = z(x, b, S, m, v, 17, H[10])),
            (m = z(m, x, b, S, y, 22, H[11])),
            (S = z(S, m, x, b, g, 7, H[12])),
            (b = z(b, S, m, x, B, 12, H[13])),
            (x = z(x, b, S, m, w, 17, H[14])),
            (S = A(S, (m = z(m, x, b, S, k, 22, H[15])), x, b, c, 5, H[16])),
            (b = A(b, S, m, x, d, 9, H[17])),
            (x = A(x, b, S, m, y, 14, H[18])),
            (m = A(m, x, b, S, s, 20, H[19])),
            (S = A(S, m, x, b, f, 5, H[20])),
            (b = A(b, S, m, x, v, 9, H[21])),
            (x = A(x, b, S, m, k, 14, H[22])),
            (m = A(m, x, b, S, l, 20, H[23])),
            (S = A(S, m, x, b, _, 5, H[24])),
            (b = A(b, S, m, x, w, 9, H[25])),
            (x = A(x, b, S, m, h, 14, H[26])),
            (m = A(m, x, b, S, p, 20, H[27])),
            (S = A(S, m, x, b, B, 5, H[28])),
            (b = A(b, S, m, x, a, 9, H[29])),
            (x = A(x, b, S, m, u, 14, H[30])),
            (S = C(S, (m = A(m, x, b, S, g, 20, H[31])), x, b, f, 4, H[32])),
            (b = C(b, S, m, x, p, 11, H[33])),
            (x = C(x, b, S, m, y, 16, H[34])),
            (m = C(m, x, b, S, w, 23, H[35])),
            (S = C(S, m, x, b, c, 4, H[36])),
            (b = C(b, S, m, x, l, 11, H[37])),
            (x = C(x, b, S, m, u, 16, H[38])),
            (m = C(m, x, b, S, v, 23, H[39])),
            (S = C(S, m, x, b, B, 4, H[40])),
            (b = C(b, S, m, x, s, 11, H[41])),
            (x = C(x, b, S, m, h, 16, H[42])),
            (m = C(m, x, b, S, d, 23, H[43])),
            (S = C(S, m, x, b, _, 4, H[44])),
            (b = C(b, S, m, x, g, 11, H[45])),
            (x = C(x, b, S, m, k, 16, H[46])),
            (S = D(S, (m = C(m, x, b, S, a, 23, H[47])), x, b, s, 6, H[48])),
            (b = D(b, S, m, x, u, 10, H[49])),
            (x = D(x, b, S, m, w, 15, H[50])),
            (m = D(m, x, b, S, f, 21, H[51])),
            (S = D(S, m, x, b, g, 6, H[52])),
            (b = D(b, S, m, x, h, 10, H[53])),
            (x = D(x, b, S, m, v, 15, H[54])),
            (m = D(m, x, b, S, c, 21, H[55])),
            (S = D(S, m, x, b, p, 6, H[56])),
            (b = D(b, S, m, x, k, 10, H[57])),
            (x = D(x, b, S, m, d, 15, H[58])),
            (m = D(m, x, b, S, B, 21, H[59])),
            (S = D(S, m, x, b, l, 6, H[60])),
            (b = D(b, S, m, x, y, 10, H[61])),
            (x = D(x, b, S, m, a, 15, H[62])),
            (m = D(m, x, b, S, _, 21, H[63])),
            (o[0] = (o[0] + S) | 0),
            (o[1] = (o[1] + m) | 0),
            (o[2] = (o[2] + x) | 0),
            (o[3] = (o[3] + b) | 0);
        },
        _doFinalize: function () {
          var t = this._data,
            e = t.words,
            r = 8 * this._nDataBytes,
            i = 8 * t.sigBytes;
          e[i >>> 5] |= 128 << (24 - (i % 32));
          var n = l.floor(r / 4294967296),
            o = r;
          (e[15 + (((64 + i) >>> 9) << 4)] =
            (16711935 & ((n << 8) | (n >>> 24))) |
            (4278255360 & ((n << 24) | (n >>> 8)))),
            (e[14 + (((64 + i) >>> 9) << 4)] =
              (16711935 & ((o << 8) | (o >>> 24))) |
              (4278255360 & ((o << 24) | (o >>> 8)))),
            (t.sigBytes = 4 * (e.length + 1)),
            this._process();
          for (var s = this._hash, c = s.words, a = 0; a < 4; a++) {
            var h = c[a];
            c[a] =
              (16711935 & ((h << 8) | (h >>> 24))) |
              (4278255360 & ((h << 24) | (h >>> 8)));
          }
          return s;
        },
        clone: function () {
          var t = i.clone.call(this);
          return (t._hash = this._hash.clone()), t;
        },
      }));
      function z(t, e, r, i, n, o, s) {
        var c = t + ((e & r) | (~e & i)) + n + s;
        return ((c << o) | (c >>> (32 - o))) + e;
      }
      function A(t, e, r, i, n, o, s) {
        var c = t + ((e & i) | (r & ~i)) + n + s;
        return ((c << o) | (c >>> (32 - o))) + e;
      }
      function C(t, e, r, i, n, o, s) {
        var c = t + (e ^ r ^ i) + n + s;
        return ((c << o) | (c >>> (32 - o))) + e;
      }
      function D(t, e, r, i, n, o, s) {
        var c = t + (r ^ (e | ~i)) + n + s;
        return ((c << o) | (c >>> (32 - o))) + e;
      }
      (t.MD5 = i._createHelper(o)), (t.HmacMD5 = i._createHmacHelper(o));
    })(Math),
    (e = (t = bt).lib),
    (r = e.WordArray),
    (i = e.Hasher),
    (n = t.algo),
    (f = []),
    (o = n.SHA1 = i.extend({
      _doReset: function () {
        this._hash = new r.init([
          1732584193,
          4023233417,
          2562383102,
          271733878,
          3285377520,
        ]);
      },
      _doProcessBlock: function (t, e) {
        for (
          var r = this._hash.words,
            i = r[0],
            n = r[1],
            o = r[2],
            s = r[3],
            c = r[4],
            a = 0;
          a < 80;
          a++
        ) {
          if (a < 16) f[a] = 0 | t[e + a];
          else {
            var h = f[a - 3] ^ f[a - 8] ^ f[a - 14] ^ f[a - 16];
            f[a] = (h << 1) | (h >>> 31);
          }
          var l = ((i << 5) | (i >>> 27)) + c + f[a];
          (l +=
            a < 20
              ? 1518500249 + ((n & o) | (~n & s))
              : a < 40
              ? 1859775393 + (n ^ o ^ s)
              : a < 60
              ? ((n & o) | (n & s) | (o & s)) - 1894007588
              : (n ^ o ^ s) - 899497514),
            (c = s),
            (s = o),
            (o = (n << 30) | (n >>> 2)),
            (n = i),
            (i = l);
        }
        (r[0] = (r[0] + i) | 0),
          (r[1] = (r[1] + n) | 0),
          (r[2] = (r[2] + o) | 0),
          (r[3] = (r[3] + s) | 0),
          (r[4] = (r[4] + c) | 0);
      },
      _doFinalize: function () {
        var t = this._data,
          e = t.words,
          r = 8 * this._nDataBytes,
          i = 8 * t.sigBytes;
        return (
          (e[i >>> 5] |= 128 << (24 - (i % 32))),
          (e[14 + (((64 + i) >>> 9) << 4)] = Math.floor(r / 4294967296)),
          (e[15 + (((64 + i) >>> 9) << 4)] = r),
          (t.sigBytes = 4 * e.length),
          this._process(),
          this._hash
        );
      },
      clone: function () {
        var t = i.clone.call(this);
        return (t._hash = this._hash.clone()), t;
      },
    })),
    (t.SHA1 = i._createHelper(o)),
    (t.HmacSHA1 = i._createHmacHelper(o)),
    (function (n) {
      var t = bt,
        e = t.lib,
        r = e.WordArray,
        i = e.Hasher,
        o = t.algo,
        s = [],
        B = [];
      !(function () {
        function t(t) {
          for (var e = n.sqrt(t), r = 2; r <= e; r++) if (!(t % r)) return;
          return 1;
        }
        function e(t) {
          return (4294967296 * (t - (0 | t))) | 0;
        }
        for (var r = 2, i = 0; i < 64; )
          t(r) &&
            (i < 8 && (s[i] = e(n.pow(r, 0.5))),
            (B[i] = e(n.pow(r, 1 / 3))),
            i++),
            r++;
      })();
      var w = [],
        c = (o.SHA256 = i.extend({
          _doReset: function () {
            this._hash = new r.init(s.slice(0));
          },
          _doProcessBlock: function (t, e) {
            for (
              var r = this._hash.words,
                i = r[0],
                n = r[1],
                o = r[2],
                s = r[3],
                c = r[4],
                a = r[5],
                h = r[6],
                l = r[7],
                f = 0;
              f < 64;
              f++
            ) {
              if (f < 16) w[f] = 0 | t[e + f];
              else {
                var d = w[f - 15],
                  u =
                    ((d << 25) | (d >>> 7)) ^
                    ((d << 14) | (d >>> 18)) ^
                    (d >>> 3),
                  p = w[f - 2],
                  _ =
                    ((p << 15) | (p >>> 17)) ^
                    ((p << 13) | (p >>> 19)) ^
                    (p >>> 10);
                w[f] = u + w[f - 7] + _ + w[f - 16];
              }
              var v = (i & n) ^ (i & o) ^ (n & o),
                y =
                  ((i << 30) | (i >>> 2)) ^
                  ((i << 19) | (i >>> 13)) ^
                  ((i << 10) | (i >>> 22)),
                g =
                  l +
                  (((c << 26) | (c >>> 6)) ^
                    ((c << 21) | (c >>> 11)) ^
                    ((c << 7) | (c >>> 25))) +
                  ((c & a) ^ (~c & h)) +
                  B[f] +
                  w[f];
              (l = h),
                (h = a),
                (a = c),
                (c = (s + g) | 0),
                (s = o),
                (o = n),
                (n = i),
                (i = (g + (y + v)) | 0);
            }
            (r[0] = (r[0] + i) | 0),
              (r[1] = (r[1] + n) | 0),
              (r[2] = (r[2] + o) | 0),
              (r[3] = (r[3] + s) | 0),
              (r[4] = (r[4] + c) | 0),
              (r[5] = (r[5] + a) | 0),
              (r[6] = (r[6] + h) | 0),
              (r[7] = (r[7] + l) | 0);
          },
          _doFinalize: function () {
            var t = this._data,
              e = t.words,
              r = 8 * this._nDataBytes,
              i = 8 * t.sigBytes;
            return (
              (e[i >>> 5] |= 128 << (24 - (i % 32))),
              (e[14 + (((64 + i) >>> 9) << 4)] = n.floor(r / 4294967296)),
              (e[15 + (((64 + i) >>> 9) << 4)] = r),
              (t.sigBytes = 4 * e.length),
              this._process(),
              this._hash
            );
          },
          clone: function () {
            var t = i.clone.call(this);
            return (t._hash = this._hash.clone()), t;
          },
        }));
      (t.SHA256 = i._createHelper(c)), (t.HmacSHA256 = i._createHmacHelper(c));
    })(Math),
    (function () {
      var n = bt.lib.WordArray,
        t = bt.enc;
      t.Utf16 = t.Utf16BE = {
        stringify: function (t) {
          for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n += 2) {
            var o = (e[n >>> 2] >>> (16 - (n % 4) * 8)) & 65535;
            i.push(String.fromCharCode(o));
          }
          return i.join("");
        },
        parse: function (t) {
          for (var e = t.length, r = [], i = 0; i < e; i++)
            r[i >>> 1] |= t.charCodeAt(i) << (16 - (i % 2) * 16);
          return n.create(r, 2 * e);
        },
      };
      function s(t) {
        return ((t << 8) & 4278255360) | ((t >>> 8) & 16711935);
      }
      t.Utf16LE = {
        stringify: function (t) {
          for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n += 2) {
            var o = s((e[n >>> 2] >>> (16 - (n % 4) * 8)) & 65535);
            i.push(String.fromCharCode(o));
          }
          return i.join("");
        },
        parse: function (t) {
          for (var e = t.length, r = [], i = 0; i < e; i++)
            r[i >>> 1] |= s(t.charCodeAt(i) << (16 - (i % 2) * 16));
          return n.create(r, 2 * e);
        },
      };
    })(),
    (function () {
      if ("function" == typeof ArrayBuffer) {
        var t = bt.lib.WordArray,
          n = t.init;
        (t.init = function (t) {
          if (
            (t instanceof ArrayBuffer && (t = new Uint8Array(t)),
            (t instanceof Int8Array ||
              ("undefined" != typeof Uint8ClampedArray &&
                t instanceof Uint8ClampedArray) ||
              t instanceof Int16Array ||
              t instanceof Uint16Array ||
              t instanceof Int32Array ||
              t instanceof Uint32Array ||
              t instanceof Float32Array ||
              t instanceof Float64Array) &&
              (t = new Uint8Array(t.buffer, t.byteOffset, t.byteLength)),
            t instanceof Uint8Array)
          ) {
            for (var e = t.byteLength, r = [], i = 0; i < e; i++)
              r[i >>> 2] |= t[i] << (24 - (i % 4) * 8);
            n.call(this, r, e);
          } else n.apply(this, arguments);
        }).prototype = t;
      }
    })(),
    Math,
    (c = (s = bt).lib),
    (a = c.WordArray),
    (l = c.Hasher),
    (d = s.algo),
    (m = a.create([
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      12,
      13,
      14,
      15,
      7,
      4,
      13,
      1,
      10,
      6,
      15,
      3,
      12,
      0,
      9,
      5,
      2,
      14,
      11,
      8,
      3,
      10,
      14,
      4,
      9,
      15,
      8,
      1,
      2,
      7,
      0,
      6,
      13,
      11,
      5,
      12,
      1,
      9,
      11,
      10,
      0,
      8,
      12,
      4,
      13,
      3,
      7,
      15,
      14,
      5,
      6,
      2,
      4,
      0,
      5,
      9,
      7,
      12,
      2,
      10,
      14,
      1,
      3,
      8,
      11,
      6,
      15,
      13,
    ])),
    (x = a.create([
      5,
      14,
      7,
      0,
      9,
      2,
      11,
      4,
      13,
      6,
      15,
      8,
      1,
      10,
      3,
      12,
      6,
      11,
      3,
      7,
      0,
      13,
      5,
      10,
      14,
      15,
      8,
      12,
      4,
      9,
      1,
      2,
      15,
      5,
      1,
      3,
      7,
      14,
      6,
      9,
      11,
      8,
      12,
      2,
      10,
      0,
      4,
      13,
      8,
      6,
      4,
      1,
      3,
      11,
      15,
      0,
      5,
      12,
      2,
      13,
      9,
      7,
      10,
      14,
      12,
      15,
      10,
      4,
      1,
      5,
      8,
      7,
      6,
      2,
      13,
      14,
      0,
      3,
      9,
      11,
    ])),
    (b = a.create([
      11,
      14,
      15,
      12,
      5,
      8,
      7,
      9,
      11,
      13,
      14,
      15,
      6,
      7,
      9,
      8,
      7,
      6,
      8,
      13,
      11,
      9,
      7,
      15,
      7,
      12,
      15,
      9,
      11,
      7,
      13,
      12,
      11,
      13,
      6,
      7,
      14,
      9,
      13,
      15,
      14,
      8,
      13,
      6,
      5,
      12,
      7,
      5,
      11,
      12,
      14,
      15,
      14,
      15,
      9,
      8,
      9,
      14,
      5,
      6,
      8,
      6,
      5,
      12,
      9,
      15,
      5,
      11,
      6,
      8,
      13,
      12,
      5,
      12,
      13,
      14,
      11,
      8,
      5,
      6,
    ])),
    (H = a.create([
      8,
      9,
      9,
      11,
      13,
      15,
      15,
      5,
      7,
      7,
      8,
      11,
      14,
      14,
      12,
      6,
      9,
      13,
      15,
      7,
      12,
      8,
      9,
      11,
      7,
      7,
      12,
      7,
      6,
      15,
      13,
      11,
      9,
      7,
      15,
      11,
      8,
      6,
      6,
      14,
      12,
      13,
      5,
      14,
      13,
      13,
      7,
      5,
      15,
      5,
      8,
      11,
      14,
      14,
      6,
      14,
      6,
      9,
      12,
      9,
      12,
      5,
      15,
      8,
      8,
      5,
      12,
      9,
      12,
      5,
      14,
      6,
      8,
      13,
      6,
      5,
      15,
      13,
      11,
      11,
    ])),
    (z = a.create([0, 1518500249, 1859775393, 2400959708, 2840853838])),
    (A = a.create([1352829926, 1548603684, 1836072691, 2053994217, 0])),
    (u = d.RIPEMD160 = l.extend({
      _doReset: function () {
        this._hash = a.create([
          1732584193,
          4023233417,
          2562383102,
          271733878,
          3285377520,
        ]);
      },
      _doProcessBlock: function (t, e) {
        for (var r = 0; r < 16; r++) {
          var i = e + r,
            n = t[i];
          t[i] =
            (16711935 & ((n << 8) | (n >>> 24))) |
            (4278255360 & ((n << 24) | (n >>> 8)));
        }
        var o,
          s,
          c,
          a,
          h,
          l,
          f,
          d,
          u,
          p,
          _,
          v = this._hash.words,
          y = z.words,
          g = A.words,
          B = m.words,
          w = x.words,
          k = b.words,
          S = H.words;
        (l = o = v[0]),
          (f = s = v[1]),
          (d = c = v[2]),
          (u = a = v[3]),
          (p = h = v[4]);
        for (r = 0; r < 80; r += 1)
          (_ = (o + t[e + B[r]]) | 0),
            (_ +=
              r < 16
                ? mt(s, c, a) + y[0]
                : r < 32
                ? xt(s, c, a) + y[1]
                : r < 48
                ? Ht(s, c, a) + y[2]
                : r < 64
                ? zt(s, c, a) + y[3]
                : At(s, c, a) + y[4]),
            (_ = ((_ = Ct((_ |= 0), k[r])) + h) | 0),
            (o = h),
            (h = a),
            (a = Ct(c, 10)),
            (c = s),
            (s = _),
            (_ = (l + t[e + w[r]]) | 0),
            (_ +=
              r < 16
                ? At(f, d, u) + g[0]
                : r < 32
                ? zt(f, d, u) + g[1]
                : r < 48
                ? Ht(f, d, u) + g[2]
                : r < 64
                ? xt(f, d, u) + g[3]
                : mt(f, d, u) + g[4]),
            (_ = ((_ = Ct((_ |= 0), S[r])) + p) | 0),
            (l = p),
            (p = u),
            (u = Ct(d, 10)),
            (d = f),
            (f = _);
        (_ = (v[1] + c + u) | 0),
          (v[1] = (v[2] + a + p) | 0),
          (v[2] = (v[3] + h + l) | 0),
          (v[3] = (v[4] + o + f) | 0),
          (v[4] = (v[0] + s + d) | 0),
          (v[0] = _);
      },
      _doFinalize: function () {
        var t = this._data,
          e = t.words,
          r = 8 * this._nDataBytes,
          i = 8 * t.sigBytes;
        (e[i >>> 5] |= 128 << (24 - (i % 32))),
          (e[14 + (((64 + i) >>> 9) << 4)] =
            (16711935 & ((r << 8) | (r >>> 24))) |
            (4278255360 & ((r << 24) | (r >>> 8)))),
          (t.sigBytes = 4 * (e.length + 1)),
          this._process();
        for (var n = this._hash, o = n.words, s = 0; s < 5; s++) {
          var c = o[s];
          o[s] =
            (16711935 & ((c << 8) | (c >>> 24))) |
            (4278255360 & ((c << 24) | (c >>> 8)));
        }
        return n;
      },
      clone: function () {
        var t = l.clone.call(this);
        return (t._hash = this._hash.clone()), t;
      },
    })),
    (s.RIPEMD160 = l._createHelper(u)),
    (s.HmacRIPEMD160 = l._createHmacHelper(u)),
    (p = bt.lib.Base),
    (_ = bt.enc.Utf8),
    (bt.algo.HMAC = p.extend({
      init: function (t, e) {
        (t = this._hasher = new t.init()),
          "string" == typeof e && (e = _.parse(e));
        var r = t.blockSize,
          i = 4 * r;
        e.sigBytes > i && (e = t.finalize(e)), e.clamp();
        for (
          var n = (this._oKey = e.clone()),
            o = (this._iKey = e.clone()),
            s = n.words,
            c = o.words,
            a = 0;
          a < r;
          a++
        )
          (s[a] ^= 1549556828), (c[a] ^= 909522486);
        (n.sigBytes = o.sigBytes = i), this.reset();
      },
      reset: function () {
        var t = this._hasher;
        t.reset(), t.update(this._iKey);
      },
      update: function (t) {
        return this._hasher.update(t), this;
      },
      finalize: function (t) {
        var e = this._hasher,
          r = e.finalize(t);
        return e.reset(), e.finalize(this._oKey.clone().concat(r));
      },
    })),
    (y = (v = bt).lib),
    (g = y.Base),
    (B = y.WordArray),
    (w = v.algo),
    (k = w.SHA1),
    (S = w.HMAC),
    (C = w.PBKDF2 = g.extend({
      cfg: g.extend({ keySize: 4, hasher: k, iterations: 1 }),
      init: function (t) {
        this.cfg = this.cfg.extend(t);
      },
      compute: function (t, e) {
        for (
          var r = this.cfg,
            i = S.create(r.hasher, t),
            n = B.create(),
            o = B.create([1]),
            s = n.words,
            c = o.words,
            a = r.keySize,
            h = r.iterations;
          s.length < a;

        ) {
          var l = i.update(e).finalize(o);
          i.reset();
          for (var f = l.words, d = f.length, u = l, p = 1; p < h; p++) {
            (u = i.finalize(u)), i.reset();
            for (var _ = u.words, v = 0; v < d; v++) f[v] ^= _[v];
          }
          n.concat(l), c[0]++;
        }
        return (n.sigBytes = 4 * a), n;
      },
    })),
    (v.PBKDF2 = function (t, e, r) {
      return C.create(r).compute(t, e);
    }),
    (E = (D = bt).lib),
    (R = E.Base),
    (M = E.WordArray),
    (F = D.algo),
    (P = F.MD5),
    (W = F.EvpKDF = R.extend({
      cfg: R.extend({ keySize: 4, hasher: P, iterations: 1 }),
      init: function (t) {
        this.cfg = this.cfg.extend(t);
      },
      compute: function (t, e) {
        for (
          var r,
            i = this.cfg,
            n = i.hasher.create(),
            o = M.create(),
            s = o.words,
            c = i.keySize,
            a = i.iterations;
          s.length < c;

        ) {
          r && n.update(r), (r = n.update(t).finalize(e)), n.reset();
          for (var h = 1; h < a; h++) (r = n.finalize(r)), n.reset();
          o.concat(r);
        }
        return (o.sigBytes = 4 * c), o;
      },
    })),
    (D.EvpKDF = function (t, e, r) {
      return W.create(r).compute(t, e);
    }),
    (I = (O = bt).lib.WordArray),
    (U = O.algo),
    (K = U.SHA256),
    (X = U.SHA224 = K.extend({
      _doReset: function () {
        this._hash = new I.init([
          3238371032,
          914150663,
          812702999,
          4144912697,
          4290775857,
          1750603025,
          1694076839,
          3204075428,
        ]);
      },
      _doFinalize: function () {
        var t = K._doFinalize.call(this);
        return (t.sigBytes -= 4), t;
      },
    })),
    (O.SHA224 = K._createHelper(X)),
    (O.HmacSHA224 = K._createHmacHelper(X)),
    (L = bt.lib),
    (j = L.Base),
    (N = L.WordArray),
    ((T = bt.x64 = {}).Word = j.extend({
      init: function (t, e) {
        (this.high = t), (this.low = e);
      },
    })),
    (T.WordArray = j.extend({
      init: function (t, e) {
        (t = this.words = t || []),
          (this.sigBytes = null != e ? e : 8 * t.length);
      },
      toX32: function () {
        for (var t = this.words, e = t.length, r = [], i = 0; i < e; i++) {
          var n = t[i];
          r.push(n.high), r.push(n.low);
        }
        return N.create(r, this.sigBytes);
      },
      clone: function () {
        for (
          var t = j.clone.call(this),
            e = (t.words = this.words.slice(0)),
            r = e.length,
            i = 0;
          i < r;
          i++
        )
          e[i] = e[i].clone();
        return t;
      },
    })),
    (function (d) {
      var t = bt,
        e = t.lib,
        u = e.WordArray,
        i = e.Hasher,
        l = t.x64.Word,
        r = t.algo,
        C = [],
        D = [],
        E = [];
      !(function () {
        for (var t = 1, e = 0, r = 0; r < 24; r++) {
          C[t + 5 * e] = (((r + 1) * (r + 2)) / 2) % 64;
          var i = (2 * t + 3 * e) % 5;
          (t = e % 5), (e = i);
        }
        for (t = 0; t < 5; t++)
          for (e = 0; e < 5; e++) D[t + 5 * e] = e + ((2 * t + 3 * e) % 5) * 5;
        for (var n = 1, o = 0; o < 24; o++) {
          for (var s = 0, c = 0, a = 0; a < 7; a++) {
            if (1 & n) {
              var h = (1 << a) - 1;
              h < 32 ? (c ^= 1 << h) : (s ^= 1 << (h - 32));
            }
            128 & n ? (n = (n << 1) ^ 113) : (n <<= 1);
          }
          E[o] = l.create(s, c);
        }
      })();
      var R = [];
      !(function () {
        for (var t = 0; t < 25; t++) R[t] = l.create();
      })();
      var n = (r.SHA3 = i.extend({
        cfg: i.cfg.extend({ outputLength: 512 }),
        _doReset: function () {
          for (var t = (this._state = []), e = 0; e < 25; e++)
            t[e] = new l.init();
          this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;
        },
        _doProcessBlock: function (t, e) {
          for (var r = this._state, i = this.blockSize / 2, n = 0; n < i; n++) {
            var o = t[e + 2 * n],
              s = t[e + 2 * n + 1];
            (o =
              (16711935 & ((o << 8) | (o >>> 24))) |
              (4278255360 & ((o << 24) | (o >>> 8)))),
              (s =
                (16711935 & ((s << 8) | (s >>> 24))) |
                (4278255360 & ((s << 24) | (s >>> 8)))),
              ((x = r[n]).high ^= s),
              (x.low ^= o);
          }
          for (var c = 0; c < 24; c++) {
            for (var a = 0; a < 5; a++) {
              for (var h = 0, l = 0, f = 0; f < 5; f++) {
                (h ^= (x = r[a + 5 * f]).high), (l ^= x.low);
              }
              var d = R[a];
              (d.high = h), (d.low = l);
            }
            for (a = 0; a < 5; a++) {
              var u = R[(a + 4) % 5],
                p = R[(a + 1) % 5],
                _ = p.high,
                v = p.low;
              for (
                h = u.high ^ ((_ << 1) | (v >>> 31)),
                  l = u.low ^ ((v << 1) | (_ >>> 31)),
                  f = 0;
                f < 5;
                f++
              ) {
                ((x = r[a + 5 * f]).high ^= h), (x.low ^= l);
              }
            }
            for (var y = 1; y < 25; y++) {
              var g = (x = r[y]).high,
                B = x.low,
                w = C[y];
              l =
                w < 32
                  ? ((h = (g << w) | (B >>> (32 - w))),
                    (B << w) | (g >>> (32 - w)))
                  : ((h = (B << (w - 32)) | (g >>> (64 - w))),
                    (g << (w - 32)) | (B >>> (64 - w)));
              var k = R[D[y]];
              (k.high = h), (k.low = l);
            }
            var S = R[0],
              m = r[0];
            (S.high = m.high), (S.low = m.low);
            for (a = 0; a < 5; a++)
              for (f = 0; f < 5; f++) {
                var x = r[(y = a + 5 * f)],
                  b = R[y],
                  H = R[((a + 1) % 5) + 5 * f],
                  z = R[((a + 2) % 5) + 5 * f];
                (x.high = b.high ^ (~H.high & z.high)),
                  (x.low = b.low ^ (~H.low & z.low));
              }
            x = r[0];
            var A = E[c];
            (x.high ^= A.high), (x.low ^= A.low);
          }
        },
        _doFinalize: function () {
          var t = this._data,
            e = t.words,
            r = (this._nDataBytes, 8 * t.sigBytes),
            i = 32 * this.blockSize;
          (e[r >>> 5] |= 1 << (24 - (r % 32))),
            (e[((d.ceil((1 + r) / i) * i) >>> 5) - 1] |= 128),
            (t.sigBytes = 4 * e.length),
            this._process();
          for (
            var n = this._state,
              o = this.cfg.outputLength / 8,
              s = o / 8,
              c = [],
              a = 0;
            a < s;
            a++
          ) {
            var h = n[a],
              l = h.high,
              f = h.low;
            (l =
              (16711935 & ((l << 8) | (l >>> 24))) |
              (4278255360 & ((l << 24) | (l >>> 8)))),
              (f =
                (16711935 & ((f << 8) | (f >>> 24))) |
                (4278255360 & ((f << 24) | (f >>> 8)))),
              c.push(f),
              c.push(l);
          }
          return new u.init(c, o);
        },
        clone: function () {
          for (
            var t = i.clone.call(this),
              e = (t._state = this._state.slice(0)),
              r = 0;
            r < 25;
            r++
          )
            e[r] = e[r].clone();
          return t;
        },
      }));
      (t.SHA3 = i._createHelper(n)), (t.HmacSHA3 = i._createHmacHelper(n));
    })(Math),
    (function () {
      var t = bt,
        e = t.lib.Hasher,
        r = t.x64,
        i = r.Word,
        n = r.WordArray,
        o = t.algo;
      function s() {
        return i.create.apply(i, arguments);
      }
      var mt = [
          s(1116352408, 3609767458),
          s(1899447441, 602891725),
          s(3049323471, 3964484399),
          s(3921009573, 2173295548),
          s(961987163, 4081628472),
          s(1508970993, 3053834265),
          s(2453635748, 2937671579),
          s(2870763221, 3664609560),
          s(3624381080, 2734883394),
          s(310598401, 1164996542),
          s(607225278, 1323610764),
          s(1426881987, 3590304994),
          s(1925078388, 4068182383),
          s(2162078206, 991336113),
          s(2614888103, 633803317),
          s(3248222580, 3479774868),
          s(3835390401, 2666613458),
          s(4022224774, 944711139),
          s(264347078, 2341262773),
          s(604807628, 2007800933),
          s(770255983, 1495990901),
          s(1249150122, 1856431235),
          s(1555081692, 3175218132),
          s(1996064986, 2198950837),
          s(2554220882, 3999719339),
          s(2821834349, 766784016),
          s(2952996808, 2566594879),
          s(3210313671, 3203337956),
          s(3336571891, 1034457026),
          s(3584528711, 2466948901),
          s(113926993, 3758326383),
          s(338241895, 168717936),
          s(666307205, 1188179964),
          s(773529912, 1546045734),
          s(1294757372, 1522805485),
          s(1396182291, 2643833823),
          s(1695183700, 2343527390),
          s(1986661051, 1014477480),
          s(2177026350, 1206759142),
          s(2456956037, 344077627),
          s(2730485921, 1290863460),
          s(2820302411, 3158454273),
          s(3259730800, 3505952657),
          s(3345764771, 106217008),
          s(3516065817, 3606008344),
          s(3600352804, 1432725776),
          s(4094571909, 1467031594),
          s(275423344, 851169720),
          s(430227734, 3100823752),
          s(506948616, 1363258195),
          s(659060556, 3750685593),
          s(883997877, 3785050280),
          s(958139571, 3318307427),
          s(1322822218, 3812723403),
          s(1537002063, 2003034995),
          s(1747873779, 3602036899),
          s(1955562222, 1575990012),
          s(2024104815, 1125592928),
          s(2227730452, 2716904306),
          s(2361852424, 442776044),
          s(2428436474, 593698344),
          s(2756734187, 3733110249),
          s(3204031479, 2999351573),
          s(3329325298, 3815920427),
          s(3391569614, 3928383900),
          s(3515267271, 566280711),
          s(3940187606, 3454069534),
          s(4118630271, 4000239992),
          s(116418474, 1914138554),
          s(174292421, 2731055270),
          s(289380356, 3203993006),
          s(460393269, 320620315),
          s(685471733, 587496836),
          s(852142971, 1086792851),
          s(1017036298, 365543100),
          s(1126000580, 2618297676),
          s(1288033470, 3409855158),
          s(1501505948, 4234509866),
          s(1607167915, 987167468),
          s(1816402316, 1246189591),
        ],
        xt = [];
      !(function () {
        for (var t = 0; t < 80; t++) xt[t] = s();
      })();
      var c = (o.SHA512 = e.extend({
        _doReset: function () {
          this._hash = new n.init([
            new i.init(1779033703, 4089235720),
            new i.init(3144134277, 2227873595),
            new i.init(1013904242, 4271175723),
            new i.init(2773480762, 1595750129),
            new i.init(1359893119, 2917565137),
            new i.init(2600822924, 725511199),
            new i.init(528734635, 4215389547),
            new i.init(1541459225, 327033209),
          ]);
        },
        _doProcessBlock: function (t, e) {
          for (
            var r = this._hash.words,
              i = r[0],
              n = r[1],
              o = r[2],
              s = r[3],
              c = r[4],
              a = r[5],
              h = r[6],
              l = r[7],
              f = i.high,
              d = i.low,
              u = n.high,
              p = n.low,
              _ = o.high,
              v = o.low,
              y = s.high,
              g = s.low,
              B = c.high,
              w = c.low,
              k = a.high,
              S = a.low,
              m = h.high,
              x = h.low,
              b = l.high,
              H = l.low,
              z = f,
              A = d,
              C = u,
              D = p,
              E = _,
              R = v,
              M = y,
              F = g,
              P = B,
              W = w,
              O = k,
              I = S,
              U = m,
              K = x,
              X = b,
              L = H,
              j = 0;
            j < 80;
            j++
          ) {
            var N,
              T,
              q = xt[j];
            if (j < 16)
              (T = q.high = 0 | t[e + 2 * j]),
                (N = q.low = 0 | t[e + 2 * j + 1]);
            else {
              var Z = xt[j - 15],
                V = Z.high,
                G = Z.low,
                J =
                  ((V >>> 1) | (G << 31)) ^ ((V >>> 8) | (G << 24)) ^ (V >>> 7),
                $ =
                  ((G >>> 1) | (V << 31)) ^
                  ((G >>> 8) | (V << 24)) ^
                  ((G >>> 7) | (V << 25)),
                Q = xt[j - 2],
                Y = Q.high,
                tt = Q.low,
                et =
                  ((Y >>> 19) | (tt << 13)) ^
                  ((Y << 3) | (tt >>> 29)) ^
                  (Y >>> 6),
                rt =
                  ((tt >>> 19) | (Y << 13)) ^
                  ((tt << 3) | (Y >>> 29)) ^
                  ((tt >>> 6) | (Y << 26)),
                it = xt[j - 7],
                nt = it.high,
                ot = it.low,
                st = xt[j - 16],
                ct = st.high,
                at = st.low;
              (T =
                (T =
                  (T = J + nt + ((N = $ + ot) >>> 0 < $ >>> 0 ? 1 : 0)) +
                  et +
                  ((N += rt) >>> 0 < rt >>> 0 ? 1 : 0)) +
                ct +
                ((N += at) >>> 0 < at >>> 0 ? 1 : 0)),
                (q.high = T),
                (q.low = N);
            }
            var ht,
              lt = (P & O) ^ (~P & U),
              ft = (W & I) ^ (~W & K),
              dt = (z & C) ^ (z & E) ^ (C & E),
              ut = (A & D) ^ (A & R) ^ (D & R),
              pt =
                ((z >>> 28) | (A << 4)) ^
                ((z << 30) | (A >>> 2)) ^
                ((z << 25) | (A >>> 7)),
              _t =
                ((A >>> 28) | (z << 4)) ^
                ((A << 30) | (z >>> 2)) ^
                ((A << 25) | (z >>> 7)),
              vt =
                ((P >>> 14) | (W << 18)) ^
                ((P >>> 18) | (W << 14)) ^
                ((P << 23) | (W >>> 9)),
              yt =
                ((W >>> 14) | (P << 18)) ^
                ((W >>> 18) | (P << 14)) ^
                ((W << 23) | (P >>> 9)),
              gt = mt[j],
              Bt = gt.high,
              wt = gt.low,
              kt = X + vt + ((ht = L + yt) >>> 0 < L >>> 0 ? 1 : 0),
              St = _t + ut;
            (X = U),
              (L = K),
              (U = O),
              (K = I),
              (O = P),
              (I = W),
              (P =
                (M +
                  (kt =
                    (kt =
                      (kt =
                        kt + lt + ((ht = ht + ft) >>> 0 < ft >>> 0 ? 1 : 0)) +
                      Bt +
                      ((ht = ht + wt) >>> 0 < wt >>> 0 ? 1 : 0)) +
                    T +
                    ((ht = ht + N) >>> 0 < N >>> 0 ? 1 : 0)) +
                  ((W = (F + ht) | 0) >>> 0 < F >>> 0 ? 1 : 0)) |
                0),
              (M = E),
              (F = R),
              (E = C),
              (R = D),
              (C = z),
              (D = A),
              (z =
                (kt +
                  (pt + dt + (St >>> 0 < _t >>> 0 ? 1 : 0)) +
                  ((A = (ht + St) | 0) >>> 0 < ht >>> 0 ? 1 : 0)) |
                0);
          }
          (d = i.low = d + A),
            (i.high = f + z + (d >>> 0 < A >>> 0 ? 1 : 0)),
            (p = n.low = p + D),
            (n.high = u + C + (p >>> 0 < D >>> 0 ? 1 : 0)),
            (v = o.low = v + R),
            (o.high = _ + E + (v >>> 0 < R >>> 0 ? 1 : 0)),
            (g = s.low = g + F),
            (s.high = y + M + (g >>> 0 < F >>> 0 ? 1 : 0)),
            (w = c.low = w + W),
            (c.high = B + P + (w >>> 0 < W >>> 0 ? 1 : 0)),
            (S = a.low = S + I),
            (a.high = k + O + (S >>> 0 < I >>> 0 ? 1 : 0)),
            (x = h.low = x + K),
            (h.high = m + U + (x >>> 0 < K >>> 0 ? 1 : 0)),
            (H = l.low = H + L),
            (l.high = b + X + (H >>> 0 < L >>> 0 ? 1 : 0));
        },
        _doFinalize: function () {
          var t = this._data,
            e = t.words,
            r = 8 * this._nDataBytes,
            i = 8 * t.sigBytes;
          return (
            (e[i >>> 5] |= 128 << (24 - (i % 32))),
            (e[30 + (((128 + i) >>> 10) << 5)] = Math.floor(r / 4294967296)),
            (e[31 + (((128 + i) >>> 10) << 5)] = r),
            (t.sigBytes = 4 * e.length),
            this._process(),
            this._hash.toX32()
          );
        },
        clone: function () {
          var t = e.clone.call(this);
          return (t._hash = this._hash.clone()), t;
        },
        blockSize: 32,
      }));
      (t.SHA512 = e._createHelper(c)), (t.HmacSHA512 = e._createHmacHelper(c));
    })(),
    (Z = (q = bt).x64),
    (V = Z.Word),
    (G = Z.WordArray),
    (J = q.algo),
    ($ = J.SHA512),
    (Q = J.SHA384 = $.extend({
      _doReset: function () {
        this._hash = new G.init([
          new V.init(3418070365, 3238371032),
          new V.init(1654270250, 914150663),
          new V.init(2438529370, 812702999),
          new V.init(355462360, 4144912697),
          new V.init(1731405415, 4290775857),
          new V.init(2394180231, 1750603025),
          new V.init(3675008525, 1694076839),
          new V.init(1203062813, 3204075428),
        ]);
      },
      _doFinalize: function () {
        var t = $._doFinalize.call(this);
        return (t.sigBytes -= 16), t;
      },
    })),
    (q.SHA384 = $._createHelper(Q)),
    (q.HmacSHA384 = $._createHmacHelper(Q)),
    bt.lib.Cipher ||
      (function () {
        var t = bt,
          e = t.lib,
          r = e.Base,
          a = e.WordArray,
          i = e.BufferedBlockAlgorithm,
          n = t.enc,
          o = (n.Utf8, n.Base64),
          s = t.algo.EvpKDF,
          c = (e.Cipher = i.extend({
            cfg: r.extend(),
            createEncryptor: function (t, e) {
              return this.create(this._ENC_XFORM_MODE, t, e);
            },
            createDecryptor: function (t, e) {
              return this.create(this._DEC_XFORM_MODE, t, e);
            },
            init: function (t, e, r) {
              (this.cfg = this.cfg.extend(r)),
                (this._xformMode = t),
                (this._key = e),
                this.reset();
            },
            reset: function () {
              i.reset.call(this), this._doReset();
            },
            process: function (t) {
              return this._append(t), this._process();
            },
            finalize: function (t) {
              return t && this._append(t), this._doFinalize();
            },
            keySize: 4,
            ivSize: 4,
            _ENC_XFORM_MODE: 1,
            _DEC_XFORM_MODE: 2,
            _createHelper: function (i) {
              return {
                encrypt: function (t, e, r) {
                  return h(e).encrypt(i, t, e, r);
                },
                decrypt: function (t, e, r) {
                  return h(e).decrypt(i, t, e, r);
                },
              };
            },
          }));
        function h(t) {
          return "string" == typeof t ? w : g;
        }
        e.StreamCipher = c.extend({
          _doFinalize: function () {
            return this._process(!0);
          },
          blockSize: 1,
        });
        var l,
          f = (t.mode = {}),
          d = (e.BlockCipherMode = r.extend({
            createEncryptor: function (t, e) {
              return this.Encryptor.create(t, e);
            },
            createDecryptor: function (t, e) {
              return this.Decryptor.create(t, e);
            },
            init: function (t, e) {
              (this._cipher = t), (this._iv = e);
            },
          })),
          u = (f.CBC =
            (((l = d.extend()).Encryptor = l.extend({
              processBlock: function (t, e) {
                var r = this._cipher,
                  i = r.blockSize;
                p.call(this, t, e, i),
                  r.encryptBlock(t, e),
                  (this._prevBlock = t.slice(e, e + i));
              },
            })),
            (l.Decryptor = l.extend({
              processBlock: function (t, e) {
                var r = this._cipher,
                  i = r.blockSize,
                  n = t.slice(e, e + i);
                r.decryptBlock(t, e),
                  p.call(this, t, e, i),
                  (this._prevBlock = n);
              },
            })),
            l));
        function p(t, e, r) {
          var i,
            n = this._iv;
          n ? ((i = n), (this._iv = void 0)) : (i = this._prevBlock);
          for (var o = 0; o < r; o++) t[e + o] ^= i[o];
        }
        var _ = ((t.pad = {}).Pkcs7 = {
            pad: function (t, e) {
              for (
                var r = 4 * e,
                  i = r - (t.sigBytes % r),
                  n = (i << 24) | (i << 16) | (i << 8) | i,
                  o = [],
                  s = 0;
                s < i;
                s += 4
              )
                o.push(n);
              var c = a.create(o, i);
              t.concat(c);
            },
            unpad: function (t) {
              var e = 255 & t.words[(t.sigBytes - 1) >>> 2];
              t.sigBytes -= e;
            },
          }),
          v =
            ((e.BlockCipher = c.extend({
              cfg: c.cfg.extend({ mode: u, padding: _ }),
              reset: function () {
                var t;
                c.reset.call(this);
                var e = this.cfg,
                  r = e.iv,
                  i = e.mode;
                this._xformMode == this._ENC_XFORM_MODE
                  ? (t = i.createEncryptor)
                  : ((t = i.createDecryptor), (this._minBufferSize = 1)),
                  this._mode && this._mode.__creator == t
                    ? this._mode.init(this, r && r.words)
                    : ((this._mode = t.call(i, this, r && r.words)),
                      (this._mode.__creator = t));
              },
              _doProcessBlock: function (t, e) {
                this._mode.processBlock(t, e);
              },
              _doFinalize: function () {
                var t,
                  e = this.cfg.padding;
                return (
                  this._xformMode == this._ENC_XFORM_MODE
                    ? (e.pad(this._data, this.blockSize),
                      (t = this._process(!0)))
                    : ((t = this._process(!0)), e.unpad(t)),
                  t
                );
              },
              blockSize: 4,
            })),
            (e.CipherParams = r.extend({
              init: function (t) {
                this.mixIn(t);
              },
              toString: function (t) {
                return (t || this.formatter).stringify(this);
              },
            }))),
          y = ((t.format = {}).OpenSSL = {
            stringify: function (t) {
              var e = t.ciphertext,
                r = t.salt;
              return (r
                ? a.create([1398893684, 1701076831]).concat(r).concat(e)
                : e
              ).toString(o);
            },
            parse: function (t) {
              var e,
                r = o.parse(t),
                i = r.words;
              return (
                1398893684 == i[0] &&
                  1701076831 == i[1] &&
                  ((e = a.create(i.slice(2, 4))),
                  i.splice(0, 4),
                  (r.sigBytes -= 16)),
                v.create({ ciphertext: r, salt: e })
              );
            },
          }),
          g = (e.SerializableCipher = r.extend({
            cfg: r.extend({ format: y }),
            encrypt: function (t, e, r, i) {
              i = this.cfg.extend(i);
              var n = t.createEncryptor(r, i),
                o = n.finalize(e),
                s = n.cfg;
              return v.create({
                ciphertext: o,
                key: r,
                iv: s.iv,
                algorithm: t,
                mode: s.mode,
                padding: s.padding,
                blockSize: t.blockSize,
                formatter: i.format,
              });
            },
            decrypt: function (t, e, r, i) {
              return (
                (i = this.cfg.extend(i)),
                (e = this._parse(e, i.format)),
                t.createDecryptor(r, i).finalize(e.ciphertext)
              );
            },
            _parse: function (t, e) {
              return "string" == typeof t ? e.parse(t, this) : t;
            },
          })),
          B = ((t.kdf = {}).OpenSSL = {
            execute: function (t, e, r, i) {
              i = i || a.random(8);
              var n = s.create({ keySize: e + r }).compute(t, i),
                o = a.create(n.words.slice(e), 4 * r);
              return (n.sigBytes = 4 * e), v.create({ key: n, iv: o, salt: i });
            },
          }),
          w = (e.PasswordBasedCipher = g.extend({
            cfg: g.cfg.extend({ kdf: B }),
            encrypt: function (t, e, r, i) {
              var n = (i = this.cfg.extend(i)).kdf.execute(
                r,
                t.keySize,
                t.ivSize
              );
              i.iv = n.iv;
              var o = g.encrypt.call(this, t, e, n.key, i);
              return o.mixIn(n), o;
            },
            decrypt: function (t, e, r, i) {
              (i = this.cfg.extend(i)), (e = this._parse(e, i.format));
              var n = i.kdf.execute(r, t.keySize, t.ivSize, e.salt);
              return (i.iv = n.iv), g.decrypt.call(this, t, e, n.key, i);
            },
          }));
      })(),
    (bt.mode.CFB =
      (((Y = bt.lib.BlockCipherMode.extend()).Encryptor = Y.extend({
        processBlock: function (t, e) {
          var r = this._cipher,
            i = r.blockSize;
          Dt.call(this, t, e, i, r), (this._prevBlock = t.slice(e, e + i));
        },
      })),
      (Y.Decryptor = Y.extend({
        processBlock: function (t, e) {
          var r = this._cipher,
            i = r.blockSize,
            n = t.slice(e, e + i);
          Dt.call(this, t, e, i, r), (this._prevBlock = n);
        },
      })),
      Y)),
    (bt.mode.ECB =
      (((tt = bt.lib.BlockCipherMode.extend()).Encryptor = tt.extend({
        processBlock: function (t, e) {
          this._cipher.encryptBlock(t, e);
        },
      })),
      (tt.Decryptor = tt.extend({
        processBlock: function (t, e) {
          this._cipher.decryptBlock(t, e);
        },
      })),
      tt)),
    (bt.pad.AnsiX923 = {
      pad: function (t, e) {
        var r = t.sigBytes,
          i = 4 * e,
          n = i - (r % i),
          o = r + n - 1;
        t.clamp(),
          (t.words[o >>> 2] |= n << (24 - (o % 4) * 8)),
          (t.sigBytes += n);
      },
      unpad: function (t) {
        var e = 255 & t.words[(t.sigBytes - 1) >>> 2];
        t.sigBytes -= e;
      },
    }),
    (bt.pad.Iso10126 = {
      pad: function (t, e) {
        var r = 4 * e,
          i = r - (t.sigBytes % r);
        t.concat(bt.lib.WordArray.random(i - 1)).concat(
          bt.lib.WordArray.create([i << 24], 1)
        );
      },
      unpad: function (t) {
        var e = 255 & t.words[(t.sigBytes - 1) >>> 2];
        t.sigBytes -= e;
      },
    }),
    (bt.pad.Iso97971 = {
      pad: function (t, e) {
        t.concat(bt.lib.WordArray.create([2147483648], 1)),
          bt.pad.ZeroPadding.pad(t, e);
      },
      unpad: function (t) {
        bt.pad.ZeroPadding.unpad(t), t.sigBytes--;
      },
    }),
    (bt.mode.OFB =
      ((et = bt.lib.BlockCipherMode.extend()),
      (rt = et.Encryptor = et.extend({
        processBlock: function (t, e) {
          var r = this._cipher,
            i = r.blockSize,
            n = this._iv,
            o = this._keystream;
          n && ((o = this._keystream = n.slice(0)), (this._iv = void 0)),
            r.encryptBlock(o, 0);
          for (var s = 0; s < i; s++) t[e + s] ^= o[s];
        },
      })),
      (et.Decryptor = rt),
      et)),
    (bt.pad.NoPadding = { pad: function () {}, unpad: function () {} }),
    (it = bt.lib.CipherParams),
    (nt = bt.enc.Hex),
    (bt.format.Hex = {
      stringify: function (t) {
        return t.ciphertext.toString(nt);
      },
      parse: function (t) {
        var e = nt.parse(t);
        return it.create({ ciphertext: e });
      },
    }),
    (function () {
      var t = bt,
        e = t.lib.BlockCipher,
        r = t.algo,
        h = [],
        l = [],
        f = [],
        d = [],
        u = [],
        p = [],
        _ = [],
        v = [],
        y = [],
        g = [];
      !(function () {
        for (var t = [], e = 0; e < 256; e++)
          t[e] = e < 128 ? e << 1 : (e << 1) ^ 283;
        var r = 0,
          i = 0;
        for (e = 0; e < 256; e++) {
          var n = i ^ (i << 1) ^ (i << 2) ^ (i << 3) ^ (i << 4);
          (n = (n >>> 8) ^ (255 & n) ^ 99), (h[r] = n);
          var o = t[(l[n] = r)],
            s = t[o],
            c = t[s],
            a = (257 * t[n]) ^ (16843008 * n);
          (f[r] = (a << 24) | (a >>> 8)),
            (d[r] = (a << 16) | (a >>> 16)),
            (u[r] = (a << 8) | (a >>> 24)),
            (p[r] = a);
          a = (16843009 * c) ^ (65537 * s) ^ (257 * o) ^ (16843008 * r);
          (_[n] = (a << 24) | (a >>> 8)),
            (v[n] = (a << 16) | (a >>> 16)),
            (y[n] = (a << 8) | (a >>> 24)),
            (g[n] = a),
            r ? ((r = o ^ t[t[t[c ^ o]]]), (i ^= t[t[i]])) : (r = i = 1);
        }
      })();
      var B = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
        i = (r.AES = e.extend({
          _doReset: function () {
            if (!this._nRounds || this._keyPriorReset !== this._key) {
              for (
                var t = (this._keyPriorReset = this._key),
                  e = t.words,
                  r = t.sigBytes / 4,
                  i = 4 * (1 + (this._nRounds = 6 + r)),
                  n = (this._keySchedule = []),
                  o = 0;
                o < i;
                o++
              )
                o < r
                  ? (n[o] = e[o])
                  : ((a = n[o - 1]),
                    o % r
                      ? 6 < r &&
                        o % r == 4 &&
                        (a =
                          (h[a >>> 24] << 24) |
                          (h[(a >>> 16) & 255] << 16) |
                          (h[(a >>> 8) & 255] << 8) |
                          h[255 & a])
                      : ((a =
                          (h[(a = (a << 8) | (a >>> 24)) >>> 24] << 24) |
                          (h[(a >>> 16) & 255] << 16) |
                          (h[(a >>> 8) & 255] << 8) |
                          h[255 & a]),
                        (a ^= B[(o / r) | 0] << 24)),
                    (n[o] = n[o - r] ^ a));
              for (var s = (this._invKeySchedule = []), c = 0; c < i; c++) {
                o = i - c;
                if (c % 4) var a = n[o];
                else a = n[o - 4];
                s[c] =
                  c < 4 || o <= 4
                    ? a
                    : _[h[a >>> 24]] ^
                      v[h[(a >>> 16) & 255]] ^
                      y[h[(a >>> 8) & 255]] ^
                      g[h[255 & a]];
              }
            }
          },
          encryptBlock: function (t, e) {
            this._doCryptBlock(t, e, this._keySchedule, f, d, u, p, h);
          },
          decryptBlock: function (t, e) {
            var r = t[e + 1];
            (t[e + 1] = t[e + 3]),
              (t[e + 3] = r),
              this._doCryptBlock(t, e, this._invKeySchedule, _, v, y, g, l);
            r = t[e + 1];
            (t[e + 1] = t[e + 3]), (t[e + 3] = r);
          },
          _doCryptBlock: function (t, e, r, i, n, o, s, c) {
            for (
              var a = this._nRounds,
                h = t[e] ^ r[0],
                l = t[e + 1] ^ r[1],
                f = t[e + 2] ^ r[2],
                d = t[e + 3] ^ r[3],
                u = 4,
                p = 1;
              p < a;
              p++
            ) {
              var _ =
                  i[h >>> 24] ^
                  n[(l >>> 16) & 255] ^
                  o[(f >>> 8) & 255] ^
                  s[255 & d] ^
                  r[u++],
                v =
                  i[l >>> 24] ^
                  n[(f >>> 16) & 255] ^
                  o[(d >>> 8) & 255] ^
                  s[255 & h] ^
                  r[u++],
                y =
                  i[f >>> 24] ^
                  n[(d >>> 16) & 255] ^
                  o[(h >>> 8) & 255] ^
                  s[255 & l] ^
                  r[u++],
                g =
                  i[d >>> 24] ^
                  n[(h >>> 16) & 255] ^
                  o[(l >>> 8) & 255] ^
                  s[255 & f] ^
                  r[u++];
              (h = _), (l = v), (f = y), (d = g);
            }
            (_ =
              ((c[h >>> 24] << 24) |
                (c[(l >>> 16) & 255] << 16) |
                (c[(f >>> 8) & 255] << 8) |
                c[255 & d]) ^
              r[u++]),
              (v =
                ((c[l >>> 24] << 24) |
                  (c[(f >>> 16) & 255] << 16) |
                  (c[(d >>> 8) & 255] << 8) |
                  c[255 & h]) ^
                r[u++]),
              (y =
                ((c[f >>> 24] << 24) |
                  (c[(d >>> 16) & 255] << 16) |
                  (c[(h >>> 8) & 255] << 8) |
                  c[255 & l]) ^
                r[u++]),
              (g =
                ((c[d >>> 24] << 24) |
                  (c[(h >>> 16) & 255] << 16) |
                  (c[(l >>> 8) & 255] << 8) |
                  c[255 & f]) ^
                r[u++]);
            (t[e] = _), (t[e + 1] = v), (t[e + 2] = y), (t[e + 3] = g);
          },
          keySize: 8,
        }));
      t.AES = e._createHelper(i);
    })(),
    (function () {
      var t = bt,
        e = t.lib,
        n = e.WordArray,
        r = e.BlockCipher,
        i = t.algo,
        h = [
          57,
          49,
          41,
          33,
          25,
          17,
          9,
          1,
          58,
          50,
          42,
          34,
          26,
          18,
          10,
          2,
          59,
          51,
          43,
          35,
          27,
          19,
          11,
          3,
          60,
          52,
          44,
          36,
          63,
          55,
          47,
          39,
          31,
          23,
          15,
          7,
          62,
          54,
          46,
          38,
          30,
          22,
          14,
          6,
          61,
          53,
          45,
          37,
          29,
          21,
          13,
          5,
          28,
          20,
          12,
          4,
        ],
        l = [
          14,
          17,
          11,
          24,
          1,
          5,
          3,
          28,
          15,
          6,
          21,
          10,
          23,
          19,
          12,
          4,
          26,
          8,
          16,
          7,
          27,
          20,
          13,
          2,
          41,
          52,
          31,
          37,
          47,
          55,
          30,
          40,
          51,
          45,
          33,
          48,
          44,
          49,
          39,
          56,
          34,
          53,
          46,
          42,
          50,
          36,
          29,
          32,
        ],
        f = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28],
        d = [
          {
            0: 8421888,
            268435456: 32768,
            536870912: 8421378,
            805306368: 2,
            1073741824: 512,
            1342177280: 8421890,
            1610612736: 8389122,
            1879048192: 8388608,
            2147483648: 514,
            2415919104: 8389120,
            2684354560: 33280,
            2952790016: 8421376,
            3221225472: 32770,
            3489660928: 8388610,
            3758096384: 0,
            4026531840: 33282,
            134217728: 0,
            402653184: 8421890,
            671088640: 33282,
            939524096: 32768,
            1207959552: 8421888,
            1476395008: 512,
            1744830464: 8421378,
            2013265920: 2,
            2281701376: 8389120,
            2550136832: 33280,
            2818572288: 8421376,
            3087007744: 8389122,
            3355443200: 8388610,
            3623878656: 32770,
            3892314112: 514,
            4160749568: 8388608,
            1: 32768,
            268435457: 2,
            536870913: 8421888,
            805306369: 8388608,
            1073741825: 8421378,
            1342177281: 33280,
            1610612737: 512,
            1879048193: 8389122,
            2147483649: 8421890,
            2415919105: 8421376,
            2684354561: 8388610,
            2952790017: 33282,
            3221225473: 514,
            3489660929: 8389120,
            3758096385: 32770,
            4026531841: 0,
            134217729: 8421890,
            402653185: 8421376,
            671088641: 8388608,
            939524097: 512,
            1207959553: 32768,
            1476395009: 8388610,
            1744830465: 2,
            2013265921: 33282,
            2281701377: 32770,
            2550136833: 8389122,
            2818572289: 514,
            3087007745: 8421888,
            3355443201: 8389120,
            3623878657: 0,
            3892314113: 33280,
            4160749569: 8421378,
          },
          {
            0: 1074282512,
            16777216: 16384,
            33554432: 524288,
            50331648: 1074266128,
            67108864: 1073741840,
            83886080: 1074282496,
            100663296: 1073758208,
            117440512: 16,
            134217728: 540672,
            150994944: 1073758224,
            167772160: 1073741824,
            184549376: 540688,
            201326592: 524304,
            218103808: 0,
            234881024: 16400,
            251658240: 1074266112,
            8388608: 1073758208,
            25165824: 540688,
            41943040: 16,
            58720256: 1073758224,
            75497472: 1074282512,
            92274688: 1073741824,
            109051904: 524288,
            125829120: 1074266128,
            142606336: 524304,
            159383552: 0,
            176160768: 16384,
            192937984: 1074266112,
            209715200: 1073741840,
            226492416: 540672,
            243269632: 1074282496,
            260046848: 16400,
            268435456: 0,
            285212672: 1074266128,
            301989888: 1073758224,
            318767104: 1074282496,
            335544320: 1074266112,
            352321536: 16,
            369098752: 540688,
            385875968: 16384,
            402653184: 16400,
            419430400: 524288,
            436207616: 524304,
            452984832: 1073741840,
            469762048: 540672,
            486539264: 1073758208,
            503316480: 1073741824,
            520093696: 1074282512,
            276824064: 540688,
            293601280: 524288,
            310378496: 1074266112,
            327155712: 16384,
            343932928: 1073758208,
            360710144: 1074282512,
            377487360: 16,
            394264576: 1073741824,
            411041792: 1074282496,
            427819008: 1073741840,
            444596224: 1073758224,
            461373440: 524304,
            478150656: 0,
            494927872: 16400,
            511705088: 1074266128,
            528482304: 540672,
          },
          {
            0: 260,
            1048576: 0,
            2097152: 67109120,
            3145728: 65796,
            4194304: 65540,
            5242880: 67108868,
            6291456: 67174660,
            7340032: 67174400,
            8388608: 67108864,
            9437184: 67174656,
            10485760: 65792,
            11534336: 67174404,
            12582912: 67109124,
            13631488: 65536,
            14680064: 4,
            15728640: 256,
            524288: 67174656,
            1572864: 67174404,
            2621440: 0,
            3670016: 67109120,
            4718592: 67108868,
            5767168: 65536,
            6815744: 65540,
            7864320: 260,
            8912896: 4,
            9961472: 256,
            11010048: 67174400,
            12058624: 65796,
            13107200: 65792,
            14155776: 67109124,
            15204352: 67174660,
            16252928: 67108864,
            16777216: 67174656,
            17825792: 65540,
            18874368: 65536,
            19922944: 67109120,
            20971520: 256,
            22020096: 67174660,
            23068672: 67108868,
            24117248: 0,
            25165824: 67109124,
            26214400: 67108864,
            27262976: 4,
            28311552: 65792,
            29360128: 67174400,
            30408704: 260,
            31457280: 65796,
            32505856: 67174404,
            17301504: 67108864,
            18350080: 260,
            19398656: 67174656,
            20447232: 0,
            21495808: 65540,
            22544384: 67109120,
            23592960: 256,
            24641536: 67174404,
            25690112: 65536,
            26738688: 67174660,
            27787264: 65796,
            28835840: 67108868,
            29884416: 67109124,
            30932992: 67174400,
            31981568: 4,
            33030144: 65792,
          },
          {
            0: 2151682048,
            65536: 2147487808,
            131072: 4198464,
            196608: 2151677952,
            262144: 0,
            327680: 4198400,
            393216: 2147483712,
            458752: 4194368,
            524288: 2147483648,
            589824: 4194304,
            655360: 64,
            720896: 2147487744,
            786432: 2151678016,
            851968: 4160,
            917504: 4096,
            983040: 2151682112,
            32768: 2147487808,
            98304: 64,
            163840: 2151678016,
            229376: 2147487744,
            294912: 4198400,
            360448: 2151682112,
            425984: 0,
            491520: 2151677952,
            557056: 4096,
            622592: 2151682048,
            688128: 4194304,
            753664: 4160,
            819200: 2147483648,
            884736: 4194368,
            950272: 4198464,
            1015808: 2147483712,
            1048576: 4194368,
            1114112: 4198400,
            1179648: 2147483712,
            1245184: 0,
            1310720: 4160,
            1376256: 2151678016,
            1441792: 2151682048,
            1507328: 2147487808,
            1572864: 2151682112,
            1638400: 2147483648,
            1703936: 2151677952,
            1769472: 4198464,
            1835008: 2147487744,
            1900544: 4194304,
            1966080: 64,
            2031616: 4096,
            1081344: 2151677952,
            1146880: 2151682112,
            1212416: 0,
            1277952: 4198400,
            1343488: 4194368,
            1409024: 2147483648,
            1474560: 2147487808,
            1540096: 64,
            1605632: 2147483712,
            1671168: 4096,
            1736704: 2147487744,
            1802240: 2151678016,
            1867776: 4160,
            1933312: 2151682048,
            1998848: 4194304,
            2064384: 4198464,
          },
          {
            0: 128,
            4096: 17039360,
            8192: 262144,
            12288: 536870912,
            16384: 537133184,
            20480: 16777344,
            24576: 553648256,
            28672: 262272,
            32768: 16777216,
            36864: 537133056,
            40960: 536871040,
            45056: 553910400,
            49152: 553910272,
            53248: 0,
            57344: 17039488,
            61440: 553648128,
            2048: 17039488,
            6144: 553648256,
            10240: 128,
            14336: 17039360,
            18432: 262144,
            22528: 537133184,
            26624: 553910272,
            30720: 536870912,
            34816: 537133056,
            38912: 0,
            43008: 553910400,
            47104: 16777344,
            51200: 536871040,
            55296: 553648128,
            59392: 16777216,
            63488: 262272,
            65536: 262144,
            69632: 128,
            73728: 536870912,
            77824: 553648256,
            81920: 16777344,
            86016: 553910272,
            90112: 537133184,
            94208: 16777216,
            98304: 553910400,
            102400: 553648128,
            106496: 17039360,
            110592: 537133056,
            114688: 262272,
            118784: 536871040,
            122880: 0,
            126976: 17039488,
            67584: 553648256,
            71680: 16777216,
            75776: 17039360,
            79872: 537133184,
            83968: 536870912,
            88064: 17039488,
            92160: 128,
            96256: 553910272,
            100352: 262272,
            104448: 553910400,
            108544: 0,
            112640: 553648128,
            116736: 16777344,
            120832: 262144,
            124928: 537133056,
            129024: 536871040,
          },
          {
            0: 268435464,
            256: 8192,
            512: 270532608,
            768: 270540808,
            1024: 268443648,
            1280: 2097152,
            1536: 2097160,
            1792: 268435456,
            2048: 0,
            2304: 268443656,
            2560: 2105344,
            2816: 8,
            3072: 270532616,
            3328: 2105352,
            3584: 8200,
            3840: 270540800,
            128: 270532608,
            384: 270540808,
            640: 8,
            896: 2097152,
            1152: 2105352,
            1408: 268435464,
            1664: 268443648,
            1920: 8200,
            2176: 2097160,
            2432: 8192,
            2688: 268443656,
            2944: 270532616,
            3200: 0,
            3456: 270540800,
            3712: 2105344,
            3968: 268435456,
            4096: 268443648,
            4352: 270532616,
            4608: 270540808,
            4864: 8200,
            5120: 2097152,
            5376: 268435456,
            5632: 268435464,
            5888: 2105344,
            6144: 2105352,
            6400: 0,
            6656: 8,
            6912: 270532608,
            7168: 8192,
            7424: 268443656,
            7680: 270540800,
            7936: 2097160,
            4224: 8,
            4480: 2105344,
            4736: 2097152,
            4992: 268435464,
            5248: 268443648,
            5504: 8200,
            5760: 270540808,
            6016: 270532608,
            6272: 270540800,
            6528: 270532616,
            6784: 8192,
            7040: 2105352,
            7296: 2097160,
            7552: 0,
            7808: 268435456,
            8064: 268443656,
          },
          {
            0: 1048576,
            16: 33555457,
            32: 1024,
            48: 1049601,
            64: 34604033,
            80: 0,
            96: 1,
            112: 34603009,
            128: 33555456,
            144: 1048577,
            160: 33554433,
            176: 34604032,
            192: 34603008,
            208: 1025,
            224: 1049600,
            240: 33554432,
            8: 34603009,
            24: 0,
            40: 33555457,
            56: 34604032,
            72: 1048576,
            88: 33554433,
            104: 33554432,
            120: 1025,
            136: 1049601,
            152: 33555456,
            168: 34603008,
            184: 1048577,
            200: 1024,
            216: 34604033,
            232: 1,
            248: 1049600,
            256: 33554432,
            272: 1048576,
            288: 33555457,
            304: 34603009,
            320: 1048577,
            336: 33555456,
            352: 34604032,
            368: 1049601,
            384: 1025,
            400: 34604033,
            416: 1049600,
            432: 1,
            448: 0,
            464: 34603008,
            480: 33554433,
            496: 1024,
            264: 1049600,
            280: 33555457,
            296: 34603009,
            312: 1,
            328: 33554432,
            344: 1048576,
            360: 1025,
            376: 34604032,
            392: 33554433,
            408: 34603008,
            424: 0,
            440: 34604033,
            456: 1049601,
            472: 1024,
            488: 33555456,
            504: 1048577,
          },
          {
            0: 134219808,
            1: 131072,
            2: 134217728,
            3: 32,
            4: 131104,
            5: 134350880,
            6: 134350848,
            7: 2048,
            8: 134348800,
            9: 134219776,
            10: 133120,
            11: 134348832,
            12: 2080,
            13: 0,
            14: 134217760,
            15: 133152,
            2147483648: 2048,
            2147483649: 134350880,
            2147483650: 134219808,
            2147483651: 134217728,
            2147483652: 134348800,
            2147483653: 133120,
            2147483654: 133152,
            2147483655: 32,
            2147483656: 134217760,
            2147483657: 2080,
            2147483658: 131104,
            2147483659: 134350848,
            2147483660: 0,
            2147483661: 134348832,
            2147483662: 134219776,
            2147483663: 131072,
            16: 133152,
            17: 134350848,
            18: 32,
            19: 2048,
            20: 134219776,
            21: 134217760,
            22: 134348832,
            23: 131072,
            24: 0,
            25: 131104,
            26: 134348800,
            27: 134219808,
            28: 134350880,
            29: 133120,
            30: 2080,
            31: 134217728,
            2147483664: 131072,
            2147483665: 2048,
            2147483666: 134348832,
            2147483667: 133152,
            2147483668: 32,
            2147483669: 134348800,
            2147483670: 134217728,
            2147483671: 134219808,
            2147483672: 134350880,
            2147483673: 134217760,
            2147483674: 134219776,
            2147483675: 0,
            2147483676: 133120,
            2147483677: 2080,
            2147483678: 131104,
            2147483679: 134350848,
          },
        ],
        u = [
          4160749569,
          528482304,
          33030144,
          2064384,
          129024,
          8064,
          504,
          2147483679,
        ],
        o = (i.DES = r.extend({
          _doReset: function () {
            for (var t = this._key.words, e = [], r = 0; r < 56; r++) {
              var i = h[r] - 1;
              e[r] = (t[i >>> 5] >>> (31 - (i % 32))) & 1;
            }
            for (var n = (this._subKeys = []), o = 0; o < 16; o++) {
              var s = (n[o] = []),
                c = f[o];
              for (r = 0; r < 24; r++)
                (s[(r / 6) | 0] |= e[(l[r] - 1 + c) % 28] << (31 - (r % 6))),
                  (s[4 + ((r / 6) | 0)] |=
                    e[28 + ((l[r + 24] - 1 + c) % 28)] << (31 - (r % 6)));
              s[0] = (s[0] << 1) | (s[0] >>> 31);
              for (r = 1; r < 7; r++) s[r] = s[r] >>> (4 * (r - 1) + 3);
              s[7] = (s[7] << 5) | (s[7] >>> 27);
            }
            var a = (this._invSubKeys = []);
            for (r = 0; r < 16; r++) a[r] = n[15 - r];
          },
          encryptBlock: function (t, e) {
            this._doCryptBlock(t, e, this._subKeys);
          },
          decryptBlock: function (t, e) {
            this._doCryptBlock(t, e, this._invSubKeys);
          },
          _doCryptBlock: function (t, e, r) {
            (this._lBlock = t[e]),
              (this._rBlock = t[e + 1]),
              p.call(this, 4, 252645135),
              p.call(this, 16, 65535),
              _.call(this, 2, 858993459),
              _.call(this, 8, 16711935),
              p.call(this, 1, 1431655765);
            for (var i = 0; i < 16; i++) {
              for (
                var n = r[i], o = this._lBlock, s = this._rBlock, c = 0, a = 0;
                a < 8;
                a++
              )
                c |= d[a][((s ^ n[a]) & u[a]) >>> 0];
              (this._lBlock = s), (this._rBlock = o ^ c);
            }
            var h = this._lBlock;
            (this._lBlock = this._rBlock),
              (this._rBlock = h),
              p.call(this, 1, 1431655765),
              _.call(this, 8, 16711935),
              _.call(this, 2, 858993459),
              p.call(this, 16, 65535),
              p.call(this, 4, 252645135),
              (t[e] = this._lBlock),
              (t[e + 1] = this._rBlock);
          },
          keySize: 2,
          ivSize: 2,
          blockSize: 2,
        }));
      function p(t, e) {
        var r = ((this._lBlock >>> t) ^ this._rBlock) & e;
        (this._rBlock ^= r), (this._lBlock ^= r << t);
      }
      function _(t, e) {
        var r = ((this._rBlock >>> t) ^ this._lBlock) & e;
        (this._lBlock ^= r), (this._rBlock ^= r << t);
      }
      t.DES = r._createHelper(o);
      var s = (i.TripleDES = r.extend({
        _doReset: function () {
          var t = this._key.words;
          if (2 !== t.length && 4 !== t.length && t.length < 6)
            throw new Error(
              "Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192."
            );
          var e = t.slice(0, 2),
            r = t.length < 4 ? t.slice(0, 2) : t.slice(2, 4),
            i = t.length < 6 ? t.slice(0, 2) : t.slice(4, 6);
          (this._des1 = o.createEncryptor(n.create(e))),
            (this._des2 = o.createEncryptor(n.create(r))),
            (this._des3 = o.createEncryptor(n.create(i)));
        },
        encryptBlock: function (t, e) {
          this._des1.encryptBlock(t, e),
            this._des2.decryptBlock(t, e),
            this._des3.encryptBlock(t, e);
        },
        decryptBlock: function (t, e) {
          this._des3.decryptBlock(t, e),
            this._des2.encryptBlock(t, e),
            this._des1.decryptBlock(t, e);
        },
        keySize: 6,
        ivSize: 2,
        blockSize: 2,
      }));
      t.TripleDES = r._createHelper(s);
    })(),
    (function () {
      var t = bt,
        e = t.lib.StreamCipher,
        r = t.algo,
        i = (r.RC4 = e.extend({
          _doReset: function () {
            for (
              var t = this._key,
                e = t.words,
                r = t.sigBytes,
                i = (this._S = []),
                n = 0;
              n < 256;
              n++
            )
              i[n] = n;
            n = 0;
            for (var o = 0; n < 256; n++) {
              var s = n % r,
                c = (e[s >>> 2] >>> (24 - (s % 4) * 8)) & 255;
              o = (o + i[n] + c) % 256;
              var a = i[n];
              (i[n] = i[o]), (i[o] = a);
            }
            this._i = this._j = 0;
          },
          _doProcessBlock: function (t, e) {
            t[e] ^= n.call(this);
          },
          keySize: 8,
          ivSize: 0,
        }));
      function n() {
        for (
          var t = this._S, e = this._i, r = this._j, i = 0, n = 0;
          n < 4;
          n++
        ) {
          r = (r + t[(e = (e + 1) % 256)]) % 256;
          var o = t[e];
          (t[e] = t[r]),
            (t[r] = o),
            (i |= t[(t[e] + t[r]) % 256] << (24 - 8 * n));
        }
        return (this._i = e), (this._j = r), i;
      }
      t.RC4 = e._createHelper(i);
      var o = (r.RC4Drop = i.extend({
        cfg: i.cfg.extend({ drop: 192 }),
        _doReset: function () {
          i._doReset.call(this);
          for (var t = this.cfg.drop; 0 < t; t--) n.call(this);
        },
      }));
      t.RC4Drop = e._createHelper(o);
    })(),
    (bt.mode.CTRGladman =
      ((ot = bt.lib.BlockCipherMode.extend()),
      (st = ot.Encryptor = ot.extend({
        processBlock: function (t, e) {
          var r,
            i = this._cipher,
            n = i.blockSize,
            o = this._iv,
            s = this._counter;
          o && ((s = this._counter = o.slice(0)), (this._iv = void 0)),
            0 === ((r = s)[0] = Et(r[0])) && (r[1] = Et(r[1]));
          var c = s.slice(0);
          i.encryptBlock(c, 0);
          for (var a = 0; a < n; a++) t[e + a] ^= c[a];
        },
      })),
      (ot.Decryptor = st),
      ot)),
    (at = (ct = bt).lib.StreamCipher),
    (ht = ct.algo),
    (lt = []),
    (ft = []),
    (dt = []),
    (ut = ht.Rabbit = at.extend({
      _doReset: function () {
        for (var t = this._key.words, e = this.cfg.iv, r = 0; r < 4; r++)
          t[r] =
            (16711935 & ((t[r] << 8) | (t[r] >>> 24))) |
            (4278255360 & ((t[r] << 24) | (t[r] >>> 8)));
        var i = (this._X = [
            t[0],
            (t[3] << 16) | (t[2] >>> 16),
            t[1],
            (t[0] << 16) | (t[3] >>> 16),
            t[2],
            (t[1] << 16) | (t[0] >>> 16),
            t[3],
            (t[2] << 16) | (t[1] >>> 16),
          ]),
          n = (this._C = [
            (t[2] << 16) | (t[2] >>> 16),
            (4294901760 & t[0]) | (65535 & t[1]),
            (t[3] << 16) | (t[3] >>> 16),
            (4294901760 & t[1]) | (65535 & t[2]),
            (t[0] << 16) | (t[0] >>> 16),
            (4294901760 & t[2]) | (65535 & t[3]),
            (t[1] << 16) | (t[1] >>> 16),
            (4294901760 & t[3]) | (65535 & t[0]),
          ]);
        for (r = this._b = 0; r < 4; r++) Rt.call(this);
        for (r = 0; r < 8; r++) n[r] ^= i[(r + 4) & 7];
        if (e) {
          var o = e.words,
            s = o[0],
            c = o[1],
            a =
              (16711935 & ((s << 8) | (s >>> 24))) |
              (4278255360 & ((s << 24) | (s >>> 8))),
            h =
              (16711935 & ((c << 8) | (c >>> 24))) |
              (4278255360 & ((c << 24) | (c >>> 8))),
            l = (a >>> 16) | (4294901760 & h),
            f = (h << 16) | (65535 & a);
          (n[0] ^= a),
            (n[1] ^= l),
            (n[2] ^= h),
            (n[3] ^= f),
            (n[4] ^= a),
            (n[5] ^= l),
            (n[6] ^= h),
            (n[7] ^= f);
          for (r = 0; r < 4; r++) Rt.call(this);
        }
      },
      _doProcessBlock: function (t, e) {
        var r = this._X;
        Rt.call(this),
          (lt[0] = r[0] ^ (r[5] >>> 16) ^ (r[3] << 16)),
          (lt[1] = r[2] ^ (r[7] >>> 16) ^ (r[5] << 16)),
          (lt[2] = r[4] ^ (r[1] >>> 16) ^ (r[7] << 16)),
          (lt[3] = r[6] ^ (r[3] >>> 16) ^ (r[1] << 16));
        for (var i = 0; i < 4; i++)
          (lt[i] =
            (16711935 & ((lt[i] << 8) | (lt[i] >>> 24))) |
            (4278255360 & ((lt[i] << 24) | (lt[i] >>> 8)))),
            (t[e + i] ^= lt[i]);
      },
      blockSize: 4,
      ivSize: 2,
    })),
    (ct.Rabbit = at._createHelper(ut)),
    (bt.mode.CTR =
      ((pt = bt.lib.BlockCipherMode.extend()),
      (_t = pt.Encryptor = pt.extend({
        processBlock: function (t, e) {
          var r = this._cipher,
            i = r.blockSize,
            n = this._iv,
            o = this._counter;
          n && ((o = this._counter = n.slice(0)), (this._iv = void 0));
          var s = o.slice(0);
          r.encryptBlock(s, 0), (o[i - 1] = (o[i - 1] + 1) | 0);
          for (var c = 0; c < i; c++) t[e + c] ^= s[c];
        },
      })),
      (pt.Decryptor = _t),
      pt)),
    (yt = (vt = bt).lib.StreamCipher),
    (gt = vt.algo),
    (Bt = []),
    (wt = []),
    (kt = []),
    (St = gt.RabbitLegacy = yt.extend({
      _doReset: function () {
        for (
          var t = this._key.words,
            e = this.cfg.iv,
            r = (this._X = [
              t[0],
              (t[3] << 16) | (t[2] >>> 16),
              t[1],
              (t[0] << 16) | (t[3] >>> 16),
              t[2],
              (t[1] << 16) | (t[0] >>> 16),
              t[3],
              (t[2] << 16) | (t[1] >>> 16),
            ]),
            i = (this._C = [
              (t[2] << 16) | (t[2] >>> 16),
              (4294901760 & t[0]) | (65535 & t[1]),
              (t[3] << 16) | (t[3] >>> 16),
              (4294901760 & t[1]) | (65535 & t[2]),
              (t[0] << 16) | (t[0] >>> 16),
              (4294901760 & t[2]) | (65535 & t[3]),
              (t[1] << 16) | (t[1] >>> 16),
              (4294901760 & t[3]) | (65535 & t[0]),
            ]),
            n = (this._b = 0);
          n < 4;
          n++
        )
          Mt.call(this);
        for (n = 0; n < 8; n++) i[n] ^= r[(n + 4) & 7];
        if (e) {
          var o = e.words,
            s = o[0],
            c = o[1],
            a =
              (16711935 & ((s << 8) | (s >>> 24))) |
              (4278255360 & ((s << 24) | (s >>> 8))),
            h =
              (16711935 & ((c << 8) | (c >>> 24))) |
              (4278255360 & ((c << 24) | (c >>> 8))),
            l = (a >>> 16) | (4294901760 & h),
            f = (h << 16) | (65535 & a);
          (i[0] ^= a),
            (i[1] ^= l),
            (i[2] ^= h),
            (i[3] ^= f),
            (i[4] ^= a),
            (i[5] ^= l),
            (i[6] ^= h),
            (i[7] ^= f);
          for (n = 0; n < 4; n++) Mt.call(this);
        }
      },
      _doProcessBlock: function (t, e) {
        var r = this._X;
        Mt.call(this),
          (Bt[0] = r[0] ^ (r[5] >>> 16) ^ (r[3] << 16)),
          (Bt[1] = r[2] ^ (r[7] >>> 16) ^ (r[5] << 16)),
          (Bt[2] = r[4] ^ (r[1] >>> 16) ^ (r[7] << 16)),
          (Bt[3] = r[6] ^ (r[3] >>> 16) ^ (r[1] << 16));
        for (var i = 0; i < 4; i++)
          (Bt[i] =
            (16711935 & ((Bt[i] << 8) | (Bt[i] >>> 24))) |
            (4278255360 & ((Bt[i] << 24) | (Bt[i] >>> 8)))),
            (t[e + i] ^= Bt[i]);
      },
      blockSize: 4,
      ivSize: 2,
    })),
    (vt.RabbitLegacy = yt._createHelper(St)),
    (bt.pad.ZeroPadding = {
      pad: function (t, e) {
        var r = 4 * e;
        t.clamp(), (t.sigBytes += r - (t.sigBytes % r || r));
      },
      unpad: function (t) {
        var e = t.words,
          r = t.sigBytes - 1;
        for (r = t.sigBytes - 1; 0 <= r; r--)
          if ((e[r >>> 2] >>> (24 - (r % 4) * 8)) & 255) {
            t.sigBytes = r + 1;
            break;
          }
      },
    }),
    bt
  );
});

/*! ngTagsInput v3.2.0 License: MIT */ !(function () {
  "use strict";
  var a = {
      backspace: 8,
      tab: 9,
      enter: 13,
      escape: 27,
      space: 32,
      up: 38,
      down: 40,
      left: 37,
      right: 39,
      delete: 46,
      comma: 188,
    },
    b = 9007199254740991,
    c = ["text", "email", "url"],
    d = angular.module("ngTagsInput", []);
  d.directive("tagsInput", [
    "$timeout",
    "$document",
    "$window",
    "$q",
    "tagsInputConfig",
    "tiUtil",
    function (d, e, f, g, h, i) {
      function j(a, b, c, d) {
        var e,
          f,
          h,
          j,
          k = {};
        return (
          (e = function (b) {
            return i.safeToString(b[a.displayProperty]);
          }),
          (f = function (b, c) {
            b[a.displayProperty] = c;
          }),
          (h = function (b) {
            var d = e(b),
              f =
                d &&
                d.length >= a.minLength &&
                d.length <= a.maxLength &&
                a.allowedTagsPattern.test(d) &&
                !i.findInObjectArray(
                  k.items,
                  b,
                  a.keyProperty || a.displayProperty
                );
            return g.when(f && c({ $tag: b })).then(i.promisifyValue);
          }),
          (j = function (a) {
            return g.when(d({ $tag: a })).then(i.promisifyValue);
          }),
          (k.items = []),
          (k.addText = function (a) {
            var b = {};
            return f(b, a), k.add(b);
          }),
          (k.add = function (c) {
            var d = e(c);
            return (
              a.replaceSpacesWithDashes && (d = i.replaceSpacesWithDashes(d)),
              f(c, d),
              h(c)
                .then(function () {
                  k.items.push(c), b.trigger("tag-added", { $tag: c });
                })
                ["catch"](function () {
                  d && b.trigger("invalid-tag", { $tag: c });
                })
            );
          }),
          (k.remove = function (a) {
            var c = k.items[a];
            return j(c).then(function () {
              return (
                k.items.splice(a, 1),
                k.clearSelection(),
                b.trigger("tag-removed", { $tag: c }),
                c
              );
            });
          }),
          (k.select = function (a) {
            0 > a ? (a = k.items.length - 1) : a >= k.items.length && (a = 0),
              (k.index = a),
              (k.selected = k.items[a]);
          }),
          (k.selectPrior = function () {
            k.select(--k.index);
          }),
          (k.selectNext = function () {
            k.select(++k.index);
          }),
          (k.removeSelected = function () {
            return k.remove(k.index);
          }),
          (k.clearSelection = function () {
            (k.selected = null), (k.index = -1);
          }),
          (k.getItems = function () {
            return a.useStrings ? k.items.map(e) : k.items;
          }),
          k.clearSelection(),
          k
        );
      }
      function k(a) {
        return -1 !== c.indexOf(a);
      }
      return {
        restrict: "E",
        require: "ngModel",
        scope: {
          tags: "=ngModel",
          text: "=?",
          templateScope: "=?",
          tagClass: "&",
          onTagAdding: "&",
          onTagAdded: "&",
          onInvalidTag: "&",
          onTagRemoving: "&",
          onTagRemoved: "&",
          onTagClicked: "&",
        },
        replace: !1,
        transclude: !0,
        templateUrl: "ngTagsInput/tags-input.html",
        controller: [
          "$scope",
          "$attrs",
          "$element",
          function (a, c, d) {
            (a.events = i.simplePubSub()),
              h.load("tagsInput", a, c, {
                template: [String, "ngTagsInput/tag-item.html"],
                type: [String, "text", k],
                placeholder: [String, "Add a tag"],
                tabindex: [Number, null],
                removeTagSymbol: [String, String.fromCharCode(215)],
                replaceSpacesWithDashes: [Boolean, !0],
                minLength: [Number, 3],
                maxLength: [Number, b],
                addOnEnter: [Boolean, !0],
                addOnSpace: [Boolean, !1],
                addOnComma: [Boolean, !0],
                addOnBlur: [Boolean, !0],
                addOnPaste: [Boolean, !1],
                pasteSplitPattern: [RegExp, /,/],
                allowedTagsPattern: [RegExp, /.+/],
                enableEditingLastTag: [Boolean, !1],
                minTags: [Number, 0],
                maxTags: [Number, b],
                displayProperty: [String, "text"],
                keyProperty: [String, ""],
                allowLeftoverText: [Boolean, !1],
                addFromAutocompleteOnly: [Boolean, !1],
                spellcheck: [Boolean, !0],
                useStrings: [Boolean, !1],
              }),
              (a.tagList = new j(
                a.options,
                a.events,
                i.handleUndefinedResult(a.onTagAdding, !0),
                i.handleUndefinedResult(a.onTagRemoving, !0)
              )),
              (this.registerAutocomplete = function () {
                d.find("input");
                return {
                  addTag: function (b) {
                    return a.tagList.add(b);
                  },
                  getTags: function () {
                    return a.tagList.items;
                  },
                  getCurrentTagText: function () {
                    return a.newTag.text();
                  },
                  getOptions: function () {
                    return a.options;
                  },
                  getTemplateScope: function () {
                    return a.templateScope;
                  },
                  on: function (b, c) {
                    return a.events.on(b, c, !0), this;
                  },
                };
              }),
              (this.registerTagItem = function () {
                return {
                  getOptions: function () {
                    return a.options;
                  },
                  removeTag: function (b) {
                    a.disabled || a.tagList.remove(b);
                  },
                };
              });
          },
        ],
        link: function (b, c, g, h) {
          var j,
            k,
            l = [
              a.enter,
              a.comma,
              a.space,
              a.backspace,
              a["delete"],
              a.left,
              a.right,
            ],
            m = b.tagList,
            n = b.events,
            o = b.options,
            p = c.find("input"),
            q = ["minTags", "maxTags", "allowLeftoverText"];
          (j = function () {
            h.$setValidity("maxTags", m.items.length <= o.maxTags),
              h.$setValidity("minTags", m.items.length >= o.minTags),
              h.$setValidity(
                "leftoverText",
                b.hasFocus || o.allowLeftoverText ? !0 : !b.newTag.text()
              );
          }),
            (k = function () {
              d(function () {
                p[0].focus();
              });
            }),
            (h.$isEmpty = function (a) {
              return !a || !a.length;
            }),
            (b.newTag = {
              text: function (a) {
                return angular.isDefined(a)
                  ? ((b.text = a), void n.trigger("input-change", a))
                  : b.text || "";
              },
              invalid: null,
            }),
            (b.track = function (a) {
              return a[o.keyProperty || o.displayProperty];
            }),
            (b.getTagClass = function (a, c) {
              var d = a === m.selected;
              return [
                b.tagClass({ $tag: a, $index: c, $selected: d }),
                { selected: d },
              ];
            }),
            b.$watch("tags", function (a) {
              if (a) {
                if (
                  ((m.items = i.makeObjectArray(a, o.displayProperty)),
                  o.useStrings)
                )
                  return;
                b.tags = m.items;
              } else m.items = [];
            }),
            b.$watch("tags.length", function () {
              j(), h.$validate();
            }),
            g.$observe("disabled", function (a) {
              b.disabled = a;
            }),
            (b.eventHandlers = {
              input: {
                keydown: function (a) {
                  n.trigger("input-keydown", a);
                },
                focus: function () {
                  b.hasFocus || ((b.hasFocus = !0), n.trigger("input-focus"));
                },
                blur: function () {
                  d(function () {
                    var a = e.prop("activeElement"),
                      d = a === p[0],
                      f = c[0].contains(a);
                    (d || !f) && ((b.hasFocus = !1), n.trigger("input-blur"));
                  });
                },
                paste: function (a) {
                  (a.getTextData = function () {
                    var b =
                      a.clipboardData ||
                      (a.originalEvent && a.originalEvent.clipboardData);
                    return b
                      ? b.getData("text/plain")
                      : f.clipboardData.getData("Text");
                  }),
                    n.trigger("input-paste", a);
                },
              },
              host: {
                click: function () {
                  b.disabled || k();
                },
              },
              tag: {
                click: function (a) {
                  n.trigger("tag-clicked", { $tag: a });
                },
              },
            }),
            n
              .on("tag-added", b.onTagAdded)
              .on("invalid-tag", b.onInvalidTag)
              .on("tag-removed", b.onTagRemoved)
              .on("tag-clicked", b.onTagClicked)
              .on("tag-added", function () {
                b.newTag.text("");
              })
              .on("tag-added tag-removed", function () {
                (b.tags = m.getItems()), h.$setDirty(), k();
              })
              .on("invalid-tag", function () {
                b.newTag.invalid = !0;
              })
              .on("option-change", function (a) {
                -1 !== q.indexOf(a.name) && j();
              })
              .on("input-change", function () {
                m.clearSelection(), (b.newTag.invalid = null);
              })
              .on("input-focus", function () {
                c.triggerHandler("focus"), h.$setValidity("leftoverText", !0);
              })
              .on("input-blur", function () {
                o.addOnBlur &&
                  !o.addFromAutocompleteOnly &&
                  m.addText(b.newTag.text()),
                  c.triggerHandler("blur"),
                  j();
              })
              .on("input-keydown", function (c) {
                var d,
                  e,
                  f,
                  g,
                  h = c.keyCode,
                  j = {};
                i.isModifierOn(c) ||
                  -1 === l.indexOf(h) ||
                  ((j[a.enter] = o.addOnEnter),
                  (j[a.comma] = o.addOnComma),
                  (j[a.space] = o.addOnSpace),
                  (d = !o.addFromAutocompleteOnly && j[h]),
                  (e = (h === a.backspace || h === a["delete"]) && m.selected),
                  (g =
                    h === a.backspace &&
                    0 === b.newTag.text().length &&
                    o.enableEditingLastTag),
                  (f =
                    (h === a.backspace || h === a.left || h === a.right) &&
                    0 === b.newTag.text().length &&
                    !o.enableEditingLastTag),
                  d
                    ? m.addText(b.newTag.text())
                    : g
                    ? (m.selectPrior(),
                      m.removeSelected().then(function (a) {
                        a && b.newTag.text(a[o.displayProperty]);
                      }))
                    : e
                    ? m.removeSelected()
                    : f &&
                      (h === a.left || h === a.backspace
                        ? m.selectPrior()
                        : h === a.right && m.selectNext()),
                  (d || f || e || g) && c.preventDefault());
              })
              .on("input-paste", function (a) {
                if (o.addOnPaste) {
                  var b = a.getTextData(),
                    c = b.split(o.pasteSplitPattern);
                  c.length > 1 &&
                    (c.forEach(function (a) {
                      m.addText(a);
                    }),
                    a.preventDefault());
                }
              });
        },
      };
    },
  ]),
    d.directive("tiTagItem", [
      "tiUtil",
      function (a) {
        return {
          restrict: "E",
          require: "^tagsInput",
          template: '<ng-include src="$$template"></ng-include>',
          scope: { $scope: "=scope", data: "=" },
          link: function (b, c, d, e) {
            var f = e.registerTagItem(),
              g = f.getOptions();
            (b.$$template = g.template),
              (b.$$removeTagSymbol = g.removeTagSymbol),
              (b.$getDisplayText = function () {
                return a.safeToString(b.data[g.displayProperty]);
              }),
              (b.$removeTag = function () {
                f.removeTag(b.$index);
              }),
              b.$watch("$parent.$index", function (a) {
                b.$index = a;
              });
          },
        };
      },
    ]),
    d.directive("autoComplete", [
      "$document",
      "$timeout",
      "$sce",
      "$q",
      "tagsInputConfig",
      "tiUtil",
      function (b, c, d, e, f, g) {
        function h(a, b, c) {
          var d,
            f,
            h,
            i = {};
          return (
            (h = function () {
              return b.tagsInput.keyProperty || b.tagsInput.displayProperty;
            }),
            (d = function (a, c) {
              return a.filter(function (a) {
                return !g.findInObjectArray(c, a, h(), function (a, c) {
                  return (
                    b.tagsInput.replaceSpacesWithDashes &&
                      ((a = g.replaceSpacesWithDashes(a)),
                      (c = g.replaceSpacesWithDashes(c))),
                    g.defaultComparer(a, c)
                  );
                });
              });
            }),
            (i.reset = function () {
              (f = null),
                (i.items = []),
                (i.visible = !1),
                (i.index = -1),
                (i.selected = null),
                (i.query = null);
            }),
            (i.show = function () {
              b.selectFirstMatch ? i.select(0) : (i.selected = null),
                (i.visible = !0);
            }),
            (i.load = g.debounce(function (c, j) {
              i.query = c;
              var k = e.when(a({ $query: c }));
              (f = k),
                k.then(function (a) {
                  k === f &&
                    ((a = g.makeObjectArray(a.data || a, h())),
                    (a = d(a, j)),
                    (i.items = a.slice(0, b.maxResultsToShow)),
                    i.items.length > 0 ? i.show() : i.reset());
                });
            }, b.debounceDelay)),
            (i.selectNext = function () {
              i.select(++i.index);
            }),
            (i.selectPrior = function () {
              i.select(--i.index);
            }),
            (i.select = function (a) {
              0 > a ? (a = i.items.length - 1) : a >= i.items.length && (a = 0),
                (i.index = a),
                (i.selected = i.items[a]),
                c.trigger("suggestion-selected", a);
            }),
            i.reset(),
            i
          );
        }
        function i(a, b) {
          var c = a.find("li").eq(b),
            d = c.parent(),
            e = c.prop("offsetTop"),
            f = c.prop("offsetHeight"),
            g = d.prop("clientHeight"),
            h = d.prop("scrollTop");
          h > e
            ? d.prop("scrollTop", e)
            : e + f > g + h && d.prop("scrollTop", e + f - g);
        }
        return {
          restrict: "E",
          require: "^tagsInput",
          scope: { source: "&", matchClass: "&" },
          templateUrl: "ngTagsInput/auto-complete.html",
          controller: [
            "$scope",
            "$element",
            "$attrs",
            function (a, b, c) {
              (a.events = g.simplePubSub()),
                f.load("autoComplete", a, c, {
                  template: [String, "ngTagsInput/auto-complete-match.html"],
                  debounceDelay: [Number, 100],
                  minLength: [Number, 3],
                  highlightMatchedText: [Boolean, !0],
                  maxResultsToShow: [Number, 10],
                  loadOnDownArrow: [Boolean, !1],
                  loadOnEmpty: [Boolean, !1],
                  loadOnFocus: [Boolean, !1],
                  selectFirstMatch: [Boolean, !0],
                  displayProperty: [String, ""],
                }),
                (a.suggestionList = new h(a.source, a.options, a.events)),
                (this.registerAutocompleteMatch = function () {
                  return {
                    getOptions: function () {
                      return a.options;
                    },
                    getQuery: function () {
                      return a.suggestionList.query;
                    },
                  };
                });
            },
          ],
          link: function (b, c, d, e) {
            var f,
              h = [a.enter, a.tab, a.escape, a.up, a.down],
              j = b.suggestionList,
              k = e.registerAutocomplete(),
              l = b.options,
              m = b.events;
            (l.tagsInput = k.getOptions()),
              (f = function (a) {
                return (a && a.length >= l.minLength) || (!a && l.loadOnEmpty);
              }),
              (b.templateScope = k.getTemplateScope()),
              (b.addSuggestionByIndex = function (a) {
                j.select(a), b.addSuggestion();
              }),
              (b.addSuggestion = function () {
                var a = !1;
                return (
                  j.selected &&
                    (k.addTag(angular.copy(j.selected)), j.reset(), (a = !0)),
                  a
                );
              }),
              (b.track = function (a) {
                return a[
                  l.tagsInput.keyProperty || l.tagsInput.displayProperty
                ];
              }),
              (b.getSuggestionClass = function (a, c) {
                var d = a === j.selected;
                return [
                  b.matchClass({ $match: a, $index: c, $selected: d }),
                  { selected: d },
                ];
              }),
              k
                .on(
                  "tag-added tag-removed invalid-tag input-blur",
                  function () {
                    j.reset();
                  }
                )
                .on("input-change", function (a) {
                  f(a) ? j.load(a, k.getTags()) : j.reset();
                })
                .on("input-focus", function () {
                  var a = k.getCurrentTagText();
                  l.loadOnFocus && f(a) && j.load(a, k.getTags());
                })
                .on("input-keydown", function (c) {
                  var d = c.keyCode,
                    e = !1;
                  if (!g.isModifierOn(c) && -1 !== h.indexOf(d))
                    return (
                      j.visible
                        ? d === a.down
                          ? (j.selectNext(), (e = !0))
                          : d === a.up
                          ? (j.selectPrior(), (e = !0))
                          : d === a.escape
                          ? (j.reset(), (e = !0))
                          : (d === a.enter || d === a.tab) &&
                            (e = b.addSuggestion())
                        : d === a.down &&
                          b.options.loadOnDownArrow &&
                          (j.load(k.getCurrentTagText(), k.getTags()),
                          (e = !0)),
                      e
                        ? (c.preventDefault(), c.stopImmediatePropagation(), !1)
                        : void 0
                    );
                }),
              m.on("suggestion-selected", function (a) {
                i(c, a);
              });
          },
        };
      },
    ]),
    d.directive("tiAutocompleteMatch", [
      "$sce",
      "tiUtil",
      function (a, b) {
        return {
          restrict: "E",
          require: "^autoComplete",
          template: '<ng-include src="$$template"></ng-include>',
          scope: { $scope: "=scope", data: "=" },
          link: function (c, d, e, f) {
            var g = f.registerAutocompleteMatch(),
              h = g.getOptions();
            (c.$$template = h.template),
              (c.$index = c.$parent.$index),
              (c.$highlight = function (c) {
                return (
                  h.highlightMatchedText &&
                    (c = b.safeHighlight(c, g.getQuery())),
                  a.trustAsHtml(c)
                );
              }),
              (c.$getDisplayText = function () {
                return b.safeToString(
                  c.data[h.displayProperty || h.tagsInput.displayProperty]
                );
              });
          },
        };
      },
    ]),
    d.directive("tiTranscludeAppend", function () {
      return function (a, b, c, d, e) {
        e(function (a) {
          b.append(a);
        });
      };
    }),
    d.directive("tiAutosize", [
      "tagsInputConfig",
      function (a) {
        return {
          restrict: "A",
          require: "ngModel",
          link: function (b, c, d, e) {
            var f,
              g,
              h = a.getTextAutosizeThreshold();
            (f = angular.element('<span class="input"></span>')),
              f
                .css("display", "none")
                .css("visibility", "hidden")
                .css("width", "auto")
                .css("white-space", "pre"),
              c.parent().append(f),
              (g = function (a) {
                var b,
                  e = a;
                return (
                  angular.isString(e) && 0 === e.length && (e = d.placeholder),
                  e &&
                    (f.text(e),
                    f.css("display", ""),
                    (b = f.prop("offsetWidth")),
                    f.css("display", "none")),
                  c.css("width", b ? b + h + "px" : ""),
                  a
                );
              }),
              e.$parsers.unshift(g),
              e.$formatters.unshift(g),
              d.$observe("placeholder", function (a) {
                e.$modelValue || g(a);
              });
          },
        };
      },
    ]),
    d.directive("tiBindAttrs", function () {
      return function (a, b, c) {
        a.$watch(
          c.tiBindAttrs,
          function (a) {
            angular.forEach(a, function (a, b) {
              c.$set(b, a);
            });
          },
          !0
        );
      };
    }),
    d.provider("tagsInputConfig", function () {
      var a = {},
        b = {},
        c = 3;
      (this.setDefaults = function (b, c) {
        return (a[b] = c), this;
      }),
        (this.setActiveInterpolation = function (a, c) {
          return (b[a] = c), this;
        }),
        (this.setTextAutosizeThreshold = function (a) {
          return (c = a), this;
        }),
        (this.$get = [
          "$interpolate",
          function (d) {
            var e = {};
            return (
              (e[String] = function (a) {
                return a;
              }),
              (e[Number] = function (a) {
                return parseInt(a, 10);
              }),
              (e[Boolean] = function (a) {
                return "true" === a.toLowerCase();
              }),
              (e[RegExp] = function (a) {
                return new RegExp(a);
              }),
              {
                load: function (c, f, g, h) {
                  var i = function () {
                    return !0;
                  };
                  (f.options = {}),
                    angular.forEach(h, function (h, j) {
                      var k, l, m, n, o, p;
                      (k = h[0]),
                        (l = h[1]),
                        (m = h[2] || i),
                        (n = e[k]),
                        (o = function () {
                          var b = a[c] && a[c][j];
                          return angular.isDefined(b) ? b : l;
                        }),
                        (p = function (a) {
                          f.options[j] = a && m(a) ? n(a) : o();
                        }),
                        b[c] && b[c][j]
                          ? g.$observe(j, function (a) {
                              p(a),
                                f.events.trigger("option-change", {
                                  name: j,
                                  newValue: a,
                                });
                            })
                          : p(g[j] && d(g[j])(f.$parent));
                    });
                },
                getTextAutosizeThreshold: function () {
                  return c;
                },
              }
            );
          },
        ]);
    }),
    d.factory("tiUtil", [
      "$timeout",
      "$q",
      function (a, b) {
        var c = {};
        return (
          (c.debounce = function (b, c) {
            var d;
            return function () {
              var e = arguments;
              a.cancel(d),
                (d = a(function () {
                  b.apply(null, e);
                }, c));
            };
          }),
          (c.makeObjectArray = function (a, b) {
            if (!angular.isArray(a) || 0 === a.length || angular.isObject(a[0]))
              return a;
            var c = [];
            return (
              a.forEach(function (a) {
                var d = {};
                (d[b] = a), c.push(d);
              }),
              c
            );
          }),
          (c.findInObjectArray = function (a, b, d, e) {
            var f = null;
            return (
              (e = e || c.defaultComparer),
              a.some(function (a) {
                return e(a[d], b[d]) ? ((f = a), !0) : void 0;
              }),
              f
            );
          }),
          (c.defaultComparer = function (a, b) {
            return (
              c.safeToString(a).toLowerCase() ===
              c.safeToString(b).toLowerCase()
            );
          }),
          (c.safeHighlight = function (a, b) {
            function d(a) {
              return a.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
            }
            if (((a = c.encodeHTML(a)), (b = c.encodeHTML(b)), !b)) return a;
            var e = new RegExp("&[^;]+;|" + d(b), "gi");
            return a.replace(e, function (a) {
              return a.toLowerCase() === b.toLowerCase()
                ? "<em>" + a + "</em>"
                : a;
            });
          }),
          (c.safeToString = function (a) {
            return angular.isUndefined(a) || null == a
              ? ""
              : a.toString().trim();
          }),
          (c.encodeHTML = function (a) {
            return c
              .safeToString(a)
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;");
          }),
          (c.handleUndefinedResult = function (a, b) {
            return function () {
              var c = a.apply(null, arguments);
              return angular.isUndefined(c) ? b : c;
            };
          }),
          (c.replaceSpacesWithDashes = function (a) {
            return c.safeToString(a).replace(/\s/g, "-");
          }),
          (c.isModifierOn = function (a) {
            return a.shiftKey || a.ctrlKey || a.altKey || a.metaKey;
          }),
          (c.promisifyValue = function (a) {
            return (
              (a = angular.isUndefined(a) ? !0 : a), b[a ? "when" : "reject"]()
            );
          }),
          (c.simplePubSub = function () {
            var a = {};
            return {
              on: function (b, c, d) {
                return (
                  b.split(" ").forEach(function (b) {
                    a[b] || (a[b] = []);
                    var e = d ? [].unshift : [].push;
                    e.call(a[b], c);
                  }),
                  this
                );
              },
              trigger: function (b, d) {
                var e = a[b] || [];
                return (
                  e.every(function (a) {
                    return c.handleUndefinedResult(a, !0)(d);
                  }),
                  this
                );
              },
            };
          }),
          c
        );
      },
    ]),
    d.run([
      "$templateCache",
      function (a) {
        a.put(
          "ngTagsInput/tags-input.html",
          '<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="getTagClass(tag, $index)" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item scope="templateScope" data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'
        ),
          a.put(
            "ngTagsInput/tag-item.html",
            '<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'
          ),
          a.put(
            "ngTagsInput/auto-complete.html",
            '<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="getSuggestionClass(item, $index)" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match scope="templateScope" data="::item"></ti-autocomplete-match></li></ul></div>'
          ),
          a.put(
            "ngTagsInput/auto-complete-match.html",
            '<span ng-bind-html="$highlight($getDisplayText())"></span>'
          );
      },
    ]);
})();

var t,e;t=self,e=()=>(()=>{var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"t",{value:!0})};var e,s={};t.r(s),t.d(s,{AbortError:()=>r,DefaultHttpClient:()=>H,HttpClient:()=>d,HttpError:()=>i,HttpResponse:()=>u,HttpTransportType:()=>F,HubConnection:()=>q,HubConnectionBuilder:()=>tt,HubConnectionState:()=>A,JsonHubProtocol:()=>Y,LogLevel:()=>e,MessageType:()=>x,NullLogger:()=>f,Subject:()=>U,TimeoutError:()=>n,TransferFormat:()=>B,VERSION:()=>p});class i extends Error{constructor(t,e){const s=new.target.prototype;super(`${t}: Status code '${e}'`),this.statusCode=e,this.__proto__=s}}class n extends Error{constructor(t="A timeout occurred."){const e=new.target.prototype;super(t),this.__proto__=e}}class r extends Error{constructor(t="An abort occurred."){const e=new.target.prototype;super(t),this.__proto__=e}}class o extends Error{constructor(t,e){const s=new.target.prototype;super(t),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=s}}class h extends Error{constructor(t,e){const s=new.target.prototype;super(t),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=s}}class c extends Error{constructor(t,e){const s=new.target.prototype;super(t),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=s}}class a extends Error{constructor(t){const e=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}}class l extends Error{constructor(t,e){const s=new.target.prototype;super(t),this.innerErrors=e,this.__proto__=s}}class u{constructor(t,e,s){this.statusCode=t,this.statusText=e,this.content=s}}class d{get(t,e){return this.send({...e,method:"GET",url:t})}post(t,e){return this.send({...e,method:"POST",url:t})}delete(t,e){return this.send({...e,method:"DELETE",url:t})}getCookieString(t){return""}}!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(e||(e={}));class f{constructor(){}log(t,e){}}f.instance=new f;const p="8.0.7";class w{static isRequired(t,e){if(null==t)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(t,e){if(!t||t.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(t,e,s){if(!(t in e))throw new Error(`Unknown ${s} value: ${t}.`)}}class g{static get isBrowser(){return!g.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!g.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!g.isNode&&"object"==typeof window&&void 0===window.document}static get isNode(){return"undefined"!=typeof process&&process.release&&"node"===process.release.name}}function m(t,e){let s="";return y(t)?(s=`Binary data of length ${t.byteLength}`,e&&(s+=`. Content: '${function(t){const e=new Uint8Array(t);let s="";return e.forEach((t=>{s+=`0x${t<16?"0":""}${t.toString(16)} `})),s.substr(0,s.length-1)}(t)}'`)):"string"==typeof t&&(s=`String data of length ${t.length}`,e&&(s+=`. Content: '${t}'`)),s}function y(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}async function b(t,s,i,n,r,o){const h={},[c,a]=$();h[c]=a,t.log(e.Trace,`(${s} transport) sending data. ${m(r,o.logMessageContent)}.`);const l=y(r)?"arraybuffer":"text",u=await i.post(n,{content:r,headers:{...h,...o.headers},responseType:l,timeout:o.timeout,withCredentials:o.withCredentials});t.log(e.Trace,`(${s} transport) request complete. Response status: ${u.statusCode}.`)}class v{constructor(t,e){this.i=t,this.h=e}dispose(){const t=this.i.observers.indexOf(this.h);t>-1&&this.i.observers.splice(t,1),0===this.i.observers.length&&this.i.cancelCallback&&this.i.cancelCallback().catch((t=>{}))}}class E{constructor(t){this.l=t,this.out=console}log(t,s){if(t>=this.l){const i=`[${(new Date).toISOString()}] ${e[t]}: ${s}`;switch(t){case e.Critical:case e.Error:this.out.error(i);break;case e.Warning:this.out.warn(i);break;case e.Information:this.out.info(i);break;default:this.out.log(i)}}}}function $(){let t="X-SignalR-User-Agent";return g.isNode&&(t="User-Agent"),[t,C(p,S(),g.isNode?"NodeJS":"Browser",k())]}function C(t,e,s,i){let n="Microsoft SignalR/";const r=t.split(".");return n+=`${r[0]}.${r[1]}`,n+=` (${t}; `,n+=e&&""!==e?`${e}; `:"Unknown OS; ",n+=`${s}`,n+=i?`; ${i}`:"; Unknown Runtime Version",n+=")",n}function S(){if(!g.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function k(){if(g.isNode)return process.versions.node}function P(t){return t.stack?t.stack:t.message?t.message:`${t}`}class T extends d{constructor(e){if(super(),this.u=e,"undefined"==typeof fetch||g.isNode){const t=require;this.p=new(t("tough-cookie").CookieJar),"undefined"==typeof fetch?this.m=t("node-fetch"):this.m=fetch,this.m=t("fetch-cookie")(this.m,this.p)}else this.m=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const t=require;this.v=t("abort-controller")}else this.v=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new r;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const s=new this.v;let o;t.abortSignal&&(t.abortSignal.onabort=()=>{s.abort(),o=new r});let h,c=null;if(t.timeout){const i=t.timeout;c=setTimeout((()=>{s.abort(),this.u.log(e.Warning,"Timeout from HTTP request."),o=new n}),i)}""===t.content&&(t.content=void 0),t.content&&(t.headers=t.headers||{},y(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");try{h=await this.m(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(t){if(o)throw o;throw this.u.log(e.Warning,`Error from HTTP request. ${t}.`),t}finally{c&&clearTimeout(c),t.abortSignal&&(t.abortSignal.onabort=null)}if(!h.ok){const t=await I(h,"text");throw new i(t||h.statusText,h.status)}const a=I(h,t.responseType),l=await a;return new u(h.status,h.statusText,l)}getCookieString(t){let e="";return g.isNode&&this.p&&this.p.getCookies(t,((t,s)=>e=s.join("; "))),e}}function I(t,e){let s;switch(e){case"arraybuffer":s=t.arrayBuffer();break;case"text":default:s=t.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`)}return s}class _ extends d{constructor(t){super(),this.u=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new r):t.method?t.url?new Promise(((s,o)=>{const h=new XMLHttpRequest;h.open(t.method,t.url,!0),h.withCredentials=void 0===t.withCredentials||t.withCredentials,h.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===t.content&&(t.content=void 0),t.content&&(y(t.content)?h.setRequestHeader("Content-Type","application/octet-stream"):h.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const c=t.headers;c&&Object.keys(c).forEach((t=>{h.setRequestHeader(t,c[t])})),t.responseType&&(h.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{h.abort(),o(new r)}),t.timeout&&(h.timeout=t.timeout),h.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),h.status>=200&&h.status<300?s(new u(h.status,h.statusText,h.response||h.responseText)):o(new i(h.response||h.responseText||h.statusText,h.status))},h.onerror=()=>{this.u.log(e.Warning,`Error from HTTP request. ${h.status}: ${h.statusText}.`),o(new i(h.statusText,h.status))},h.ontimeout=()=>{this.u.log(e.Warning,"Timeout from HTTP request."),o(new n)},h.send(t.content)})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class H extends d{constructor(t){if(super(),"undefined"!=typeof fetch||g.isNode)this.$=new T(t);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this.$=new _(t)}}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new r):t.method?t.url?this.$.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this.$.getCookieString(t)}}class D{static write(t){return`${t}${D.RecordSeparator}`}static parse(t){if(t[t.length-1]!==D.RecordSeparator)throw new Error("Message is incomplete.");const e=t.split(D.RecordSeparator);return e.pop(),e}}D.RecordSeparatorCode=30,D.RecordSeparator=String.fromCharCode(D.RecordSeparatorCode);class R{writeHandshakeRequest(t){return D.write(JSON.stringify(t))}parseHandshakeResponse(t){let e,s;if(y(t)){const i=new Uint8Array(t),n=i.indexOf(D.RecordSeparatorCode);if(-1===n)throw new Error("Message is incomplete.");const r=n+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(i.slice(0,r))),s=i.byteLength>r?i.slice(r).buffer:null}else{const i=t,n=i.indexOf(D.RecordSeparator);if(-1===n)throw new Error("Message is incomplete.");const r=n+1;e=i.substring(0,r),s=i.length>r?i.substring(r):null}const i=D.parse(e),n=JSON.parse(i[0]);if(n.type)throw new Error("Expected a handshake response from the server.");return[s,n]}}var x,A;!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close",t[t.Ack=8]="Ack",t[t.Sequence=9]="Sequence"}(x||(x={}));class U{constructor(){this.observers=[]}next(t){for(const e of this.observers)e.next(t)}error(t){for(const e of this.observers)e.error&&e.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new v(this,t)}}class L{constructor(t,e,s){this.C=1e5,this.S=[],this.k=0,this.P=!1,this.T=1,this.I=0,this._=0,this.H=!1,this.D=t,this.R=e,this.C=s}async A(t){const e=this.D.writeMessage(t);let s=Promise.resolve();if(this.U(t)){this.k++;let t=()=>{},i=()=>{};y(e)?this._+=e.byteLength:this._+=e.length,this._>=this.C&&(s=new Promise(((e,s)=>{t=e,i=s}))),this.S.push(new N(e,this.k,t,i))}try{this.H||await this.R.send(e)}catch{this.L()}await s}N(t){let e=-1;for(let s=0;s<this.S.length;s++){const i=this.S[s];if(i.q<=t.sequenceId)e=s,y(i.M)?this._-=i.M.byteLength:this._-=i.M.length,i.j();else{if(!(this._<this.C))break;i.j()}}-1!==e&&(this.S=this.S.slice(e+1))}W(t){if(this.P)return t.type===x.Sequence&&(this.P=!1,!0);if(!this.U(t))return!0;const e=this.T;return this.T++,e<=this.I?(e===this.I&&this.O(),!1):(this.I=e,this.O(),!0)}F(t){t.sequenceId>this.T?this.R.stop(new Error("Sequence ID greater than amount of messages we've received.")):this.T=t.sequenceId}L(){this.H=!0,this.P=!0}async B(){const t=0!==this.S.length?this.S[0].q:this.k+1;await this.R.send(this.D.writeMessage({type:x.Sequence,sequenceId:t}));const e=this.S;for(const t of e)await this.R.send(t.M);this.H=!1}X(t){null!=t||(t=new Error("Unable to reconnect to server."));for(const e of this.S)e.J(t)}U(t){switch(t.type){case x.Invocation:case x.StreamItem:case x.Completion:case x.StreamInvocation:case x.CancelInvocation:return!0;case x.Close:case x.Sequence:case x.Ping:case x.Ack:return!1}}O(){void 0===this.V&&(this.V=setTimeout((async()=>{try{this.H||await this.R.send(this.D.writeMessage({type:x.Ack,sequenceId:this.I}))}catch{}clearTimeout(this.V),this.V=void 0}),1e3))}}class N{constructor(t,e,s,i){this.M=t,this.q=e,this.j=s,this.J=i}}!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(A||(A={}));class q{static create(t,e,s,i,n,r,o){return new q(t,e,s,i,n,r,o)}constructor(t,s,i,n,r,o,h){this.K=0,this.G=()=>{this.u.log(e.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},w.isRequired(t,"connection"),w.isRequired(s,"logger"),w.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=null!=r?r:3e4,this.keepAliveIntervalInMilliseconds=null!=o?o:15e3,this.Y=null!=h?h:1e5,this.u=s,this.D=i,this.connection=t,this.Z=n,this.tt=new R,this.connection.onreceive=t=>this.et(t),this.connection.onclose=t=>this.st(t),this.it={},this.nt={},this.rt=[],this.ot=[],this.ht=[],this.ct=0,this.lt=!1,this.ut=A.Disconnected,this.dt=!1,this.ft=this.D.writeMessage({type:x.Ping})}get state(){return this.ut}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this.ut!==A.Disconnected&&this.ut!==A.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this.wt=this.gt(),this.wt}async gt(){if(this.ut!==A.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this.ut=A.Connecting,this.u.log(e.Debug,"Starting HubConnection.");try{await this.yt(),g.isBrowser&&window.document.addEventListener("freeze",this.G),this.ut=A.Connected,this.dt=!0,this.u.log(e.Debug,"HubConnection connected successfully.")}catch(t){return this.ut=A.Disconnected,this.u.log(e.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}}async yt(){this.bt=void 0,this.lt=!1;const t=new Promise(((t,e)=>{this.vt=t,this.Et=e}));await this.connection.start(this.D.transferFormat);try{let s=this.D.version;this.connection.features.reconnect||(s=1);const i={protocol:this.D.name,version:s};if(this.u.log(e.Debug,"Sending handshake request."),await this.$t(this.tt.writeHandshakeRequest(i)),this.u.log(e.Information,`Using HubProtocol '${this.D.name}'.`),this.Ct(),this.St(),this.kt(),await t,this.bt)throw this.bt;!!this.connection.features.reconnect&&(this.Pt=new L(this.D,this.connection,this.Y),this.connection.features.disconnected=this.Pt.L.bind(this.Pt),this.connection.features.resend=()=>{if(this.Pt)return this.Pt.B()}),this.connection.features.inherentKeepAlive||await this.$t(this.ft)}catch(t){throw this.u.log(e.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this.Ct(),this.Tt(),await this.connection.stop(t),t}}async stop(){const t=this.wt;this.connection.features.reconnect=!1,this.It=this._t(),await this.It;try{await t}catch(t){}}_t(t){if(this.ut===A.Disconnected)return this.u.log(e.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this.ut===A.Disconnecting)return this.u.log(e.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this.It;const s=this.ut;return this.ut=A.Disconnecting,this.u.log(e.Debug,"Stopping HubConnection."),this.Ht?(this.u.log(e.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this.Ht),this.Ht=void 0,this.Dt(),Promise.resolve()):(s===A.Connected&&this.Rt(),this.Ct(),this.Tt(),this.bt=t||new r("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}async Rt(){try{await this.xt(this.At())}catch{}}stream(t,...e){const[s,i]=this.Ut(e),n=this.Lt(t,e,i);let r;const o=new U;return o.cancelCallback=()=>{const t=this.Nt(n.invocationId);return delete this.it[n.invocationId],r.then((()=>this.xt(t)))},this.it[n.invocationId]=(t,e)=>{e?o.error(e):t&&(t.type===x.Completion?t.error?o.error(new Error(t.error)):o.complete():o.next(t.item))},r=this.xt(n).catch((t=>{o.error(t),delete this.it[n.invocationId]})),this.qt(s,r),o}$t(t){return this.kt(),this.connection.send(t)}xt(t){return this.Pt?this.Pt.A(t):this.$t(this.D.writeMessage(t))}send(t,...e){const[s,i]=this.Ut(e),n=this.xt(this.Mt(t,e,!0,i));return this.qt(s,n),n}invoke(t,...e){const[s,i]=this.Ut(e),n=this.Mt(t,e,!1,i);return new Promise(((t,e)=>{this.it[n.invocationId]=(s,i)=>{i?e(i):s&&(s.type===x.Completion?s.error?e(new Error(s.error)):t(s.result):e(new Error(`Unexpected message type: ${s.type}`)))};const i=this.xt(n).catch((t=>{e(t),delete this.it[n.invocationId]}));this.qt(s,i)}))}on(t,e){t&&e&&(t=t.toLowerCase(),this.nt[t]||(this.nt[t]=[]),-1===this.nt[t].indexOf(e)&&this.nt[t].push(e))}off(t,e){if(!t)return;t=t.toLowerCase();const s=this.nt[t];if(s)if(e){const i=s.indexOf(e);-1!==i&&(s.splice(i,1),0===s.length&&delete this.nt[t])}else delete this.nt[t]}onclose(t){t&&this.rt.push(t)}onreconnecting(t){t&&this.ot.push(t)}onreconnected(t){t&&this.ht.push(t)}et(t){if(this.Ct(),this.lt||(t=this.jt(t),this.lt=!0),t){const s=this.D.parseMessages(t,this.u);for(const t of s)if(!this.Pt||this.Pt.W(t))switch(t.type){case x.Invocation:this.Wt(t).catch((t=>{this.u.log(e.Error,`Invoke client method threw error: ${P(t)}`)}));break;case x.StreamItem:case x.Completion:{const s=this.it[t.invocationId];if(s){t.type===x.Completion&&delete this.it[t.invocationId];try{s(t)}catch(t){this.u.log(e.Error,`Stream callback threw error: ${P(t)}`)}}break}case x.Ping:break;case x.Close:{this.u.log(e.Information,"Close message received from server.");const s=t.error?new Error("Server returned an error on close: "+t.error):void 0;!0===t.allowReconnect?this.connection.stop(s):this.It=this._t(s);break}case x.Ack:this.Pt&&this.Pt.N(t);break;case x.Sequence:this.Pt&&this.Pt.F(t);break;default:this.u.log(e.Warning,`Invalid message type: ${t.type}.`)}}this.St()}jt(t){let s,i;try{[i,s]=this.tt.parseHandshakeResponse(t)}catch(t){const s="Error parsing handshake response: "+t;this.u.log(e.Error,s);const i=new Error(s);throw this.Et(i),i}if(s.error){const t="Server returned handshake error: "+s.error;this.u.log(e.Error,t);const i=new Error(t);throw this.Et(i),i}return this.u.log(e.Debug,"Server handshake complete."),this.vt(),i}kt(){this.connection.features.inherentKeepAlive||(this.K=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this.Tt())}St(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this.Ot=setTimeout((()=>this.serverTimeout()),this.serverTimeoutInMilliseconds),void 0!==this.Ft))){let t=this.K-(new Date).getTime();t<0&&(t=0),this.Ft=setTimeout((async()=>{if(this.ut===A.Connected)try{await this.$t(this.ft)}catch{this.Tt()}}),t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async Wt(t){const s=t.target.toLowerCase(),i=this.nt[s];if(!i)return this.u.log(e.Warning,`No client method with the name '${s}' found.`),void(t.invocationId&&(this.u.log(e.Warning,`No result given for '${s}' method and invocation ID '${t.invocationId}'.`),await this.xt(this.Bt(t.invocationId,"Client didn't provide a result.",null))));const n=i.slice(),r=!!t.invocationId;let o,h,c;for(const i of n)try{const n=o;o=await i.apply(this,t.arguments),r&&o&&n&&(this.u.log(e.Error,`Multiple results provided for '${s}'. Sending error to server.`),c=this.Bt(t.invocationId,"Client provided multiple results.",null)),h=void 0}catch(t){h=t,this.u.log(e.Error,`A callback for the method '${s}' threw error '${t}'.`)}c?await this.xt(c):r?(h?c=this.Bt(t.invocationId,`${h}`,null):void 0!==o?c=this.Bt(t.invocationId,null,o):(this.u.log(e.Warning,`No result given for '${s}' method and invocation ID '${t.invocationId}'.`),c=this.Bt(t.invocationId,"Client didn't provide a result.",null)),await this.xt(c)):o&&this.u.log(e.Error,`Result given for '${s}' method but server is not expecting a result.`)}st(t){this.u.log(e.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this.ut}.`),this.bt=this.bt||t||new r("The underlying connection was closed before the hub handshake could complete."),this.vt&&this.vt(),this.Xt(t||new Error("Invocation canceled due to the underlying connection being closed.")),this.Ct(),this.Tt(),this.ut===A.Disconnecting?this.Dt(t):this.ut===A.Connected&&this.Z?this.Jt(t):this.ut===A.Connected&&this.Dt(t)}Dt(t){if(this.dt){this.ut=A.Disconnected,this.dt=!1,this.Pt&&(this.Pt.X(null!=t?t:new Error("Connection closed.")),this.Pt=void 0),g.isBrowser&&window.document.removeEventListener("freeze",this.G);try{this.rt.forEach((e=>e.apply(this,[t])))}catch(s){this.u.log(e.Error,`An onclose callback called with error '${t}' threw error '${s}'.`)}}}async Jt(t){const s=Date.now();let i=0,n=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),r=this.zt(i++,0,n);if(null===r)return this.u.log(e.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this.Dt(t);if(this.ut=A.Reconnecting,t?this.u.log(e.Information,`Connection reconnecting because of error '${t}'.`):this.u.log(e.Information,"Connection reconnecting."),0!==this.ot.length){try{this.ot.forEach((e=>e.apply(this,[t])))}catch(s){this.u.log(e.Error,`An onreconnecting callback called with error '${t}' threw error '${s}'.`)}if(this.ut!==A.Reconnecting)return void this.u.log(e.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==r;){if(this.u.log(e.Information,`Reconnect attempt number ${i} will start in ${r} ms.`),await new Promise((t=>{this.Ht=setTimeout(t,r)})),this.Ht=void 0,this.ut!==A.Reconnecting)return void this.u.log(e.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this.yt(),this.ut=A.Connected,this.u.log(e.Information,"HubConnection reconnected successfully."),0!==this.ht.length)try{this.ht.forEach((t=>t.apply(this,[this.connection.connectionId])))}catch(t){this.u.log(e.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${t}'.`)}return}catch(t){if(this.u.log(e.Information,`Reconnect attempt failed because of error '${t}'.`),this.ut!==A.Reconnecting)return this.u.log(e.Debug,`Connection moved to the '${this.ut}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(this.ut===A.Disconnecting&&this.Dt());n=t instanceof Error?t:new Error(t.toString()),r=this.zt(i++,Date.now()-s,n)}}this.u.log(e.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${i} failed attempts. Connection disconnecting.`),this.Dt()}zt(t,s,i){try{return this.Z.nextRetryDelayInMilliseconds({elapsedMilliseconds:s,previousRetryCount:t,retryReason:i})}catch(i){return this.u.log(e.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${s}) threw error '${i}'.`),null}}Xt(t){const s=this.it;this.it={},Object.keys(s).forEach((i=>{const n=s[i];try{n(null,t)}catch(s){this.u.log(e.Error,`Stream 'error' callback called with '${t}' threw error: ${P(s)}`)}}))}Tt(){this.Ft&&(clearTimeout(this.Ft),this.Ft=void 0)}Ct(){this.Ot&&clearTimeout(this.Ot)}Mt(t,e,s,i){if(s)return 0!==i.length?{arguments:e,streamIds:i,target:t,type:x.Invocation}:{arguments:e,target:t,type:x.Invocation};{const s=this.ct;return this.ct++,0!==i.length?{arguments:e,invocationId:s.toString(),streamIds:i,target:t,type:x.Invocation}:{arguments:e,invocationId:s.toString(),target:t,type:x.Invocation}}}qt(t,e){if(0!==t.length){e||(e=Promise.resolve());for(const s in t)t[s].subscribe({complete:()=>{e=e.then((()=>this.xt(this.Bt(s))))},error:t=>{let i;i=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then((()=>this.xt(this.Bt(s,i))))},next:t=>{e=e.then((()=>this.xt(this.Vt(s,t))))}})}}Ut(t){const e=[],s=[];for(let i=0;i<t.length;i++){const n=t[i];if(this.Kt(n)){const r=this.ct;this.ct++,e[r]=n,s.push(r.toString()),t.splice(i,1)}}return[e,s]}Kt(t){return t&&t.subscribe&&"function"==typeof t.subscribe}Lt(t,e,s){const i=this.ct;return this.ct++,0!==s.length?{arguments:e,invocationId:i.toString(),streamIds:s,target:t,type:x.StreamInvocation}:{arguments:e,invocationId:i.toString(),target:t,type:x.StreamInvocation}}Nt(t){return{invocationId:t,type:x.CancelInvocation}}Vt(t,e){return{invocationId:t,item:e,type:x.StreamItem}}Bt(t,e,s){return e?{error:e,invocationId:t,type:x.Completion}:{invocationId:t,result:s,type:x.Completion}}At(){return{type:x.Close}}}const M=[0,2e3,1e4,3e4,null];class j{constructor(t){this.Gt=void 0!==t?[...t,null]:M}nextRetryDelayInMilliseconds(t){return this.Gt[t.previousRetryCount]}}class W{}W.Authorization="Authorization",W.Cookie="Cookie";class O extends d{constructor(t,e){super(),this.Qt=t,this.Yt=e}async send(t){let e=!0;this.Yt&&(!this.Zt||t.url&&t.url.indexOf("/negotiate?")>0)&&(e=!1,this.Zt=await this.Yt()),this.te(t);const s=await this.Qt.send(t);return e&&401===s.statusCode&&this.Yt?(this.Zt=await this.Yt(),this.te(t),await this.Qt.send(t)):s}te(t){t.headers||(t.headers={}),this.Zt?t.headers[W.Authorization]=`Bearer ${this.Zt}`:this.Yt&&t.headers[W.Authorization]&&delete t.headers[W.Authorization]}getCookieString(t){return this.Qt.getCookieString(t)}}var F,B;!function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(F||(F={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(B||(B={}));class X{constructor(){this.ee=!1,this.onabort=null}abort(){this.ee||(this.ee=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this.ee}}class J{get pollAborted(){return this.se.aborted}constructor(t,e,s){this.$=t,this.u=e,this.se=new X,this.ie=s,this.ne=!1,this.onreceive=null,this.onclose=null}async connect(t,s){if(w.isRequired(t,"url"),w.isRequired(s,"transferFormat"),w.isIn(s,B,"transferFormat"),this.re=t,this.u.log(e.Trace,"(LongPolling transport) Connecting."),s===B.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,r]=$(),o={[n]:r,...this.ie.headers},h={abortSignal:this.se.signal,headers:o,timeout:1e5,withCredentials:this.ie.withCredentials};s===B.Binary&&(h.responseType="arraybuffer");const c=`${t}&_=${Date.now()}`;this.u.log(e.Trace,`(LongPolling transport) polling: ${c}.`);const a=await this.$.get(c,h);200!==a.statusCode?(this.u.log(e.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),this.oe=new i(a.statusText||"",a.statusCode),this.ne=!1):this.ne=!0,this.he=this.ce(this.re,h)}async ce(t,s){try{for(;this.ne;)try{const n=`${t}&_=${Date.now()}`;this.u.log(e.Trace,`(LongPolling transport) polling: ${n}.`);const r=await this.$.get(n,s);204===r.statusCode?(this.u.log(e.Information,"(LongPolling transport) Poll terminated by server."),this.ne=!1):200!==r.statusCode?(this.u.log(e.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this.oe=new i(r.statusText||"",r.statusCode),this.ne=!1):r.content?(this.u.log(e.Trace,`(LongPolling transport) data received. ${m(r.content,this.ie.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this.u.log(e.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this.ne?t instanceof n?this.u.log(e.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.oe=t,this.ne=!1):this.u.log(e.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this.u.log(e.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.ae()}}async send(t){return this.ne?b(this.u,"LongPolling",this.$,this.re,t,this.ie):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this.u.log(e.Trace,"(LongPolling transport) Stopping polling."),this.ne=!1,this.se.abort();try{await this.he,this.u.log(e.Trace,`(LongPolling transport) sending DELETE request to ${this.re}.`);const t={},[s,n]=$();t[s]=n;const r={headers:{...t,...this.ie.headers},timeout:this.ie.timeout,withCredentials:this.ie.withCredentials};let o;try{await this.$.delete(this.re,r)}catch(t){o=t}o?o instanceof i&&(404===o.statusCode?this.u.log(e.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this.u.log(e.Trace,`(LongPolling transport) Error sending a DELETE request: ${o}`)):this.u.log(e.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this.u.log(e.Trace,"(LongPolling transport) Stop finished."),this.ae()}}ae(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this.oe&&(t+=" Error: "+this.oe),this.u.log(e.Trace,t),this.onclose(this.oe)}}}class z{constructor(t,e,s,i){this.$=t,this.Zt=e,this.u=s,this.ie=i,this.onreceive=null,this.onclose=null}async connect(t,s){return w.isRequired(t,"url"),w.isRequired(s,"transferFormat"),w.isIn(s,B,"transferFormat"),this.u.log(e.Trace,"(SSE transport) Connecting."),this.re=t,this.Zt&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this.Zt)}`),new Promise(((i,n)=>{let r,o=!1;if(s===B.Text){if(g.isBrowser||g.isWebWorker)r=new this.ie.EventSource(t,{withCredentials:this.ie.withCredentials});else{const e=this.$.getCookieString(t),s={};s.Cookie=e;const[i,n]=$();s[i]=n,r=new this.ie.EventSource(t,{withCredentials:this.ie.withCredentials,headers:{...s,...this.ie.headers}})}try{r.onmessage=t=>{if(this.onreceive)try{this.u.log(e.Trace,`(SSE transport) data received. ${m(t.data,this.ie.logMessageContent)}.`),this.onreceive(t.data)}catch(t){return void this.le(t)}},r.onerror=t=>{o?this.le():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},r.onopen=()=>{this.u.log(e.Information,`SSE connected to ${this.re}`),this.ue=r,o=!0,i()}}catch(t){return void n(t)}}else n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))}async send(t){return this.ue?b(this.u,"SSE",this.$,this.re,t,this.ie):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this.le(),Promise.resolve()}le(t){this.ue&&(this.ue.close(),this.ue=void 0,this.onclose&&this.onclose(t))}}class V{constructor(t,e,s,i,n,r){this.u=s,this.Yt=e,this.de=i,this.fe=n,this.$=t,this.onreceive=null,this.onclose=null,this.pe=r}async connect(t,s){let i;return w.isRequired(t,"url"),w.isRequired(s,"transferFormat"),w.isIn(s,B,"transferFormat"),this.u.log(e.Trace,"(WebSockets transport) Connecting."),this.Yt&&(i=await this.Yt()),new Promise(((n,r)=>{let o;t=t.replace(/^http/,"ws");const h=this.$.getCookieString(t);let c=!1;if(g.isNode||g.isReactNative){const e={},[s,n]=$();e[s]=n,i&&(e[W.Authorization]=`Bearer ${i}`),h&&(e[W.Cookie]=h),o=new this.fe(t,void 0,{headers:{...e,...this.pe}})}else i&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i)}`);o||(o=new this.fe(t)),s===B.Binary&&(o.binaryType="arraybuffer"),o.onopen=s=>{this.u.log(e.Information,`WebSocket connected to ${t}.`),this.we=o,c=!0,n()},o.onerror=t=>{let s=null;s="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",this.u.log(e.Information,`(WebSockets transport) ${s}.`)},o.onmessage=t=>{if(this.u.log(e.Trace,`(WebSockets transport) data received. ${m(t.data,this.de)}.`),this.onreceive)try{this.onreceive(t.data)}catch(t){return void this.le(t)}},o.onclose=t=>{if(c)this.le(t);else{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",r(new Error(e))}}}))}send(t){return this.we&&this.we.readyState===this.fe.OPEN?(this.u.log(e.Trace,`(WebSockets transport) sending data. ${m(t,this.de)}.`),this.we.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this.we&&this.le(void 0),Promise.resolve()}le(t){this.we&&(this.we.onclose=()=>{},this.we.onmessage=()=>{},this.we.onerror=()=>{},this.we.close(),this.we=void 0),this.u.log(e.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this.ge(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)))}ge(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code}}class K{constructor(t,s={}){var i;if(this.me=()=>{},this.features={},this.ye=1,w.isRequired(t,"url"),this.u=void 0===(i=s.logger)?new E(e.Information):null===i?f.instance:void 0!==i.log?i:new E(i),this.baseUrl=this.be(t),(s=s||{}).logMessageContent=void 0!==s.logMessageContent&&s.logMessageContent,"boolean"!=typeof s.withCredentials&&void 0!==s.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");s.withCredentials=void 0===s.withCredentials||s.withCredentials,s.timeout=void 0===s.timeout?1e5:s.timeout;let n=null,r=null;if(g.isNode){const t=require;n=t("ws"),r=t("eventsource")}g.isNode||"undefined"==typeof WebSocket||s.WebSocket?g.isNode&&!s.WebSocket&&n&&(s.WebSocket=n):s.WebSocket=WebSocket,g.isNode||"undefined"==typeof EventSource||s.EventSource?g.isNode&&!s.EventSource&&void 0!==r&&(s.EventSource=r):s.EventSource=EventSource,this.$=new O(s.httpClient||new H(this.u),s.accessTokenFactory),this.ut="Disconnected",this.dt=!1,this.ie=s,this.onreceive=null,this.onclose=null}async start(t){if(t=t||B.Binary,w.isIn(t,B,"transferFormat"),this.u.log(e.Debug,`Starting connection with transfer format '${B[t]}'.`),"Disconnected"!==this.ut)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this.ut="Connecting",this.ve=this.yt(t),await this.ve,"Disconnecting"===this.ut){const t="Failed to start the HttpConnection before stop() was called.";return this.u.log(e.Error,t),await this.It,Promise.reject(new r(t))}if("Connected"!==this.ut){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this.u.log(e.Error,t),Promise.reject(new r(t))}this.dt=!0}send(t){return"Connected"!==this.ut?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this.Ee||(this.Ee=new G(this.transport)),this.Ee.send(t))}async stop(t){return"Disconnected"===this.ut?(this.u.log(e.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===this.ut?(this.u.log(e.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this.It):(this.ut="Disconnecting",this.It=new Promise((t=>{this.me=t})),await this._t(t),void await this.It)}async _t(t){this.$e=t;try{await this.ve}catch(t){}if(this.transport){try{await this.transport.stop()}catch(t){this.u.log(e.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this.Ce()}this.transport=void 0}else this.u.log(e.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async yt(t){let s=this.baseUrl;this.Yt=this.ie.accessTokenFactory,this.$.Yt=this.Yt;try{if(this.ie.skipNegotiation){if(this.ie.transport!==F.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this.Se(F.WebSockets),await this.ke(s,t)}else{let e=null,i=0;do{if(e=await this.Pe(s),"Disconnecting"===this.ut||"Disconnected"===this.ut)throw new r("The connection was stopped during negotiation.");if(e.error)throw new Error(e.error);if(e.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(e.url&&(s=e.url),e.accessToken){const t=e.accessToken;this.Yt=()=>t,this.$.Zt=t,this.$.Yt=void 0}i++}while(e.url&&i<100);if(100===i&&e.url)throw new Error("Negotiate redirection limit exceeded.");await this.Te(s,this.ie.transport,e,t)}this.transport instanceof J&&(this.features.inherentKeepAlive=!0),"Connecting"===this.ut&&(this.u.log(e.Debug,"The HttpConnection connected successfully."),this.ut="Connected")}catch(t){return this.u.log(e.Error,"Failed to start the connection: "+t),this.ut="Disconnected",this.transport=void 0,this.me(),Promise.reject(t)}}async Pe(t){const s={},[n,r]=$();s[n]=r;const o=this.Ie(t);this.u.log(e.Debug,`Sending negotiation request: ${o}.`);try{const t=await this.$.post(o,{content:"",headers:{...s,...this.ie.headers},timeout:this.ie.timeout,withCredentials:this.ie.withCredentials});if(200!==t.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${t.statusCode}'`));const e=JSON.parse(t.content);return(!e.negotiateVersion||e.negotiateVersion<1)&&(e.connectionToken=e.connectionId),e.useStatefulReconnect&&!0!==this.ie._e?Promise.reject(new a("Client didn't negotiate Stateful Reconnect but the server did.")):e}catch(t){let s="Failed to complete negotiation with the server: "+t;return t instanceof i&&404===t.statusCode&&(s+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this.u.log(e.Error,s),Promise.reject(new a(s))}}He(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+`id=${e}`:t}async Te(t,s,i,n){let o=this.He(t,i.connectionToken);if(this.De(s))return this.u.log(e.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=s,await this.ke(o,n),void(this.connectionId=i.connectionId);const h=[],a=i.availableTransports||[];let u=i;for(const i of a){const a=this.Re(i,s,n,!0===(null==u?void 0:u.useStatefulReconnect));if(a instanceof Error)h.push(`${i.transport} failed:`),h.push(a);else if(this.De(a)){if(this.transport=a,!u){try{u=await this.Pe(t)}catch(t){return Promise.reject(t)}o=this.He(t,u.connectionToken)}try{return await this.ke(o,n),void(this.connectionId=u.connectionId)}catch(t){if(this.u.log(e.Error,`Failed to start the transport '${i.transport}': ${t}`),u=void 0,h.push(new c(`${i.transport} failed: ${t}`,F[i.transport])),"Connecting"!==this.ut){const t="Failed to select transport before stop() was called.";return this.u.log(e.Debug,t),Promise.reject(new r(t))}}}}return h.length>0?Promise.reject(new l(`Unable to connect to the server with any of the available transports. ${h.join(" ")}`,h)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}Se(t){switch(t){case F.WebSockets:if(!this.ie.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new V(this.$,this.Yt,this.u,this.ie.logMessageContent,this.ie.WebSocket,this.ie.headers||{});case F.ServerSentEvents:if(!this.ie.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new z(this.$,this.$.Zt,this.u,this.ie);case F.LongPolling:return new J(this.$,this.u,this.ie);default:throw new Error(`Unknown transport: ${t}.`)}}ke(t,e){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async s=>{let i=!1;if(this.features.reconnect){try{this.features.disconnected(),await this.transport.connect(t,e),await this.features.resend()}catch{i=!0}i&&this.Ce(s)}else this.Ce(s)}:this.transport.onclose=t=>this.Ce(t),this.transport.connect(t,e)}Re(t,s,i,n){const r=F[t.transport];if(null==r)return this.u.log(e.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(!function(t,e){return!t||0!=(e&t)}(s,r))return this.u.log(e.Debug,`Skipping transport '${F[r]}' because it was disabled by the client.`),new h(`'${F[r]}' is disabled by the client.`,r);if(!(t.transferFormats.map((t=>B[t])).indexOf(i)>=0))return this.u.log(e.Debug,`Skipping transport '${F[r]}' because it does not support the requested transfer format '${B[i]}'.`),new Error(`'${F[r]}' does not support ${B[i]}.`);if(r===F.WebSockets&&!this.ie.WebSocket||r===F.ServerSentEvents&&!this.ie.EventSource)return this.u.log(e.Debug,`Skipping transport '${F[r]}' because it is not supported in your environment.'`),new o(`'${F[r]}' is not supported in your environment.`,r);this.u.log(e.Debug,`Selecting transport '${F[r]}'.`);try{return this.features.reconnect=r===F.WebSockets?n:void 0,this.Se(r)}catch(t){return t}}De(t){return t&&"object"==typeof t&&"connect"in t}Ce(t){if(this.u.log(e.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this.ut}.`),this.transport=void 0,t=this.$e||t,this.$e=void 0,"Disconnected"!==this.ut){if("Connecting"===this.ut)throw this.u.log(e.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this.ut&&this.me(),t?this.u.log(e.Error,`Connection disconnected with error '${t}'.`):this.u.log(e.Information,"Connection disconnected."),this.Ee&&(this.Ee.stop().catch((t=>{this.u.log(e.Error,`TransportSendQueue.stop() threw error '${t}'.`)})),this.Ee=void 0),this.connectionId=void 0,this.ut="Disconnected",this.dt){this.dt=!1;try{this.onclose&&this.onclose(t)}catch(s){this.u.log(e.Error,`HttpConnection.onclose(${t}) threw error '${s}'.`)}}}else this.u.log(e.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`)}be(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!g.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const s=window.document.createElement("a");return s.href=t,this.u.log(e.Information,`Normalizing '${t}' to '${s.href}'.`),s.href}Ie(t){const e=new URL(t);e.pathname.endsWith("/")?e.pathname+="negotiate":e.pathname+="/negotiate";const s=new URLSearchParams(e.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this.ye.toString()),s.has("useStatefulReconnect")?"true"===s.get("useStatefulReconnect")&&(this.ie._e=!0):!0===this.ie._e&&s.append("useStatefulReconnect","true"),e.search=s.toString(),e.toString()}}class G{constructor(t){this.xe=t,this.Ae=[],this.Ue=!0,this.Le=new Q,this.Ne=new Q,this.qe=this.Me()}send(t){return this.je(t),this.Ne||(this.Ne=new Q),this.Ne.promise}stop(){return this.Ue=!1,this.Le.resolve(),this.qe}je(t){if(this.Ae.length&&typeof this.Ae[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this.Ae} but was of type ${typeof t}`);this.Ae.push(t),this.Le.resolve()}async Me(){for(;;){if(await this.Le.promise,!this.Ue){this.Ne&&this.Ne.reject("Connection stopped.");break}this.Le=new Q;const t=this.Ne;this.Ne=void 0;const e="string"==typeof this.Ae[0]?this.Ae.join(""):G.We(this.Ae);this.Ae.length=0;try{await this.xe.send(e),t.resolve()}catch(e){t.reject(e)}}}static We(t){const e=t.map((t=>t.byteLength)).reduce(((t,e)=>t+e)),s=new Uint8Array(e);let i=0;for(const e of t)s.set(new Uint8Array(e),i),i+=e.byteLength;return s.buffer}}class Q{constructor(){this.promise=new Promise(((t,e)=>[this.j,this.Oe]=[t,e]))}resolve(){this.j()}reject(t){this.Oe(t)}}class Y{constructor(){this.name="json",this.version=2,this.transferFormat=B.Text}parseMessages(t,s){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===s&&(s=f.instance);const i=D.parse(t),n=[];for(const t of i){const i=JSON.parse(t);if("number"!=typeof i.type)throw new Error("Invalid payload.");switch(i.type){case x.Invocation:this.U(i);break;case x.StreamItem:this.Fe(i);break;case x.Completion:this.Be(i);break;case x.Ping:case x.Close:break;case x.Ack:this.Xe(i);break;case x.Sequence:this.Je(i);break;default:s.log(e.Information,"Unknown message type '"+i.type+"' ignored.");continue}n.push(i)}return n}writeMessage(t){return D.write(JSON.stringify(t))}U(t){this.ze(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this.ze(t.invocationId,"Invalid payload for Invocation message.")}Fe(t){if(this.ze(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")}Be(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this.ze(t.error,"Invalid payload for Completion message."),this.ze(t.invocationId,"Invalid payload for Completion message.")}Xe(t){if("number"!=typeof t.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}Je(t){if("number"!=typeof t.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}ze(t,e){if("string"!=typeof t||""===t)throw new Error(e)}}const Z={trace:e.Trace,debug:e.Debug,info:e.Information,information:e.Information,warn:e.Warning,warning:e.Warning,error:e.Error,critical:e.Critical,none:e.None};class tt{configureLogging(t){if(w.isRequired(t,"logging"),void 0!==t.log)this.logger=t;else if("string"==typeof t){const e=function(t){const e=Z[t.toLowerCase()];if(void 0!==e)return e;throw new Error(`Unknown log level: ${t}`)}(t);this.logger=new E(e)}else this.logger=new E(t);return this}withUrl(t,e){return w.isRequired(t,"url"),w.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions="object"==typeof e?{...this.httpConnectionOptions,...e}:{...this.httpConnectionOptions,transport:e},this}withHubProtocol(t){return w.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new j(t):this.reconnectPolicy=t:this.reconnectPolicy=new j,this}withServerTimeout(t){return w.isRequired(t,"milliseconds"),this.Ve=t,this}withKeepAliveInterval(t){return w.isRequired(t,"milliseconds"),this.Ke=t,this}withStatefulReconnect(t){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._e=!0,this.Y=null==t?void 0:t.bufferSize,this}build(){const t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const e=new K(this.url,t);return q.create(e,this.logger||f.instance,this.protocol||new Y,this.reconnectPolicy,this.Ve,this.Ke,this.Y)}}return Uint8Array.prototype.indexOf||Object.defineProperty(Uint8Array.prototype,"indexOf",{value:Array.prototype.indexOf,writable:!0}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(t,e){return new Uint8Array(Array.prototype.slice.call(this,t,e))},writable:!0}),Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach,writable:!0}),s})(),"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.signalR=e():t.signalR=e();
//# sourceMappingURL=signalr.min.js.map
var e,t;e=self,t=e=>(()=>{var t=[,t=>{t.exports=e}],r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{i.r(n),i.d(n,{MessagePackHubProtocol:()=>R,VERSION:()=>O});var e=4294967295;function t(e,t,r){var i=Math.floor(r/4294967296),n=r;e.setUint32(t,i),e.setUint32(t+4,n)}function r(e,t){return 4294967296*e.getInt32(t)+e.getUint32(t+4)}var s=("undefined"==typeof process||"never"!==process.env.TEXT_ENCODING)&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function o(e){for(var t=e.length,r=0,i=0;i<t;){var n=e.charCodeAt(i++);if(0!=(4294967168&n))if(0==(4294965248&n))r+=2;else{if(n>=55296&&n<=56319&&i<t){var s=e.charCodeAt(i);56320==(64512&s)&&(++i,n=((1023&n)<<10)+(1023&s)+65536)}r+=0==(4294901760&n)?3:4}else r++}return r}var a=s?new TextEncoder:void 0,h=s?"undefined"!=typeof process&&"force"!==process.env.TEXT_ENCODING?200:0:e,c=(null==a?void 0:a.encodeInto)?function(e,t,r){a.encodeInto(e,t.subarray(r))}:function(e,t,r){t.set(a.encode(e),r)};function u(e,t,r){for(var i=t,n=i+r,s=[],o="";i<n;){var a=e[i++];if(0==(128&a))s.push(a);else if(192==(224&a)){var h=63&e[i++];s.push((31&a)<<6|h)}else if(224==(240&a)){h=63&e[i++];var c=63&e[i++];s.push((31&a)<<12|h<<6|c)}else if(240==(248&a)){var u=(7&a)<<18|(h=63&e[i++])<<12|(c=63&e[i++])<<6|63&e[i++];u>65535&&(u-=65536,s.push(u>>>10&1023|55296),u=56320|1023&u),s.push(u)}else s.push(a);s.length>=4096&&(o+=String.fromCharCode.apply(String,s),s.length=0)}return s.length>0&&(o+=String.fromCharCode.apply(String,s)),o}var f,p=s?new TextDecoder:null,l=s?"undefined"!=typeof process&&"force"!==process.env.TEXT_DECODER?200:0:e,d=function(e,t){this.type=e,this.data=t},y=(f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},f(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),w=function(e){function t(r){var i=e.call(this,r)||this,n=Object.create(t.prototype);return Object.setPrototypeOf(i,n),Object.defineProperty(i,"name",{configurable:!0,enumerable:!1,value:t.name}),i}return y(t,e),t}(Error),g={type:-1,encode:function(e){var r,i,n,s;return e instanceof Date?function(e){var r,i=e.sec,n=e.nsec;if(i>=0&&n>=0&&i<=17179869183){if(0===n&&i<=4294967295){var s=new Uint8Array(4);return(r=new DataView(s.buffer)).setUint32(0,i),s}var o=i/4294967296,a=4294967295&i;return s=new Uint8Array(8),(r=new DataView(s.buffer)).setUint32(0,n<<2|3&o),r.setUint32(4,a),s}return s=new Uint8Array(12),(r=new DataView(s.buffer)).setUint32(0,n),t(r,4,i),s}((r=e.getTime(),i=Math.floor(r/1e3),n=1e6*(r-1e3*i),s=Math.floor(n/1e9),{sec:i+s,nsec:n-1e9*s})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:var i=t.getUint32(0);return{sec:4294967296*(3&i)+t.getUint32(4),nsec:i>>>2};case 12:return{sec:r(t,4),nsec:t.getUint32(0)};default:throw new w("Unrecognized data size for timestamp (expected 4, 8, or 12): "+e.length)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},v=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(g)}return e.prototype.register=function(e){var t=e.type,r=e.encode,i=e.decode;if(t>=0)this.encoders[t]=r,this.decoders[t]=i;else{var n=1+t;this.builtInEncoders[n]=r,this.builtInDecoders[n]=i}},e.prototype.tryToEncode=function(e,t){for(var r=0;r<this.builtInEncoders.length;r++)if(null!=(i=this.builtInEncoders[r])&&null!=(n=i(e,t)))return new d(-1-r,n);for(r=0;r<this.encoders.length;r++){var i,n;if(null!=(i=this.encoders[r])&&null!=(n=i(e,t)))return new d(r,n)}return e instanceof d?e:null},e.prototype.decode=function(e,t,r){var i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,r):new d(t,e)},e.defaultCodec=new e,e}();function m(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}var b=function(){function e(e,t,r,i,n,s,o,a){void 0===e&&(e=v.defaultCodec),void 0===t&&(t=void 0),void 0===r&&(r=100),void 0===i&&(i=2048),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),this.extensionCodec=e,this.context=t,this.maxDepth=r,this.initialBufferSize=i,this.sortKeys=n,this.forceFloat32=s,this.ignoreUndefined=o,this.forceIntegerToFloat=a,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.getUint8Array=function(){return this.bytes.subarray(0,this.pos)},e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.getUint8Array()},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth "+t);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),r=new Uint8Array(t),i=new DataView(t);r.set(this.bytes),this.view=i,this.bytes=r},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else{if(!(e<4294967296))throw new Error("Too long string: "+e+" bytes in UTF-8");this.writeU8(219),this.writeU32(e)}},e.prototype.encodeString=function(e){if(e.length>h){var t=o(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),c(e,this.bytes,this.pos),this.pos+=t}else t=o(e),this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,r){for(var i=e.length,n=r,s=0;s<i;){var o=e.charCodeAt(s++);if(0!=(4294967168&o)){if(0==(4294965248&o))t[n++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<i){var a=e.charCodeAt(s);56320==(64512&a)&&(++s,o=((1023&o)<<10)+(1023&a)+65536)}0==(4294901760&o)?(t[n++]=o>>12&15|224,t[n++]=o>>6&63|128):(t[n++]=o>>18&7|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128)}t[n++]=63&o|128}else t[n++]=o}}(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var r=this.extensionCodec.tryToEncode(e,this.context);if(null!=r)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else{if("object"!=typeof e)throw new Error("Unrecognized object: "+Object.prototype.toString.apply(e));this.encodeMap(e,t)}},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large binary: "+t);this.writeU8(198),this.writeU32(t)}var r=m(e);this.writeU8a(r)},e.prototype.encodeArray=function(e,t){var r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else{if(!(r<4294967296))throw new Error("Too large array: "+r);this.writeU8(221),this.writeU32(r)}for(var i=0,n=e;i<n.length;i++){var s=n[i];this.doEncode(s,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var r=0,i=0,n=t;i<n.length;i++)void 0!==e[n[i]]&&r++;return r},e.prototype.encodeMap=function(e,t){var r=Object.keys(e);this.sortKeys&&r.sort();var i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else{if(!(i<4294967296))throw new Error("Too large map object: "+i);this.writeU8(223),this.writeU32(i)}for(var n=0,s=r;n<s.length;n++){var o=s[n],a=e[o];this.ignoreUndefined&&void 0===a||(this.encodeString(o),this.doEncode(a,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else{if(!(t<4294967296))throw new Error("Too large extension object: "+t);this.writeU8(201),this.writeU32(t)}this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),function(e,t,r){var i=r/4294967296,n=r;e.setUint32(t,i),e.setUint32(t+4,n)}(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),t(this.view,this.pos,e),this.pos+=8},e}();function U(e){return(e<0?"-":"")+"0x"+Math.abs(e).toString(16).padStart(2,"0")}var I=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var r=0;r<this.maxKeyLength;r++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,r){e:for(var i=0,n=this.caches[r-1];i<n.length;i++){for(var s=n[i],o=s.bytes,a=0;a<r;a++)if(o[a]!==e[t+a])continue e;return s.str}return null},e.prototype.store=function(e,t){var r=this.caches[e.length-1],i={bytes:e,str:t};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)},e.prototype.decode=function(e,t,r){var i=this.find(e,t,r);if(null!=i)return this.hit++,i;this.miss++;var n=u(e,t,r),s=Uint8Array.prototype.slice.call(e,t,t+r);return this.store(s,n),n},e}(),x=function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((i=i.apply(e,t||[])).next())}))},S=function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},E=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){!function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)}(i,n,(t=e[r](t)).done,t.value)}))}}},_=function(e){return this instanceof _?(this.v=e,this):new _(e)},M=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise((function(r,i){s.push([e,t,r,i])>1||a(e,t)}))})}function a(e,t){try{(r=n[e](t)).value instanceof _?Promise.resolve(r.value.v).then(h,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function h(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}},T=new DataView(new ArrayBuffer(0)),B=new Uint8Array(T.buffer),A=function(){try{T.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")}(),L=new A("Insufficient data"),C=new I,k=function(){function t(t,r,i,n,s,o,a,h){void 0===t&&(t=v.defaultCodec),void 0===r&&(r=void 0),void 0===i&&(i=e),void 0===n&&(n=e),void 0===s&&(s=e),void 0===o&&(o=e),void 0===a&&(a=e),void 0===h&&(h=C),this.extensionCodec=t,this.context=r,this.maxStrLength=i,this.maxBinLength=n,this.maxArrayLength=s,this.maxMapLength=o,this.maxExtLength=a,this.keyDecoder=h,this.totalPos=0,this.pos=0,this.view=T,this.bytes=B,this.headByte=-1,this.stack=[]}return t.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},t.prototype.setBuffer=function(e){this.bytes=m(e),this.view=function(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=m(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}(this.bytes),this.pos=0},t.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),r=m(e),i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),this.setBuffer(i)}else this.setBuffer(e)},t.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},t.prototype.createExtraByteError=function(e){var t=this.view,r=this.pos;return new RangeError("Extra "+(t.byteLength-r)+" of "+t.byteLength+" byte(s) found at buffer["+e+"]")},t.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},t.prototype.decodeMulti=function(e){return S(this,(function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))},t.prototype.decodeAsync=function(e){var t,r,i,n;return x(this,void 0,void 0,(function(){var s,o,a,h,c,u,f,p;return S(this,(function(l){switch(l.label){case 0:s=!1,l.label=1;case 1:l.trys.push([1,6,7,12]),t=E(e),l.label=2;case 2:return[4,t.next()];case 3:if((r=l.sent()).done)return[3,5];if(a=r.value,s)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{o=this.doDecodeSync(),s=!0}catch(e){if(!(e instanceof A))throw e}this.totalPos+=this.pos,l.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return h=l.sent(),i={error:h},[3,12];case 7:return l.trys.push([7,,10,11]),r&&!r.done&&(n=t.return)?[4,n.call(t)]:[3,9];case 8:l.sent(),l.label=9;case 9:return[3,11];case 10:if(i)throw i.error;return[7];case 11:return[7];case 12:if(s){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,o]}throw u=(c=this).headByte,f=c.pos,p=c.totalPos,new RangeError("Insufficient data in parsing "+U(u)+" at "+p+" ("+f+" in the current buffer)")}}))}))},t.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},t.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},t.prototype.decodeMultiAsync=function(e,t){return M(this,arguments,(function(){var r,i,n,s,o,a,h,c,u;return S(this,(function(f){switch(f.label){case 0:r=t,i=-1,f.label=1;case 1:f.trys.push([1,13,14,19]),n=E(e),f.label=2;case 2:return[4,_(n.next())];case 3:if((s=f.sent()).done)return[3,12];if(o=s.value,t&&0===i)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(i=this.readArraySize(),r=!1,this.complete()),f.label=4;case 4:f.trys.push([4,9,,10]),f.label=5;case 5:return[4,_(this.doDecodeSync())];case 6:return[4,f.sent()];case 7:return f.sent(),0==--i?[3,8]:[3,5];case 8:return[3,10];case 9:if(!((a=f.sent())instanceof A))throw a;return[3,10];case 10:this.totalPos+=this.pos,f.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return h=f.sent(),c={error:h},[3,19];case 14:return f.trys.push([14,,17,18]),s&&!s.done&&(u=n.return)?[4,_(u.call(n))]:[3,16];case 15:f.sent(),f.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}}))}))},t.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){if(0!=(i=e-128)){this.pushMapState(i),this.complete();continue e}t={}}else if(e<160){if(0!=(i=e-144)){this.pushArrayState(i),this.complete();continue e}t=[]}else{var r=e-160;t=this.decodeUtf8String(r,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.readI64();else if(217===e)r=this.lookU8(),t=this.decodeUtf8String(r,1);else if(218===e)r=this.lookU16(),t=this.decodeUtf8String(r,2);else if(219===e)r=this.lookU32(),t=this.decodeUtf8String(r,4);else if(220===e){if(0!==(i=this.readU16())){this.pushArrayState(i),this.complete();continue e}t=[]}else if(221===e){if(0!==(i=this.readU32())){this.pushArrayState(i),this.complete();continue e}t=[]}else if(222===e){if(0!==(i=this.readU16())){this.pushMapState(i),this.complete();continue e}t={}}else if(223===e){if(0!==(i=this.readU32())){this.pushMapState(i),this.complete();continue e}t={}}else if(196===e){var i=this.lookU8();t=this.decodeBinary(i,1)}else if(197===e)i=this.lookU16(),t=this.decodeBinary(i,2);else if(198===e)i=this.lookU32(),t=this.decodeBinary(i,4);else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e)i=this.lookU8(),t=this.decodeExtension(i,1);else if(200===e)i=this.lookU16(),t=this.decodeExtension(i,2);else{if(201!==e)throw new w("Unrecognized type byte: "+U(e));i=this.lookU32(),t=this.decodeExtension(i,4)}this.complete();for(var n=this.stack;n.length>0;){var s=n[n.length-1];if(0===s.type){if(s.array[s.position]=t,s.position++,s.position!==s.size)continue e;n.pop(),t=s.array}else{if(1===s.type){if(o=void 0,"string"!=(o=typeof t)&&"number"!==o)throw new w("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new w("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}if(s.map[s.key]=t,s.readCount++,s.readCount!==s.size){s.key=null,s.type=1;continue e}n.pop(),t=s.map}}return t}var o},t.prototype.readHeadByte=function(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte},t.prototype.complete=function(){this.headByte=-1},t.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new w("Unrecognized array type byte: "+U(e))}},t.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new w("Max length exceeded: map length ("+e+") > maxMapLengthLength ("+this.maxMapLength+")");this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},t.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new w("Max length exceeded: array length ("+e+") > maxArrayLength ("+this.maxArrayLength+")");this.stack.push({type:0,size:e,array:new Array(e),position:0})},t.prototype.decodeUtf8String=function(e,t){var r;if(e>this.maxStrLength)throw new w("Max length exceeded: UTF-8 byte length ("+e+") > maxStrLength ("+this.maxStrLength+")");if(this.bytes.byteLength<this.pos+t+e)throw L;var i,n=this.pos+t;return i=this.stateIsMapKey()&&(null===(r=this.keyDecoder)||void 0===r?void 0:r.canBeCached(e))?this.keyDecoder.decode(this.bytes,n,e):e>l?function(e,t,r){var i=e.subarray(t,t+r);return p.decode(i)}(this.bytes,n,e):u(this.bytes,n,e),this.pos+=t+e,i},t.prototype.stateIsMapKey=function(){return this.stack.length>0&&1===this.stack[this.stack.length-1].type},t.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new w("Max length exceeded: bin length ("+e+") > maxBinLength ("+this.maxBinLength+")");if(!this.hasRemaining(e+t))throw L;var r=this.pos+t,i=this.bytes.subarray(r,r+e);return this.pos+=t+e,i},t.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new w("Max length exceeded: ext length ("+e+") > maxExtLength ("+this.maxExtLength+")");var r=this.view.getInt8(this.pos+t),i=this.decodeBinary(e,t+1);return this.extensionCodec.decode(i,r,this.context)},t.prototype.lookU8=function(){return this.view.getUint8(this.pos)},t.prototype.lookU16=function(){return this.view.getUint16(this.pos)},t.prototype.lookU32=function(){return this.view.getUint32(this.pos)},t.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},t.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},t.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},t.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},t.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},t.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},t.prototype.readU64=function(){var e,t,r=(e=this.view,t=this.pos,4294967296*e.getUint32(t)+e.getUint32(t+4));return this.pos+=8,r},t.prototype.readI64=function(){var e=r(this.view,this.pos);return this.pos+=8,e},t.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},t.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},t}(),z=i(1);class D{static write(e){let t=e.byteLength||e.length;const r=[];do{let e=127&t;t>>=7,t>0&&(e|=128),r.push(e)}while(t>0);t=e.byteLength||e.length;const i=new Uint8Array(r.length+t);return i.set(r,0),i.set(e,r.length),i.buffer}static parse(e){const t=[],r=new Uint8Array(e),i=[0,7,14,21,28];for(let n=0;n<e.byteLength;){let s,o=0,a=0;do{s=r[n+o],a|=(127&s)<<i[o],o++}while(o<Math.min(5,e.byteLength-n)&&0!=(128&s));if(0!=(128&s)&&o<5)throw new Error("Cannot read message size.");if(5===o&&s>7)throw new Error("Messages bigger than 2GB are not supported.");if(!(r.byteLength>=n+o+a))throw new Error("Incomplete message.");t.push(r.slice?r.slice(n+o,n+o+a):r.subarray(n+o,n+o+a)),n=n+o+a}return t}}const P=new Uint8Array([145,z.MessageType.Ping]);class R{constructor(e){this.name="messagepack",this.version=1,this.transferFormat=z.TransferFormat.Binary,this._errorResult=1,this._voidResult=2,this._nonVoidResult=3,e=e||{},this._encoder=new b(e.extensionCodec,e.context,e.maxDepth,e.initialBufferSize,e.sortKeys,e.forceFloat32,e.ignoreUndefined,e.forceIntegerToFloat),this._decoder=new k(e.extensionCodec,e.context,e.maxStrLength,e.maxBinLength,e.maxArrayLength,e.maxMapLength,e.maxExtLength)}parseMessages(e,t){if(!(r=e)||"undefined"==typeof ArrayBuffer||!(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name))throw new Error("Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.");var r;null===t&&(t=z.NullLogger.instance);const i=D.parse(e),n=[];for(const e of i){const r=this._parseMessage(e,t);r&&n.push(r)}return n}writeMessage(e){switch(e.type){case z.MessageType.Invocation:return this._writeInvocation(e);case z.MessageType.StreamInvocation:return this._writeStreamInvocation(e);case z.MessageType.StreamItem:return this._writeStreamItem(e);case z.MessageType.Completion:return this._writeCompletion(e);case z.MessageType.Ping:return D.write(P);case z.MessageType.CancelInvocation:return this._writeCancelInvocation(e);default:throw new Error("Invalid message type.")}}_parseMessage(e,t){if(0===e.length)throw new Error("Invalid payload.");const r=this._decoder.decode(e);if(0===r.length||!(r instanceof Array))throw new Error("Invalid payload.");const i=r[0];switch(i){case z.MessageType.Invocation:return this._createInvocationMessage(this._readHeaders(r),r);case z.MessageType.StreamItem:return this._createStreamItemMessage(this._readHeaders(r),r);case z.MessageType.Completion:return this._createCompletionMessage(this._readHeaders(r),r);case z.MessageType.Ping:return this._createPingMessage(r);case z.MessageType.Close:return this._createCloseMessage(r);default:return t.log(z.LogLevel.Information,"Unknown message type '"+i+"' ignored."),null}}_createCloseMessage(e){if(e.length<2)throw new Error("Invalid payload for Close message.");return{allowReconnect:e.length>=3?e[2]:void 0,error:e[1],type:z.MessageType.Close}}_createPingMessage(e){if(e.length<1)throw new Error("Invalid payload for Ping message.");return{type:z.MessageType.Ping}}_createInvocationMessage(e,t){if(t.length<5)throw new Error("Invalid payload for Invocation message.");const r=t[2];return r?{arguments:t[4],headers:e,invocationId:r,streamIds:[],target:t[3],type:z.MessageType.Invocation}:{arguments:t[4],headers:e,streamIds:[],target:t[3],type:z.MessageType.Invocation}}_createStreamItemMessage(e,t){if(t.length<4)throw new Error("Invalid payload for StreamItem message.");return{headers:e,invocationId:t[2],item:t[3],type:z.MessageType.StreamItem}}_createCompletionMessage(e,t){if(t.length<4)throw new Error("Invalid payload for Completion message.");const r=t[3];if(r!==this._voidResult&&t.length<5)throw new Error("Invalid payload for Completion message.");let i,n;switch(r){case this._errorResult:i=t[4];break;case this._nonVoidResult:n=t[4]}return{error:i,headers:e,invocationId:t[2],result:n,type:z.MessageType.Completion}}_writeInvocation(e){let t;return t=e.streamIds?this._encoder.encode([z.MessageType.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments,e.streamIds]):this._encoder.encode([z.MessageType.Invocation,e.headers||{},e.invocationId||null,e.target,e.arguments]),D.write(t.slice())}_writeStreamInvocation(e){let t;return t=e.streamIds?this._encoder.encode([z.MessageType.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments,e.streamIds]):this._encoder.encode([z.MessageType.StreamInvocation,e.headers||{},e.invocationId,e.target,e.arguments]),D.write(t.slice())}_writeStreamItem(e){const t=this._encoder.encode([z.MessageType.StreamItem,e.headers||{},e.invocationId,e.item]);return D.write(t.slice())}_writeCompletion(e){const t=e.error?this._errorResult:void 0!==e.result?this._nonVoidResult:this._voidResult;let r;switch(t){case this._errorResult:r=this._encoder.encode([z.MessageType.Completion,e.headers||{},e.invocationId,t,e.error]);break;case this._voidResult:r=this._encoder.encode([z.MessageType.Completion,e.headers||{},e.invocationId,t]);break;case this._nonVoidResult:r=this._encoder.encode([z.MessageType.Completion,e.headers||{},e.invocationId,t,e.result])}return D.write(r.slice())}_writeCancelInvocation(e){const t=this._encoder.encode([z.MessageType.CancelInvocation,e.headers||{},e.invocationId]);return D.write(t.slice())}_readHeaders(e){const t=e[1];if("object"!=typeof t)throw new Error("Invalid headers.");return t}}const O="7.0.14"})(),n})(),"object"==typeof exports&&"object"==typeof module?module.exports=t(require("signalR")):"function"==typeof define&&define.amd?define(["signalR"],t):"object"==typeof exports?exports.msgpack=t(require("signalR")):(e.signalR=e.signalR||{},e.signalR.protocols=e.signalR.protocols||{},e.signalR.protocols.msgpack=t(e.signalR));
//# sourceMappingURL=signalr-protocol-msgpack.min.js.map
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
!function(A,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(A="undefined"!=typeof globalThis?globalThis:A||self).html2canvas=e()}(this,function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var r=function(A,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])})(A,e)};function A(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=A}r(A,e),A.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var h=function(){return(h=Object.assign||function(A){for(var e,t=1,r=arguments.length;t<r;t++)for(var B in e=arguments[t])Object.prototype.hasOwnProperty.call(e,B)&&(A[B]=e[B]);return A}).apply(this,arguments)};function a(A,s,o,i){return new(o=o||Promise)(function(t,e){function r(A){try{n(i.next(A))}catch(A){e(A)}}function B(A){try{n(i.throw(A))}catch(A){e(A)}}function n(A){var e;A.done?t(A.value):((e=A.value)instanceof o?e:new o(function(A){A(e)})).then(r,B)}n((i=i.apply(A,s||[])).next())})}function H(t,r){var B,n,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},A={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function e(e){return function(A){return function(e){if(B)throw new TypeError("Generator is already executing.");for(;o;)try{if(B=1,n&&(s=2&e[0]?n.return:e[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,e[1])).done)return s;switch(n=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,n=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){o.label=e[1];break}if(6===e[0]&&o.label<s[1]){o.label=s[1],s=e;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(e);break}s[2]&&o.ops.pop(),o.trys.pop();continue}e=r.call(t,o)}catch(A){e=[6,A],n=0}finally{B=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,A])}}}function t(A,e,t){if(t||2===arguments.length)for(var r,B=0,n=e.length;B<n;B++)!r&&B in e||((r=r||Array.prototype.slice.call(e,0,B))[B]=e[B]);return A.concat(r||e)}var d=(B.prototype.add=function(A,e,t,r){return new B(this.left+A,this.top+e,this.width+t,this.height+r)},B.fromClientRect=function(A,e){return new B(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height)},B.fromDOMRectList=function(A,e){e=Array.from(e).find(function(A){return 0!==A.width});return e?new B(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height):B.EMPTY},B.EMPTY=new B(0,0,0,0),B);function B(A,e,t,r){this.left=A,this.top=e,this.width=t,this.height=r}for(var f=function(A,e){return d.fromClientRect(A,e.getBoundingClientRect())},Q=function(A){for(var e=[],t=0,r=A.length;t<r;){var B,n=A.charCodeAt(t++);55296<=n&&n<=56319&&t<r?56320==(64512&(B=A.charCodeAt(t++)))?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--):e.push(n)}return e},g=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],B=-1,n="";++B<t;){var s=A[B];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(B+1===t||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<e.length;s++)n[e.charCodeAt(s)]=s;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<o.length;i++)c[o.charCodeAt(i)]=i;function w(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var U=(l.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=this.index[A>>5],this.data[e=(e<<2)+(31&A)];if(A<=65535)return e=this.index[2048+(A-55296>>5)],this.data[e=(e<<2)+(31&A)];if(A<this.highStart)return e=this.index[e=2080+(A>>11)],e=this.index[e+=A>>5&63],this.data[e=(e<<2)+(31&A)];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},l);function l(A,e,t,r,B,n){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=B,this.data=n}for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="undefined"==typeof Uint8Array?[]:new Uint8Array(256),F=0;F<C.length;F++)u[C.charCodeAt(F)]=F;function p(A,e,t,r){var B=r[t];if(Array.isArray(A)?-1!==A.indexOf(B):A===B)for(var n=t;n<=r.length;){if((o=r[++n])===e)return 1;if(o!==D)break}if(B===D)for(n=t;0<n;){var s=r[--n];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var o,i=t;i<=r.length;){if((o=r[++i])===e)return 1;if(o!==D)break}if(s!==D)break}}function E(A,e){for(var t=A;0<=t;){var r=e[t];if(r!==D)return r;t--}return 0}function I(t,A){var e=(B=function(A,r){void 0===r&&(r="strict");var B=[],n=[],s=[];return A.forEach(function(A,e){var t=rA.get(A);if(50<t?(s.push(!0),t-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(r)&&-1!==[8208,8211,12316,12448].indexOf(A))return n.push(e),B.push(16);if(4!==t&&11!==t)return n.push(e),31===t?B.push("strict"===r?O:q):t===AA||29===t?B.push(J):43===t?131072<=A&&A<=196605||196608<=A&&A<=262141?B.push(q):B.push(J):void B.push(t);if(0===e)return n.push(e),B.push(J);t=B[e-1];return-1===iA.indexOf(t)?(n.push(n[e-1]),B.push(t)):(n.push(e),B.push(J))}),[n,B,s]}(t,(A=A||{lineBreak:"normal",wordBreak:"normal"}).lineBreak))[0],r=B[1],B=B[2];return[e,r="break-all"===A.wordBreak||"break-word"===A.wordBreak?r.map(function(A){return-1!==[R,J,AA].indexOf(A)?q:A}):r,"keep-all"===A.wordBreak?B.map(function(A,e){return A&&19968<=t[e]&&t[e]<=40959}):void 0]}var y,K,m,L,b,D=10,v=13,x=15,M=17,S=18,T=19,G=20,O=21,V=22,k=24,R=25,N=26,P=27,X=28,J=30,Y=32,W=33,Z=34,_=35,q=37,j=38,z=39,$=40,AA=42,eA=[9001,65288],tA="×",rA=(m=function(A){var e,t,r,B,n=.75*A.length,s=A.length,o=0;"="===A[A.length-1]&&(n--,"="===A[A.length-2]&&n--);for(var n=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(n),i=Array.isArray(n)?n:new Uint8Array(n),Q=0;Q<s;Q+=4)e=c[A.charCodeAt(Q)],t=c[A.charCodeAt(Q+1)],r=c[A.charCodeAt(Q+2)],B=c[A.charCodeAt(Q+3)],i[o++]=e<<2|t>>4,i[o++]=(15&t)<<4|r>>2,i[o++]=(3&r)<<6|63&B;return n}(y="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(m)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(m):new Uint32Array(m),b=Array.isArray(m)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(m):new Uint16Array(m),y=w(b,12,L[4]/2),K=2===L[5]?w(b,(24+L[4])/2):(m=L,b=Math.ceil((24+L[4])/4),m.slice?m.slice(b,K):new Uint32Array(Array.prototype.slice.call(m,b,K))),new U(L[0],L[1],L[2],L[3],y,K)),BA=[J,36],nA=[1,2,3,5],sA=[D,8],oA=[P,N],iA=nA.concat(sA),QA=[j,z,$,Z,_],cA=[x,v],aA=(gA.prototype.slice=function(){return g.apply(void 0,this.codePoints.slice(this.start,this.end))},gA);function gA(A,e,t,r){this.codePoints=A,this.required="!"===e,this.start=t,this.end=r}function wA(A,e){var t=Q(A),r=(e=I(t,e))[0],B=e[1],n=e[2],s=t.length,o=0,i=0;return{next:function(){if(s<=i)return{done:!0,value:null};for(var A=tA;i<s&&(A=function(A,e,t,r,B){if(0===t[r])return tA;var n=r-1;if(Array.isArray(B)&&!0===B[n])return tA;var s=n-1,o=1+n,i=e[n],r=0<=s?e[s]:0,B=e[o];if(2===i&&3===B)return tA;if(-1!==nA.indexOf(i))return"!";if(-1!==nA.indexOf(B))return tA;if(-1!==sA.indexOf(B))return tA;if(8===E(n,e))return"÷";if(11===rA.get(A[n]))return tA;if((i===Y||i===W)&&11===rA.get(A[o]))return tA;if(7===i||7===B)return tA;if(9===i)return tA;if(-1===[D,v,x].indexOf(i)&&9===B)return tA;if(-1!==[M,S,T,k,X].indexOf(B))return tA;if(E(n,e)===V)return tA;if(p(23,V,n,e))return tA;if(p([M,S],O,n,e))return tA;if(p(12,12,n,e))return tA;if(i===D)return"÷";if(23===i||23===B)return tA;if(16===B||16===i)return"÷";if(-1!==[v,x,O].indexOf(B)||14===i)return tA;if(36===r&&-1!==cA.indexOf(i))return tA;if(i===X&&36===B)return tA;if(B===G)return tA;if(-1!==BA.indexOf(B)&&i===R||-1!==BA.indexOf(i)&&B===R)return tA;if(i===P&&-1!==[q,Y,W].indexOf(B)||-1!==[q,Y,W].indexOf(i)&&B===N)return tA;if(-1!==BA.indexOf(i)&&-1!==oA.indexOf(B)||-1!==oA.indexOf(i)&&-1!==BA.indexOf(B))return tA;if(-1!==[P,N].indexOf(i)&&(B===R||-1!==[V,x].indexOf(B)&&e[1+o]===R)||-1!==[V,x].indexOf(i)&&B===R||i===R&&-1!==[R,X,k].indexOf(B))return tA;if(-1!==[R,X,k,M,S].indexOf(B))for(var Q=n;0<=Q;){if((c=e[Q])===R)return tA;if(-1===[X,k].indexOf(c))break;Q--}if(-1!==[P,N].indexOf(B))for(var c,Q=-1!==[M,S].indexOf(i)?s:n;0<=Q;){if((c=e[Q])===R)return tA;if(-1===[X,k].indexOf(c))break;Q--}if(j===i&&-1!==[j,z,Z,_].indexOf(B)||-1!==[z,Z].indexOf(i)&&-1!==[z,$].indexOf(B)||-1!==[$,_].indexOf(i)&&B===$)return tA;if(-1!==QA.indexOf(i)&&-1!==[G,N].indexOf(B)||-1!==QA.indexOf(B)&&i===P)return tA;if(-1!==BA.indexOf(i)&&-1!==BA.indexOf(B))return tA;if(i===k&&-1!==BA.indexOf(B))return tA;if(-1!==BA.concat(R).indexOf(i)&&B===V&&-1===eA.indexOf(A[o])||-1!==BA.concat(R).indexOf(B)&&i===S)return tA;if(41===i&&41===B){for(var a=t[n],g=1;0<a&&41===e[--a];)g++;if(g%2!=0)return tA}return i===Y&&B===W?tA:"÷"}(t,B,r,++i,n))===tA;);if(A===tA&&i!==s)return{done:!0,value:null};var e=new aA(t,A,o,i);return o=i,{value:e,done:!1}}}}function UA(A){return 48<=A&&A<=57}function lA(A){return UA(A)||65<=A&&A<=70||97<=A&&A<=102}function CA(A){return 10===A||9===A||32===A}function uA(A){return 97<=(t=e=A)&&t<=122||65<=(e=e)&&e<=90||128<=A||95===A;var e,t}function FA(A){return uA(A)||UA(A)||45===A}function hA(A,e){return 92===A&&10!==e}function dA(A,e,t){return 45===A?uA(e)||hA(e,t):!!uA(A)||92===A&&10!==e}function fA(A,e,t){return 43===A||45===A?!!UA(e)||46===e&&UA(t):UA(46===A?e:A)}var HA={type:2},pA={type:3},EA={type:4},IA={type:13},yA={type:8},KA={type:21},mA={type:9},LA={type:10},bA={type:11},DA={type:12},vA={type:14},xA={type:23},MA={type:1},SA={type:25},TA={type:24},GA={type:26},OA={type:27},VA={type:28},kA={type:29},RA={type:31},NA={type:32},PA=(XA.prototype.write=function(A){this._value=this._value.concat(Q(A))},XA.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==NA;)A.push(e),e=this.consumeToken();return A},XA.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),r=this.peekCodePoint(2);if(FA(e)||hA(t,r)){var B=dA(e,t,r)?2:1;return{type:5,value:this.consumeName(),flags:B}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),IA;break;case 39:return this.consumeStringToken(39);case 40:return HA;case 41:return pA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),vA;break;case 43:if(fA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 44:return EA;case 45:var r=A,B=this.peekCodePoint(0),n=this.peekCodePoint(1);if(fA(r,B,n))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(dA(r,B,n))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(45===B&&62===n)return this.consumeCodePoint(),this.consumeCodePoint(),TA;break;case 46:if(fA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var s=this.consumeCodePoint();if(42===s&&47===(s=this.consumeCodePoint()))return this.consumeToken();if(-1===s)return this.consumeToken()}break;case 58:return GA;case 59:return OA;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),SA;break;case 64:var n=this.peekCodePoint(0),o=this.peekCodePoint(1),i=this.peekCodePoint(2);if(dA(n,o,i))return{type:7,value:this.consumeName()};break;case 91:return VA;case 92:if(hA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case 93:return kA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yA;break;case 123:return bA;case 125:return DA;case 117:case 85:o=this.peekCodePoint(0),i=this.peekCodePoint(1);return 43!==o||!lA(i)&&63!==i||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),mA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),KA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),LA;break;case-1:return NA}return CA(A)?(this.consumeWhiteSpace(),RA):UA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):uA(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:g(A)}},XA.prototype.consumeCodePoint=function(){var A=this._value.shift();return void 0===A?-1:A},XA.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},XA.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},XA.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();lA(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var t=!1;63===e&&A.length<6;)A.push(e),e=this.consumeCodePoint(),t=!0;if(t)return{type:30,start:parseInt(g.apply(void 0,A.map(function(A){return 63===A?48:A})),16),end:parseInt(g.apply(void 0,A.map(function(A){return 63===A?70:A})),16)};var r=parseInt(g.apply(void 0,A),16);if(45===this.peekCodePoint(0)&&lA(this.peekCodePoint(1))){this.consumeCodePoint();for(var e=this.consumeCodePoint(),B=[];lA(e)&&B.length<6;)B.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(g.apply(void 0,B),16)}}return{type:30,start:r,end:r}},XA.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return"url"===A.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},XA.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var e,t=this.peekCodePoint(0);if(39===t||34===t){t=this.consumeStringToken(this.consumeCodePoint());return 0===t.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),xA)}for(;;){var r=this.consumeCodePoint();if(-1===r||41===r)return{type:22,value:g.apply(void 0,A)};if(CA(r))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:g.apply(void 0,A)}):(this.consumeBadUrlRemnants(),xA);if(34===r||39===r||40===r||(0<=(e=r)&&e<=8||11===e||14<=e&&e<=31||127===e))return this.consumeBadUrlRemnants(),xA;if(92===r){if(!hA(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),xA;A.push(this.consumeEscapedCodePoint())}else A.push(r)}},XA.prototype.consumeWhiteSpace=function(){for(;CA(this.peekCodePoint(0));)this.consumeCodePoint()},XA.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(41===A||-1===A)return;hA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},XA.prototype.consumeStringSlice=function(A){for(var e="";0<A;){var t=Math.min(5e4,A);e+=g.apply(void 0,this._value.splice(0,t)),A-=t}return this._value.shift(),e},XA.prototype.consumeStringToken=function(A){for(var e="",t=0;;){var r,B=this._value[t];if(-1===B||void 0===B||B===A)return{type:0,value:e+=this.consumeStringSlice(t)};if(10===B)return this._value.splice(0,t),MA;92!==B||-1!==(r=this._value[t+1])&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):hA(B,r)&&(e+=this.consumeStringSlice(t),e+=g(this.consumeEscapedCodePoint()),t=-1)),t++}},XA.prototype.consumeNumber=function(){var A=[],e=4;for(43!==(t=this.peekCodePoint(0))&&45!==t||A.push(this.consumeCodePoint());UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());var t=this.peekCodePoint(0),r=this.peekCodePoint(1);if(46===t&&UA(r))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0);var r=this.peekCodePoint(1),B=this.peekCodePoint(2);if((69===t||101===t)&&((43===r||45===r)&&UA(B)||UA(r)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[function(A){var e=0,t=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(t=-1),e++);for(var r=[];UA(A[e]);)r.push(A[e++]);var B=r.length?parseInt(g.apply(void 0,r),10):0;46===A[e]&&e++;for(var n=[];UA(A[e]);)n.push(A[e++]);var s=n.length,o=s?parseInt(g.apply(void 0,n),10):0;69!==A[e]&&101!==A[e]||e++;var i=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(i=-1),e++);for(var Q=[];UA(A[e]);)Q.push(A[e++]);var c=Q.length?parseInt(g.apply(void 0,Q),10):0;return t*(B+o*Math.pow(10,-s))*Math.pow(10,i*c)}(A),e]},XA.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],t=A[1],r=this.peekCodePoint(0),B=this.peekCodePoint(1),A=this.peekCodePoint(2);return dA(r,B,A)?{type:15,number:e,flags:t,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:e,flags:t}):{type:17,number:e,flags:t}},XA.prototype.consumeEscapedCodePoint=function(){var A,e=this.consumeCodePoint();if(lA(e)){for(var t=g(e);lA(this.peekCodePoint(0))&&t.length<6;)t+=g(this.consumeCodePoint());CA(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return 0===r||55296<=(A=r)&&A<=57343||1114111<r?65533:r}return-1===e?65533:e},XA.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(FA(e))A+=g(e);else{if(!hA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),A;A+=g(this.consumeEscapedCodePoint())}}},XA);function XA(){this._value=[]}var JA=(YA.create=function(A){var e=new PA;return e.write(A),new YA(e.read())},YA.parseValue=function(A){return YA.create(A).parseComponentValue()},YA.parseValues=function(A){return YA.create(A).parseComponentValues()},YA.prototype.parseComponentValue=function(){for(var A=this.consumeToken();31===A.type;)A=this.consumeToken();if(32===A.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);for(var e=this.consumeComponentValue();31===(A=this.consumeToken()).type;);if(32===A.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},YA.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(32===e.type)return A;A.push(e),A.push()}},YA.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},YA.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},t=this.consumeToken();;){if(32===t.type||ce(t,A))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},YA.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var t=this.consumeToken();if(32===t.type||3===t.type)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},YA.prototype.consumeToken=function(){var A=this._tokens.shift();return void 0===A?NA:A},YA.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},YA);function YA(A){this._tokens=A}function WA(A){return 15===A.type}function ZA(A){return 17===A.type}function _A(A){return 20===A.type}function qA(A){return 0===A.type}function jA(A,e){return _A(A)&&A.value===e}function zA(A){return 31!==A.type}function $A(A){return 31!==A.type&&4!==A.type}function Ae(A){var e=[],t=[];return A.forEach(function(A){if(4===A.type){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(t),void(t=[])}31!==A.type&&t.push(A)}),t.length&&e.push(t),e}function ee(A){return 17===A.type||15===A.type}function te(A){return 16===A.type||ee(A)}function re(A){return 1<A.length?[A[0],A[1]]:[A[0]]}function Be(A,e,t){var r=A[0],A=A[1];return[Ue(r,e),Ue(void 0!==A?A:r,t)]}function ne(A){return 15===A.type&&("deg"===A.unit||"grad"===A.unit||"rad"===A.unit||"turn"===A.unit)}function se(A){switch(A.filter(_A).map(function(A){return A.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ae,ae];case"to top":case"bottom":return Ce(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ae,we];case"to right":case"left":return Ce(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[we,we];case"to bottom":case"top":return Ce(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[we,ae];case"to left":case"right":return Ce(270)}return 0}function oe(A){return 0==(255&A)}function ie(A){var e=255&A,t=255&A>>8,r=255&A>>16,A=255&A>>24;return e<255?"rgba("+A+","+r+","+t+","+e/255+")":"rgb("+A+","+r+","+t+")"}function Qe(A,e){if(17===A.type)return A.number;if(16!==A.type)return 0;var t=3===e?1:255;return 3===e?A.number/100*t:Math.round(A.number/100*t)}var ce=function(A,e){return 11===e&&12===A.type||(28===e&&29===A.type||2===e&&3===A.type)},ae={type:17,number:0,flags:4},ge={type:16,number:50,flags:4},we={type:16,number:100,flags:4},Ue=function(A,e){if(16===A.type)return A.number/100*e;if(WA(A))switch(A.unit){case"rem":case"em":return 16*A.number;default:return A.number}return A.number},le=function(A,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},Ce=function(A){return Math.PI*A/180},ue=function(A,e){if(18===e.type){var t=me[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(A,e.values)}if(5===e.type){if(3===e.value.length){var r=e.value.substring(0,1),B=e.value.substring(1,2),n=e.value.substring(2,3);return Fe(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),1)}if(4===e.value.length){var r=e.value.substring(0,1),B=e.value.substring(1,2),n=e.value.substring(2,3),s=e.value.substring(3,4);return Fe(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),parseInt(s+s,16)/255)}if(6===e.value.length){r=e.value.substring(0,2),B=e.value.substring(2,4),n=e.value.substring(4,6);return Fe(parseInt(r,16),parseInt(B,16),parseInt(n,16),1)}if(8===e.value.length){r=e.value.substring(0,2),B=e.value.substring(2,4),n=e.value.substring(4,6),s=e.value.substring(6,8);return Fe(parseInt(r,16),parseInt(B,16),parseInt(n,16),parseInt(s,16)/255)}}if(20===e.type){e=Le[e.value.toUpperCase()];if(void 0!==e)return e}return Le.TRANSPARENT},Fe=function(A,e,t,r){return(A<<24|e<<16|t<<8|Math.round(255*r)<<0)>>>0},he=function(A,e){e=e.filter($A);if(3===e.length){var t=e.map(Qe),r=t[0],B=t[1],t=t[2];return Fe(r,B,t,1)}if(4!==e.length)return 0;e=e.map(Qe),r=e[0],B=e[1],t=e[2],e=e[3];return Fe(r,B,t,e)};function de(A,e,t){return t<0&&(t+=1),1<=t&&--t,t<1/6?(e-A)*t*6+A:t<.5?e:t<2/3?6*(e-A)*(2/3-t)+A:A}function fe(A,e){return ue(A,JA.create(e).parseComponentValue())}function He(A,e){return A=ue(A,e[0]),(e=e[1])&&te(e)?{color:A,stop:e}:{color:A,stop:null}}function pe(A,t){var e=A[0],r=A[A.length-1];null===e.stop&&(e.stop=ae),null===r.stop&&(r.stop=we);for(var B=[],n=0,s=0;s<A.length;s++){var o=A[s].stop;null!==o?(n<(o=Ue(o,t))?B.push(o):B.push(n),n=o):B.push(null)}for(var i=null,s=0;s<B.length;s++){var Q=B[s];if(null===Q)null===i&&(i=s);else if(null!==i){for(var c=s-i,a=(Q-B[i-1])/(1+c),g=1;g<=c;g++)B[i+g-1]=a*g;i=null}}return A.map(function(A,e){return{color:A.color,stop:Math.max(Math.min(1,B[e]/t),0)}})}function Ee(A,e,t){var r="number"==typeof A?A:(s=e/2,r=(n=t)/2,s=Ue((B=A)[0],e)-s,n=r-Ue(B[1],n),(Math.atan2(n,s)+2*Math.PI)%(2*Math.PI)),B=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),n=e/2,s=t/2,e=B/2,t=Math.sin(r-Math.PI/2)*e,e=Math.cos(r-Math.PI/2)*e;return[B,n-e,n+e,s-t,s+t]}function Ie(A,e){return Math.sqrt(A*A+e*e)}function ye(A,e,B,n,s){return[[0,0],[0,e],[A,0],[A,e]].reduce(function(A,e){var t=e[0],r=e[1],r=Ie(B-t,n-r);return(s?r<A.optimumDistance:r>A.optimumDistance)?{optimumCorner:e,optimumDistance:r}:A},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner}var Ke=function(A,e){var t=e.filter($A),r=t[0],B=t[1],n=t[2],e=t[3],t=(17===r.type?Ce(r.number):le(A,r))/(2*Math.PI),A=te(B)?B.number/100:0,r=te(n)?n.number/100:0,B=void 0!==e&&te(e)?Ue(e,1):1;if(0==A)return Fe(255*r,255*r,255*r,1);n=r<=.5?r*(1+A):r+A-r*A,e=2*r-n,A=de(e,n,t+1/3),r=de(e,n,t),t=de(e,n,t-1/3);return Fe(255*A,255*r,255*t,B)},me={hsl:Ke,hsla:Ke,rgb:he,rgba:he},Le={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},be={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(A){if(_A(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},De={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ke=function(t,A){var r=Ce(180),B=[];return Ae(A).forEach(function(A,e){if(0===e){e=A[0];if(20===e.type&&-1!==["top","left","right","bottom"].indexOf(e.value))return void(r=se(A));if(ne(e))return void(r=(le(t,e)+Ce(270))%Ce(360))}A=He(t,A);B.push(A)}),{angle:r,stops:B,type:1}},ve="closest-side",xe="farthest-side",Me="closest-corner",Se="farthest-corner",Te="ellipse",Ge="contain",he=function(r,A){var B=0,n=3,s=[],o=[];return Ae(A).forEach(function(A,e){var t=!0;0===e?t=A.reduce(function(A,e){if(_A(e))switch(e.value){case"center":return o.push(ge),!1;case"top":case"left":return o.push(ae),!1;case"right":case"bottom":return o.push(we),!1}else if(te(e)||ee(e))return o.push(e),!1;return A},t):1===e&&(t=A.reduce(function(A,e){if(_A(e))switch(e.value){case"circle":return B=0,!1;case Te:return!(B=1);case Ge:case ve:return n=0,!1;case xe:return!(n=1);case Me:return!(n=2);case"cover":case Se:return!(n=3)}else if(ee(e)||te(e))return(n=!Array.isArray(n)?[]:n).push(e),!1;return A},t)),t&&(A=He(r,A),s.push(A))}),{size:n,shape:B,stops:s,position:o,type:2}},Oe=function(A,e){if(22===e.type){var t={url:e.value,type:0};return A.cache.addImage(e.value),t}if(18!==e.type)throw new Error("Unsupported image type "+e.type);t=ke[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return t(A,e.values)};var Ve,ke={"linear-gradient":function(t,A){var r=Ce(180),B=[];return Ae(A).forEach(function(A,e){if(0===e){e=A[0];if(20===e.type&&"to"===e.value)return void(r=se(A));if(ne(e))return void(r=le(t,e))}A=He(t,A);B.push(A)}),{angle:r,stops:B,type:1}},"-moz-linear-gradient":Ke,"-ms-linear-gradient":Ke,"-o-linear-gradient":Ke,"-webkit-linear-gradient":Ke,"radial-gradient":function(B,A){var n=0,s=3,o=[],i=[];return Ae(A).forEach(function(A,e){var t,r=!0;0===e&&(t=!1,r=A.reduce(function(A,e){if(t)if(_A(e))switch(e.value){case"center":return i.push(ge),A;case"top":case"left":return i.push(ae),A;case"right":case"bottom":return i.push(we),A}else(te(e)||ee(e))&&i.push(e);else if(_A(e))switch(e.value){case"circle":return n=0,!1;case Te:return!(n=1);case"at":return!(t=!0);case ve:return s=0,!1;case"cover":case xe:return!(s=1);case Ge:case Me:return!(s=2);case Se:return!(s=3)}else if(ee(e)||te(e))return(s=!Array.isArray(s)?[]:s).push(e),!1;return A},r)),r&&(A=He(B,A),o.push(A))}),{size:s,shape:n,stops:o,position:i,type:2}},"-moz-radial-gradient":he,"-ms-radial-gradient":he,"-o-radial-gradient":he,"-webkit-radial-gradient":he,"-webkit-gradient":function(r,A){var e=Ce(180),B=[],n=1;return Ae(A).forEach(function(A,e){var t,A=A[0];if(0===e){if(_A(A)&&"linear"===A.value)return void(n=1);if(_A(A)&&"radial"===A.value)return void(n=2)}18===A.type&&("from"===A.name?(t=ue(r,A.values[0]),B.push({stop:ae,color:t})):"to"===A.name?(t=ue(r,A.values[0]),B.push({stop:we,color:t})):"color-stop"!==A.name||2===(A=A.values.filter($A)).length&&(t=ue(r,A[1]),A=A[0],ZA(A)&&B.push({stop:{type:16,number:100*A.number,flags:A.flags},color:t})))}),1===n?{angle:(e+Ce(180))%Ce(360),stops:B,type:n}:{size:3,shape:0,stops:B,position:[],type:n}}},Re={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(0===A.length)return[];var t=A[0];return 20===t.type&&"none"===t.value?[]:A.filter(function(A){return $A(A)&&!(20===(A=A).type&&"none"===A.value||18===A.type&&!ke[A.name])}).map(function(A){return Oe(e,A)})}},Ne={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(A){if(_A(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(te)}).map(re)}},Xe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(_A).map(function(A){return A.value}).join(" ")}).map(Je)}},Je=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(he=Ve=Ve||{}).AUTO="auto",he.CONTAIN="contain";function Ye(A,e){return _A(A)&&"normal"===A.value?1.2*e:17===A.type?e*A.number:te(A)?Ue(A,e):e}var We,Ze,_e={name:"background-size",initialValue:"0",prefix:!(he.COVER="cover"),type:1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(qe)})}},qe=function(A){return _A(A)||te(A)},he=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},je=he("top"),ze=he("right"),$e=he("bottom"),At=he("left"),he=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return re(e.filter(te))}}},et=he("top-left"),tt=he("top-right"),rt=he("bottom-right"),Bt=he("bottom-left"),he=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nt=he("top"),st=he("right"),ot=he("bottom"),it=he("left"),he=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}}},Qt=he("top"),ct=he("right"),at=he("bottom"),gt=he("left"),wt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ut={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,e){return"rtl"!==e?0:1}},lt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).reduce(function(A,e){return A|Ct(e.value)},0)}},Ct=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ut={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ft={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,e){return!(20===e.type&&"normal"===e.value||17!==e.type&&15!==e.type)?e.number:0}},ht={name:"line-break",initialValue:(he=We=We||{}).NORMAL="normal",prefix:!(he.STRICT="strict"),type:2,parse:function(A,e){return"strict"!==e?We.NORMAL:We.STRICT}},dt={name:"line-height",initialValue:"normal",prefix:!1,type:4},ft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,e){return 20===e.type&&"none"===e.value?null:Oe(A,e)}},Ht={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,e){return"inside"!==e?1:0}},pt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},he=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Et=he("top"),It=he("right"),yt=he("bottom"),Kt=he("left"),mt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Lt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"break-word"!==e?"normal":"break-word"}},he=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bt=he("top"),Dt=he("right"),vt=he("bottom"),xt=he("left"),Mt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},St={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Tt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,A){return 1===A.length&&jA(A[0],"none")?[]:Ae(A).map(function(A){for(var e={color:Le.TRANSPARENT,offsetX:ae,offsetY:ae,blur:ae},t=0,r=0;r<A.length;r++){var B=A[r];ee(B)?(0===t?e.offsetX=B:1===t?e.offsetY=B:e.blur=B,t++):e.color=ue(n,B)}return e})}},Gt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ot={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,e){if(20===e.type&&"none"===e.value)return null;if(18!==e.type)return null;var t=Vt[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}},Vt={matrix:function(A){A=A.filter(function(A){return 17===A.type}).map(function(A){return A.number});return 6===A.length?A:null},matrix3d:function(A){var e=A.filter(function(A){return 17===A.type}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var B=e[4],n=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],A=e[13];return e[14],e[15],16===e.length?[t,r,B,n,s,A]:null}},he={type:16,number:50,flags:4},kt=[he,he],Rt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,e){e=e.filter(te);return 2!==e.length?kt:[e[0],e[1]]}},Nt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(he=Ze=Ze||{}).NORMAL="normal",he.BREAK_ALL="break-all";function Pt(A,e){return 0!=(A&e)}function Xt(A,e,t){return(A=A&&A[Math.min(e,A.length-1)])?t?A.open:A.close:""}var Jt={name:"word-break",initialValue:"normal",prefix:!(he.KEEP_ALL="keep-all"),type:2,parse:function(A,e){switch(e){case"break-all":return Ze.BREAK_ALL;case"keep-all":return Ze.KEEP_ALL;default:return Ze.NORMAL}}},Yt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,e){if(20===e.type)return{auto:!0,order:0};if(ZA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Wt=function(A,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},Zt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,e){return ZA(e)?e.number:1}},_t={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return 0!==A})}},jt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,e){var t=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:r.push(t.join(" ")),t.length=0}}),t.length&&r.push(t.join(" ")),r.map(function(A){return-1===A.indexOf(" ")?A:"'"+A+"'"})}},zt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,e){return ZA(e)?e.number:!_A(e)||"bold"!==e.value?400:700}},Ar={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.filter(_A).map(function(A){return A.value})}},er={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},tr={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e}},rr={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;for(var r=[],B=e.filter(zA),n=0;n<B.length;n++){var s=B[n],o=B[n+1];20===s.type&&(o=o&&ZA(o)?o.number:1,r.push({counter:s.value,increment:o}))}return r}},Br={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return[];for(var t=[],r=e.filter(zA),B=0;B<r.length;B++){var n=r[B],s=r[B+1];_A(n)&&"none"!==n.value&&(s=s&&ZA(s)?s.number:0,t.push({counter:n.value,reset:s}))}return t}},nr={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,A){return A.filter(WA).map(function(A){return Wt(e,A)})}},sr={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;var r=[],B=e.filter(qA);if(B.length%2!=0)return null;for(var n=0;n<B.length;n+=2){var s=B[n].value,o=B[n+1].value;r.push({open:s,close:o})}return r}},or={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,A){return 1===A.length&&jA(A[0],"none")?[]:Ae(A).map(function(A){for(var e={color:255,offsetX:ae,offsetY:ae,blur:ae,spread:ae,inset:!1},t=0,r=0;r<A.length;r++){var B=A[r];jA(B,"inset")?e.inset=!0:ee(B)?(0===t?e.offsetX=B:1===t?e.offsetY=B:2===t?e.blur=B:e.spread=B,t++):e.color=ue(n,B)}return e})}},ir={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,e){var t=[];return e.filter(_A).forEach(function(A){switch(A.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2)}}),[0,1,2].forEach(function(A){-1===t.indexOf(A)&&t.push(A)}),t}},Qr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},cr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}},ar=(gr.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&0===this.visibility},gr.prototype.isTransparent=function(){return oe(this.backgroundColor)},gr.prototype.isTransformed=function(){return null!==this.transform},gr.prototype.isPositioned=function(){return 0!==this.position},gr.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},gr.prototype.isFloating=function(){return 0!==this.float},gr.prototype.isInlineLevel=function(){return Pt(this.display,4)||Pt(this.display,33554432)||Pt(this.display,268435456)||Pt(this.display,536870912)||Pt(this.display,67108864)||Pt(this.display,134217728)},gr);function gr(A,e){this.animationDuration=lr(A,nr,e.animationDuration),this.backgroundClip=lr(A,be,e.backgroundClip),this.backgroundColor=lr(A,De,e.backgroundColor),this.backgroundImage=lr(A,Re,e.backgroundImage),this.backgroundOrigin=lr(A,Ne,e.backgroundOrigin),this.backgroundPosition=lr(A,Pe,e.backgroundPosition),this.backgroundRepeat=lr(A,Xe,e.backgroundRepeat),this.backgroundSize=lr(A,_e,e.backgroundSize),this.borderTopColor=lr(A,je,e.borderTopColor),this.borderRightColor=lr(A,ze,e.borderRightColor),this.borderBottomColor=lr(A,$e,e.borderBottomColor),this.borderLeftColor=lr(A,At,e.borderLeftColor),this.borderTopLeftRadius=lr(A,et,e.borderTopLeftRadius),this.borderTopRightRadius=lr(A,tt,e.borderTopRightRadius),this.borderBottomRightRadius=lr(A,rt,e.borderBottomRightRadius),this.borderBottomLeftRadius=lr(A,Bt,e.borderBottomLeftRadius),this.borderTopStyle=lr(A,nt,e.borderTopStyle),this.borderRightStyle=lr(A,st,e.borderRightStyle),this.borderBottomStyle=lr(A,ot,e.borderBottomStyle),this.borderLeftStyle=lr(A,it,e.borderLeftStyle),this.borderTopWidth=lr(A,Qt,e.borderTopWidth),this.borderRightWidth=lr(A,ct,e.borderRightWidth),this.borderBottomWidth=lr(A,at,e.borderBottomWidth),this.borderLeftWidth=lr(A,gt,e.borderLeftWidth),this.boxShadow=lr(A,or,e.boxShadow),this.color=lr(A,wt,e.color),this.direction=lr(A,Ut,e.direction),this.display=lr(A,lt,e.display),this.float=lr(A,ut,e.cssFloat),this.fontFamily=lr(A,jt,e.fontFamily),this.fontSize=lr(A,zt,e.fontSize),this.fontStyle=lr(A,er,e.fontStyle),this.fontVariant=lr(A,Ar,e.fontVariant),this.fontWeight=lr(A,$t,e.fontWeight),this.letterSpacing=lr(A,Ft,e.letterSpacing),this.lineBreak=lr(A,ht,e.lineBreak),this.lineHeight=lr(A,dt,e.lineHeight),this.listStyleImage=lr(A,ft,e.listStyleImage),this.listStylePosition=lr(A,Ht,e.listStylePosition),this.listStyleType=lr(A,pt,e.listStyleType),this.marginTop=lr(A,Et,e.marginTop),this.marginRight=lr(A,It,e.marginRight),this.marginBottom=lr(A,yt,e.marginBottom),this.marginLeft=lr(A,Kt,e.marginLeft),this.opacity=lr(A,Zt,e.opacity);var t=lr(A,mt,e.overflow);this.overflowX=t[0],this.overflowY=t[1<t.length?1:0],this.overflowWrap=lr(A,Lt,e.overflowWrap),this.paddingTop=lr(A,bt,e.paddingTop),this.paddingRight=lr(A,Dt,e.paddingRight),this.paddingBottom=lr(A,vt,e.paddingBottom),this.paddingLeft=lr(A,xt,e.paddingLeft),this.paintOrder=lr(A,ir,e.paintOrder),this.position=lr(A,St,e.position),this.textAlign=lr(A,Mt,e.textAlign),this.textDecorationColor=lr(A,_t,null!==(t=e.textDecorationColor)&&void 0!==t?t:e.color),this.textDecorationLine=lr(A,qt,null!==(t=e.textDecorationLine)&&void 0!==t?t:e.textDecoration),this.textShadow=lr(A,Tt,e.textShadow),this.textTransform=lr(A,Gt,e.textTransform),this.transform=lr(A,Ot,e.transform),this.transformOrigin=lr(A,Rt,e.transformOrigin),this.visibility=lr(A,Nt,e.visibility),this.webkitTextStrokeColor=lr(A,Qr,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(A,cr,e.webkitTextStrokeWidth),this.wordBreak=lr(A,Jt,e.wordBreak),this.zIndex=lr(A,Yt,e.zIndex)}for(var wr=function(A,e){this.content=lr(A,tr,e.content),this.quotes=lr(A,sr,e.quotes)},Ur=function(A,e){this.counterIncrement=lr(A,rr,e.counterIncrement),this.counterReset=lr(A,Br,e.counterReset)},lr=function(A,e,t){var r=new PA,t=null!=t?t.toString():e.initialValue;r.write(t);var B=new JA(r.read());switch(e.type){case 2:var n=B.parseComponentValue();return e.parse(A,_A(n)?n.value:e.initialValue);case 0:return e.parse(A,B.parseComponentValue());case 1:return e.parse(A,B.parseComponentValues());case 4:return B.parseComponentValue();case 3:switch(e.format){case"angle":return le(A,B.parseComponentValue());case"color":return ue(A,B.parseComponentValue());case"image":return Oe(A,B.parseComponentValue());case"length":var s=B.parseComponentValue();return ee(s)?s:ae;case"length-percentage":s=B.parseComponentValue();return te(s)?s:ae;case"time":return Wt(A,B.parseComponentValue())}}},Cr=function(A,e){A=function(A){switch(A.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(A);return 1===A||e===A},ur=function(A,e){this.context=A,this.textNodes=[],this.elements=[],this.flags=0,Cr(e,3),this.styles=new ar(A,window.getComputedStyle(e,null)),JB(e)&&(this.styles.animationDuration.some(function(A){return 0<A})&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=f(this.context,e),Cr(e,4)&&(this.flags|=16)},Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),dr=0;dr<Fr.length;dr++)hr[Fr.charCodeAt(dr)]=dr;function fr(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var Hr=(pr.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=this.index[A>>5],this.data[e=(e<<2)+(31&A)];if(A<=65535)return e=this.index[2048+(A-55296>>5)],this.data[e=(e<<2)+(31&A)];if(A<this.highStart)return e=this.index[e=2080+(A>>11)],e=this.index[e+=A>>5&63],this.data[e=(e<<2)+(31&A)];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},pr);function pr(A,e,t,r,B,n){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=B,this.data=n}for(var Er="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ir="undefined"==typeof Uint8Array?[]:new Uint8Array(256),yr=0;yr<Er.length;yr++)Ir[Er.charCodeAt(yr)]=yr;function Kr(A){return kr.get(A)}function mr(A){var t=function(A){for(var e=[],t=0,r=A.length;t<r;){var B,n=A.charCodeAt(t++);55296<=n&&n<=56319&&t<r?56320==(64512&(B=A.charCodeAt(t++)))?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--):e.push(n)}return e}(A),r=t.length,B=0,n=0,s=t.map(Kr);return{next:function(){if(r<=B)return{done:!0,value:null};for(var A=Rr;B<r&&(A=function(A,e){var t=e-2,r=A[t],B=A[e-1],e=A[e];if(2===B&&3===e)return Rr;if(2===B||3===B||4===B)return"÷";if(2===e||3===e||4===e)return"÷";if(B===Tr&&-1!==[Tr,Gr,Or,Vr].indexOf(e))return Rr;if(!(B!==Or&&B!==Gr||e!==Gr&&10!==e))return Rr;if((B===Vr||10===B)&&10===e)return Rr;if(13===e||5===e)return Rr;if(7===e)return Rr;if(1===B)return Rr;if(13===B&&14===e){for(;5===r;)r=A[--t];if(14===r)return Rr}if(15===B&&15===e){for(var n=0;15===r;)n++,r=A[--t];if(n%2==0)return Rr}return"÷"}(s,++B))===Rr;);if(A===Rr&&B!==r)return{done:!0,value:null};var e=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],B=-1,n="";++B<t;){var s=A[B];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(B+1===t||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n}.apply(null,t.slice(n,B));return n=B,{value:e,done:!1}}}}function Lr(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]}var br,Dr,vr,xr,Mr,Sr,Tr=8,Gr=9,Or=11,Vr=12,kr=(vr=function(A){var e,t,r,B,n=.75*A.length,s=A.length,o=0;"="===A[A.length-1]&&(n--,"="===A[A.length-2]&&n--);for(var n=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(n),i=Array.isArray(n)?n:new Uint8Array(n),Q=0;Q<s;Q+=4)e=hr[A.charCodeAt(Q)],t=hr[A.charCodeAt(Q+1)],r=hr[A.charCodeAt(Q+2)],B=hr[A.charCodeAt(Q+3)],i[o++]=e<<2|t>>4,i[o++]=(15&t)<<4|r>>2,i[o++]=(3&r)<<6|63&B;return n}(br="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),xr=Array.isArray(vr)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(vr):new Uint32Array(vr),Mr=Array.isArray(vr)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(vr):new Uint16Array(vr),br=fr(Mr,12,xr[4]/2),Dr=2===xr[5]?fr(Mr,(24+xr[4])/2):(vr=xr,Mr=Math.ceil((24+xr[4])/4),vr.slice?vr.slice(Mr,Dr):new Uint32Array(Array.prototype.slice.call(vr,Mr,Dr))),new Hr(xr[0],xr[1],xr[2],xr[3],br,Dr)),Rr="×",Nr=function(A,e,t,r,B){var n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),n=document.createElementNS(n,"foreignObject");return s.setAttributeNS(null,"width",A.toString()),s.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width","100%"),n.setAttributeNS(null,"height","100%"),n.setAttributeNS(null,"x",t.toString()),n.setAttributeNS(null,"y",r.toString()),n.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(n),n.appendChild(B),s},Pr=function(r){return new Promise(function(A,e){var t=new Image;t.onload=function(){return A(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Xr={get SUPPORT_RANGE_BOUNDS(){var A=function(A){if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height="123px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);e=e.getBoundingClientRect(),e=Math.round(e.height);if(A.body.removeChild(t),123===e)return!0}}return!1}(document);return Object.defineProperty(Xr,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Xr.SUPPORT_RANGE_BOUNDS&&function(A){var e=A.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",A.body.appendChild(e);var r=A.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var B=e.firstChild,t=Q(B.data).map(function(A){return g(A)}),n=0,s={},t=t.every(function(A,e){r.setStart(B,n),r.setEnd(B,n+A.length);var t=r.getBoundingClientRect();n+=A.length;A=t.x>s.x||t.y>s.y;return s=t,0===e||A});return A.body.removeChild(e),t}(document);return Object.defineProperty(Xr,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=function(A){var e=new Image,t=A.createElement("canvas"),A=t.getContext("2d");if(!A)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{A.drawImage(e,0,0),t.toDataURL()}catch(A){return!1}return!0}(document);return Object.defineProperty(Xr,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var A=t.createElement("canvas"),r=100;A.width=r,A.height=r;var B=A.getContext("2d");if(!B)return Promise.reject(!1);B.fillStyle="rgb(0, 255, 0)",B.fillRect(0,0,r,r);var e=new Image,n=A.toDataURL();e.src=n;e=Nr(r,r,0,0,e);return B.fillStyle="red",B.fillRect(0,0,r,r),Pr(e).then(function(A){B.drawImage(A,0,0);var e=B.getImageData(0,0,r,r).data;B.fillStyle="red",B.fillRect(0,0,r,r);A=t.createElement("div");return A.style.backgroundImage="url("+n+")",A.style.height="100px",Lr(e)?Pr(Nr(r,r,0,0,A)):Promise.reject(!1)}).then(function(A){return B.drawImage(A,0,0),Lr(B.getImageData(0,0,r,r).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Xr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=void 0!==(new Image).crossOrigin;return Object.defineProperty(Xr,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Xr,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Xr,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Xr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Jr=function(A,e){this.text=A,this.bounds=e},Yr=function(A,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));t=e.parentNode;if(t){t.replaceChild(r,e);A=f(A,r);return r.firstChild&&t.replaceChild(r.firstChild,r),A}}return d.EMPTY},Wr=function(A,e,t){var r=A.ownerDocument;if(!r)throw new Error("Node has no owner document");r=r.createRange();return r.setStart(A,e),r.setEnd(A,e+t),r},Zr=function(A){if(Xr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(A)).map(function(A){return A.segment})}return function(A){for(var e,t=mr(A),r=[];!(e=t.next()).done;)e.value&&r.push(e.value.slice());return r}(A)},_r=function(A,e){return 0!==e.letterSpacing?Zr(A):function(A,e){if(Xr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(A)).map(function(A){return A.segment})}return jr(A,e)}(A,e)},qr=[32,160,4961,65792,65793,4153,4241],jr=function(A,e){for(var t,r=wA(A,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),B=[];!(t=r.next()).done;)!function(){var A,e;t.value&&(A=t.value.slice(),A=Q(A),e="",A.forEach(function(A){-1===qr.indexOf(A)?e+=g(A):(e.length&&B.push(e),B.push(g(A)),e="")}),e.length&&B.push(e))}();return B},zr=function(A,e,t){var B,n,s,o,i;this.text=$r(e.data,t.textTransform),this.textBounds=(B=A,A=this.text,s=e,A=_r(A,n=t),o=[],i=0,A.forEach(function(A){var e,t,r;n.textDecorationLine.length||0<A.trim().length?Xr.SUPPORT_RANGE_BOUNDS?1<(r=Wr(s,i,A.length).getClientRects()).length?(e=Zr(A),t=0,e.forEach(function(A){o.push(new Jr(A,d.fromDOMRectList(B,Wr(s,t+i,A.length).getClientRects()))),t+=A.length})):o.push(new Jr(A,d.fromDOMRectList(B,r))):(r=s.splitText(A.length),o.push(new Jr(A,Yr(B,s))),s=r):Xr.SUPPORT_RANGE_BOUNDS||(s=s.splitText(A.length)),i+=A.length}),o)},$r=function(A,e){switch(e){case 1:return A.toLowerCase();case 3:return A.replace(AB,eB);case 2:return A.toUpperCase();default:return A}},AB=/(^|\s|:|-|\(|\))([a-z])/g,eB=function(A,e,t){return 0<A.length?e+t.toUpperCase():A},tB=(A(rB,Sr=ur),rB);function rB(A,e){A=Sr.call(this,A,e)||this;return A.src=e.currentSrc||e.src,A.intrinsicWidth=e.naturalWidth,A.intrinsicHeight=e.naturalHeight,A.context.cache.addImage(A.src),A}var BB,nB=(A(sB,BB=ur),sB);function sB(A,e){A=BB.call(this,A,e)||this;return A.canvas=e,A.intrinsicWidth=e.width,A.intrinsicHeight=e.height,A}var oB,iB=(A(QB,oB=ur),QB);function QB(A,e){var t=oB.call(this,A,e)||this,r=new XMLSerializer,A=f(A,e);return e.setAttribute("width",A.width+"px"),e.setAttribute("height",A.height+"px"),t.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)),t.intrinsicWidth=e.width.baseVal.value,t.intrinsicHeight=e.height.baseVal.value,t.context.cache.addImage(t.svg),t}var cB,aB=(A(gB,cB=ur),gB);function gB(A,e){A=cB.call(this,A,e)||this;return A.value=e.value,A}var wB,UB=(A(lB,wB=ur),lB);function lB(A,e){A=wB.call(this,A,e)||this;return A.start=e.start,A.reversed="boolean"==typeof e.reversed&&!0===e.reversed,A}var CB,uB=[{type:15,flags:0,unit:"px",number:3}],FB=[{type:16,flags:0,number:50}],hB="checkbox",dB="radio",fB="password",HB=707406591,pB=(A(EB,CB=ur),EB);function EB(A,e){var t=CB.call(this,A,e)||this;switch(t.type=e.type.toLowerCase(),t.checked=e.checked,t.value=0===(e=(A=e).type===fB?new Array(A.value.length+1).join("•"):A.value).length?A.placeholder||"":e,t.type!==hB&&t.type!==dB||(t.styles.backgroundColor=3739148031,t.styles.borderTopColor=t.styles.borderRightColor=t.styles.borderBottomColor=t.styles.borderLeftColor=2779096575,t.styles.borderTopWidth=t.styles.borderRightWidth=t.styles.borderBottomWidth=t.styles.borderLeftWidth=1,t.styles.borderTopStyle=t.styles.borderRightStyle=t.styles.borderBottomStyle=t.styles.borderLeftStyle=1,t.styles.backgroundClip=[0],t.styles.backgroundOrigin=[0],t.bounds=(e=t.bounds).width>e.height?new d(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new d(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e),t.type){case hB:t.styles.borderTopRightRadius=t.styles.borderTopLeftRadius=t.styles.borderBottomRightRadius=t.styles.borderBottomLeftRadius=uB;break;case dB:t.styles.borderTopRightRadius=t.styles.borderTopLeftRadius=t.styles.borderBottomRightRadius=t.styles.borderBottomLeftRadius=FB}return t}var IB,yB=(A(KB,IB=ur),KB);function KB(A,e){A=IB.call(this,A,e)||this,e=e.options[e.selectedIndex||0];return A.value=e&&e.text||"",A}var mB,LB=(A(bB,mB=ur),bB);function bB(A,e){A=mB.call(this,A,e)||this;return A.value=e.value,A}var DB,vB=(A(xB,DB=ur),xB);function xB(A,e){var t,r,B=DB.call(this,A,e)||this;B.src=e.src,B.width=parseInt(e.width,10)||0,B.height=parseInt(e.height,10)||0,B.backgroundColor=B.styles.backgroundColor;try{e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement&&(B.tree=kB(A,e.contentWindow.document.documentElement),t=e.contentWindow.document.documentElement?fe(A,getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):Le.TRANSPARENT,r=e.contentWindow.document.body?fe(A,getComputedStyle(e.contentWindow.document.body).backgroundColor):Le.TRANSPARENT,B.backgroundColor=oe(t)?oe(r)?B.styles.backgroundColor:r:t)}catch(A){}return B}function MB(A){return"VIDEO"===A.tagName}function SB(A){return"STYLE"===A.tagName}function TB(A){return 0<A.tagName.indexOf("-")}var GB=["OL","UL","MENU"],OB=function(e,A,t,r){for(var B=A.firstChild;B;B=s){var n,s=B.nextSibling;PB(B)&&0<B.data.trim().length?t.textNodes.push(new zr(e,B,t.styles)):XB(B)&&(rn(B)&&B.assignedNodes?B.assignedNodes().forEach(function(A){return OB(e,A,t,r)}):(n=VB(e,B)).styles.isVisible()&&(RB(B,n,r)?n.flags|=4:NB(n.styles)&&(n.flags|=2),-1!==GB.indexOf(B.tagName)&&(n.flags|=8),t.elements.push(n),B.slot,B.shadowRoot?OB(e,B.shadowRoot,n,r):en(B)||qB(B)||tn(B)||OB(e,B,n,r)))}},VB=function(A,e){return new($B(e)?tB:zB(e)?nB:qB(e)?iB:WB(e)?aB:ZB(e)?UB:_B(e)?pB:tn(e)?yB:en(e)?LB:An(e)?vB:ur)(A,e)},kB=function(A,e){var t=VB(A,e);return t.flags|=4,OB(A,e,t,t),t},RB=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||jB(A)&&t.styles.isTransparent()},NB=function(A){return A.isPositioned()||A.isFloating()},PB=function(A){return A.nodeType===Node.TEXT_NODE},XB=function(A){return A.nodeType===Node.ELEMENT_NODE},JB=function(A){return XB(A)&&void 0!==A.style&&!YB(A)},YB=function(A){return"object"==typeof A.className},WB=function(A){return"LI"===A.tagName},ZB=function(A){return"OL"===A.tagName},_B=function(A){return"INPUT"===A.tagName},qB=function(A){return"svg"===A.tagName},jB=function(A){return"BODY"===A.tagName},zB=function(A){return"CANVAS"===A.tagName},$B=function(A){return"IMG"===A.tagName},An=function(A){return"IFRAME"===A.tagName},en=function(A){return"TEXTAREA"===A.tagName},tn=function(A){return"SELECT"===A.tagName},rn=function(A){return"SLOT"===A.tagName},Bn=(nn.prototype.getCounterValue=function(A){A=this.counters[A];return A&&A.length?A[A.length-1]:1},nn.prototype.getCounterValues=function(A){A=this.counters[A];return A||[]},nn.prototype.pop=function(A){var e=this;A.forEach(function(A){return e.counters[A].pop()})},nn.prototype.parse=function(A){var t=this,e=A.counterIncrement,A=A.counterReset,r=!0;null!==e&&e.forEach(function(A){var e=t.counters[A.counter];e&&0!==A.increment&&(r=!1,e.length||e.push(1),e[Math.max(0,e.length-1)]+=A.increment)});var B=[];return r&&A.forEach(function(A){var e=t.counters[A.counter];B.push(A.counter),(e=e||(t.counters[A.counter]=[])).push(A.reset)}),B},nn);function nn(){this.counters={}}function sn(r,A,e,B,t,n){return r<A||e<r?Fn(r,t,0<n.length):B.integers.reduce(function(A,e,t){for(;e<=r;)r-=e,A+=B.values[t];return A},"")+n}function on(A,e,t,r){for(var B="";t||A--,B=r(A)+B,e<=(A/=e)*e;);return B}function Qn(A,e,t,r,B){var n=t-e+1;return(A<0?"-":"")+(on(Math.abs(A),n,r,function(A){return g(Math.floor(A%n)+e)})+B)}function cn(A,e,t){void 0===t&&(t=". ");var r=e.length;return on(Math.abs(A),r,!1,function(A){return e[Math.floor(A%r)]})+t}function an(A,e,t,r,B,n){if(A<-9999||9999<A)return Fn(A,4,0<B.length);var s=Math.abs(A),o=B;if(0===s)return e[0]+o;for(var i=0;0<s&&i<=4;i++){var Q=s%10;0==Q&&Pt(n,1)&&""!==o?o=e[Q]+o:1<Q||1==Q&&0===i||1==Q&&1===i&&Pt(n,2)||1==Q&&1===i&&Pt(n,4)&&100<A||1==Q&&1<i&&Pt(n,8)?o=e[Q]+(0<i?t[i-1]:"")+o:1==Q&&0<i&&(o=t[i-1]+o),s=Math.floor(s/10)}return(A<0?r:"")+o}var gn,wn={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Un={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},ln={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Cn={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},un="마이너스",Fn=function(A,e,t){var r=t?". ":"",B=t?"、":"",n=t?", ":"",s=t?" ":"";switch(e){case 0:return"•"+s;case 1:return"◦"+s;case 2:return"◾"+s;case 5:var o=Qn(A,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return cn(A,"〇一二三四五六七八九",B);case 6:return sn(A,1,3999,wn,3,r).toLowerCase();case 7:return sn(A,1,3999,wn,3,r);case 8:return Qn(A,945,969,!1,r);case 9:return Qn(A,97,122,!1,r);case 10:return Qn(A,65,90,!1,r);case 11:return Qn(A,1632,1641,!0,r);case 12:case 49:return sn(A,1,9999,Un,3,r);case 35:return sn(A,1,9999,Un,3,r).toLowerCase();case 13:return Qn(A,2534,2543,!0,r);case 14:case 30:return Qn(A,6112,6121,!0,r);case 15:return cn(A,"子丑寅卯辰巳午未申酉戌亥",B);case 16:return cn(A,"甲乙丙丁戊己庚辛壬癸",B);case 17:case 48:return an(A,"零一二三四五六七八九","十百千萬","負",B,14);case 47:return an(A,"零壹貳參肆伍陸柒捌玖","拾佰仟萬","負",B,15);case 42:return an(A,"零一二三四五六七八九","十百千萬","负",B,14);case 41:return an(A,"零壹贰叁肆伍陆柒捌玖","拾佰仟萬","负",B,15);case 26:return an(A,"〇一二三四五六七八九","十百千万","マイナス",B,0);case 25:return an(A,"零壱弐参四伍六七八九","拾百千万","マイナス",B,7);case 31:return an(A,"영일이삼사오육칠팔구","십백천만",un,n,7);case 33:return an(A,"零一二三四五六七八九","十百千萬",un,n,0);case 32:return an(A,"零壹貳參四五六七八九","拾百千",un,n,7);case 18:return Qn(A,2406,2415,!0,r);case 20:return sn(A,1,19999,Cn,3,r);case 21:return Qn(A,2790,2799,!0,r);case 22:return Qn(A,2662,2671,!0,r);case 22:return sn(A,1,10999,ln,3,r);case 23:return cn(A,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return cn(A,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Qn(A,3302,3311,!0,r);case 28:return cn(A,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",B);case 29:return cn(A,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",B);case 34:return Qn(A,3792,3801,!0,r);case 37:return Qn(A,6160,6169,!0,r);case 38:return Qn(A,4160,4169,!0,r);case 39:return Qn(A,2918,2927,!0,r);case 40:return Qn(A,1776,1785,!0,r);case 43:return Qn(A,3046,3055,!0,r);case 44:return Qn(A,3174,3183,!0,r);case 45:return Qn(A,3664,3673,!0,r);case 46:return Qn(A,3872,3881,!0,r);default:return Qn(A,48,57,!0,r)}},hn="data-html2canvas-ignore",dn=(fn.prototype.toIFrame=function(A,r){var e=this,B=pn(A,r);if(!B.contentWindow)return Promise.reject("Unable to find iframe window");var t=A.defaultView.pageXOffset,n=A.defaultView.pageYOffset,s=B.contentWindow,o=s.document,A=In(B).then(function(){return a(e,void 0,void 0,function(){var e,t;return H(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(bn),s&&(s.scrollTo(r.left,r.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||s.scrollY===r.top&&s.scrollX===r.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-r.left,s.scrollY-r.top,0,0))),e=this.options.onclone,void 0===(t=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,En(o)]:[3,4];case 3:A.sent(),A.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then(function(){return e(o,t)}).then(function(){return B})]:[2,B]}})})});return o.open(),o.write(mn(document.doctype)+"<html></html>"),Ln(this.referenceElement.ownerDocument,t,n),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),A},fn.prototype.createElementClone=function(A){if(Cr(A,2),zB(A))return this.createCanvasClone(A);if(MB(A))return this.createVideoClone(A);if(SB(A))return this.createStyleClone(A);var e=A.cloneNode(!1);return $B(e)&&($B(A)&&A.currentSrc&&A.currentSrc!==A.src&&(e.src=A.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),TB(e)?this.createCustomElementClone(e):e},fn.prototype.createCustomElementClone=function(A){var e=document.createElement("html2canvascustomelement");return Kn(A.style,e),e},fn.prototype.createStyleClone=function(A){try{var e=A.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce(function(A,e){return e&&"string"==typeof e.cssText?A+e.cssText:A},""),r=A.cloneNode(!1);return r.textContent=t,r}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),"SecurityError"!==A.name)throw A}return A.cloneNode(!1)},fn.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(A){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}t=e.cloneNode(!1);try{t.width=e.width,t.height=e.height;var r,B,n=e.getContext("2d"),s=t.getContext("2d");return s&&(!this.options.allowTaint&&n?s.putImageData(n.getImageData(0,0,e.width,e.height),0,0):(!(r=null!==(A=e.getContext("webgl2"))&&void 0!==A?A:e.getContext("webgl"))||!1===(null==(B=r.getContextAttributes())?void 0:B.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e),s.drawImage(e,0,0))),t}catch(A){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return t},fn.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var t=A.getContext("2d");try{return t&&(t.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||t.getImageData(0,0,A.width,A.height)),A}catch(A){this.context.logger.info("Unable to clone video as it is tainted",e)}A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},fn.prototype.appendChildNode=function(A,e,t){XB(e)&&("SCRIPT"===e.tagName||e.hasAttribute(hn)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&XB(e)&&SB(e)||A.appendChild(this.cloneNode(e,t))},fn.prototype.cloneChildNodes=function(A,e,t){for(var r,B=this,n=(A.shadowRoot||A).firstChild;n;n=n.nextSibling)XB(n)&&rn(n)&&"function"==typeof n.assignedNodes?(r=n.assignedNodes()).length&&r.forEach(function(A){return B.appendChildNode(e,A,t)}):this.appendChildNode(e,n,t)},fn.prototype.cloneNode=function(A,e){if(PB(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var t=A.ownerDocument.defaultView;if(t&&XB(A)&&(JB(A)||YB(A))){var r=this.createElementClone(A);r.style.transitionProperty="none";var B=t.getComputedStyle(A),n=t.getComputedStyle(A,":before"),s=t.getComputedStyle(A,":after");this.referenceElement===A&&JB(r)&&(this.clonedReferenceElement=r),jB(r)&&Mn(r);t=this.counters.parse(new Ur(this.context,B)),n=this.resolvePseudoContent(A,r,n,gn.BEFORE);TB(A)&&(e=!0),MB(A)||this.cloneChildNodes(A,r,e),n&&r.insertBefore(n,r.firstChild);s=this.resolvePseudoContent(A,r,s,gn.AFTER);return s&&r.appendChild(s),this.counters.pop(t),(B&&(this.options.copyStyles||YB(A))&&!An(A)||e)&&Kn(B,r),0===A.scrollTop&&0===A.scrollLeft||this.scrolledElements.push([r,A.scrollLeft,A.scrollTop]),(en(A)||tn(A))&&(en(r)||tn(r))&&(r.value=A.value),r}return A.cloneNode(!1)},fn.prototype.resolvePseudoContent=function(o,A,e,t){var i=this;if(e){var r=e.content,Q=A.ownerDocument;if(Q&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==e.display){this.counters.parse(new Ur(this.context,e));var c=new wr(this.context,e),a=Q.createElement("html2canvaspseudoelement");Kn(e,a),c.content.forEach(function(A){if(0===A.type)a.appendChild(Q.createTextNode(A.value));else if(22===A.type){var e=Q.createElement("img");e.src=A.value,e.style.opacity="1",a.appendChild(e)}else if(18===A.type){var t,r,B,n,s;"attr"===A.name?(e=A.values.filter(_A)).length&&a.appendChild(Q.createTextNode(o.getAttribute(e[0].value)||"")):"counter"===A.name?(B=(r=A.values.filter($A))[0],r=r[1],B&&_A(B)&&(t=i.counters.getCounterValue(B.value),s=r&&_A(r)?pt.parse(i.context,r.value):3,a.appendChild(Q.createTextNode(Fn(t,s,!1))))):"counters"===A.name&&(B=(t=A.values.filter($A))[0],s=t[1],r=t[2],B&&_A(B)&&(B=i.counters.getCounterValues(B.value),n=r&&_A(r)?pt.parse(i.context,r.value):3,s=s&&0===s.type?s.value:"",s=B.map(function(A){return Fn(A,n,!1)}).join(s),a.appendChild(Q.createTextNode(s))))}else if(20===A.type)switch(A.value){case"open-quote":a.appendChild(Q.createTextNode(Xt(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":a.appendChild(Q.createTextNode(Xt(c.quotes,--i.quoteDepth,!1)));break;default:a.appendChild(Q.createTextNode(A.value))}}),a.className=Dn+" "+vn;t=t===gn.BEFORE?" "+Dn:" "+vn;return YB(A)?A.className.baseValue+=t:A.className+=t,a}}},fn.destroy=function(A){return!!A.parentNode&&(A.parentNode.removeChild(A),!0)},fn);function fn(A,e,t){if(this.context=A,this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new Bn,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}(he=gn=gn||{})[he.BEFORE=0]="BEFORE",he[he.AFTER=1]="AFTER";function Hn(e){return new Promise(function(A){!e.complete&&e.src?(e.onload=A,e.onerror=A):A()})}var pn=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(hn,"true"),A.body.appendChild(t),t},En=function(A){return Promise.all([].slice.call(A.images,0).map(Hn))},In=function(B){return new Promise(function(e,A){var t=B.contentWindow;if(!t)return A("No window assigned for iframe");var r=t.document;t.onload=B.onload=function(){t.onload=B.onload=null;var A=setInterval(function(){0<r.body.childNodes.length&&"complete"===r.readyState&&(clearInterval(A),e(B))},50)}})},yn=["all","d","content"],Kn=function(A,e){for(var t=A.length-1;0<=t;t--){var r=A.item(t);-1===yn.indexOf(r)&&e.style.setProperty(r,A.getPropertyValue(r))}return e},mn=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},Ln=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},bn=function(A){var e=A[0],t=A[1],A=A[2];e.scrollLeft=t,e.scrollTop=A},Dn="___html2canvas___pseudoelement_before",vn="___html2canvas___pseudoelement_after",xn='{\n    content: "" !important;\n    display: none !important;\n}',Mn=function(A){Sn(A,"."+Dn+":before"+xn+"\n         ."+vn+":after"+xn)},Sn=function(A,e){var t=A.ownerDocument;t&&((t=t.createElement("style")).textContent=e,A.appendChild(t))},Tn=(Gn.getOrigin=function(A){var e=Gn._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},Gn.isSameOrigin=function(A){return Gn.getOrigin(A)===Gn._origin},Gn.setContext=function(A){Gn._link=A.document.createElement("a"),Gn._origin=Gn.getOrigin(A.location.href)},Gn._origin="about:blank",Gn);function Gn(){}var On=(Vn.prototype.addImage=function(A){var e=Promise.resolve();return this.has(A)||(Yn(A)||Pn(A))&&(this._cache[A]=this.loadImage(A)).catch(function(){}),e},Vn.prototype.match=function(A){return this._cache[A]},Vn.prototype.loadImage=function(s){return a(this,void 0,void 0,function(){var e,r,t,B,n=this;return H(this,function(A){switch(A.label){case 0:return(e=Tn.isSameOrigin(s),r=!Xn(s)&&!0===this._options.useCORS&&Xr.SUPPORT_CORS_IMAGES&&!e,t=!Xn(s)&&!e&&!Yn(s)&&"string"==typeof this._options.proxy&&Xr.SUPPORT_CORS_XHR&&!r,e||!1!==this._options.allowTaint||Xn(s)||Yn(s)||t||r)?(B=s,t?[4,this.proxy(B)]:[3,2]):[2];case 1:B=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+s.substring(0,256)),[4,new Promise(function(A,e){var t=new Image;t.onload=function(){return A(t)},t.onerror=e,(Jn(B)||r)&&(t.crossOrigin="anonymous"),t.src=B,!0===t.complete&&setTimeout(function(){return A(t)},500),0<n._options.imageTimeout&&setTimeout(function(){return e("Timed out ("+n._options.imageTimeout+"ms) loading image")},n._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},Vn.prototype.has=function(A){return void 0!==this._cache[A]},Vn.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},Vn.prototype.proxy=function(s){var o=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var Q=s.substring(0,256);return new Promise(function(e,t){var r=Xr.SUPPORT_RESPONSE_TYPE?"blob":"text",B=new XMLHttpRequest;B.onload=function(){var A;200===B.status?"text"==r?e(B.response):((A=new FileReader).addEventListener("load",function(){return e(A.result)},!1),A.addEventListener("error",function(A){return t(A)},!1),A.readAsDataURL(B.response)):t("Failed to proxy resource "+Q+" with status code "+B.status)},B.onerror=t;var A,n=-1<i.indexOf("?")?"&":"?";B.open("GET",i+n+"url="+encodeURIComponent(s)+"&responseType="+r),"text"!=r&&B instanceof XMLHttpRequest&&(B.responseType=r),o._options.imageTimeout&&(A=o._options.imageTimeout,B.timeout=A,B.ontimeout=function(){return t("Timed out ("+A+"ms) proxying "+Q)}),B.send()})},Vn);function Vn(A,e){this.context=A,this._options=e,this._cache={}}var kn=/^data:image\/svg\+xml/i,Rn=/^data:image\/.*;base64,/i,Nn=/^data:image\/.*/i,Pn=function(A){return Xr.SUPPORT_SVG_DRAWING||!Wn(A)},Xn=function(A){return Nn.test(A)},Jn=function(A){return Rn.test(A)},Yn=function(A){return"blob"===A.substr(0,4)},Wn=function(A){return"svg"===A.substr(-3).toLowerCase()||kn.test(A)},Zn=(_n.prototype.add=function(A,e){return new _n(this.x+A,this.y+e)},_n);function _n(A,e){this.type=0,this.x=A,this.y=e}function qn(A,e,t){return new Zn(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)}var jn=(zn.prototype.subdivide=function(A,e){var t=qn(this.start,this.startControl,A),r=qn(this.startControl,this.endControl,A),B=qn(this.endControl,this.end,A),n=qn(t,r,A),r=qn(r,B,A),A=qn(n,r,A);return e?new zn(this.start,t,n,A):new zn(A,r,B,this.end)},zn.prototype.add=function(A,e){return new zn(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},zn.prototype.reverse=function(){return new zn(this.end,this.endControl,this.startControl,this.start)},zn);function zn(A,e,t,r){this.type=1,this.start=A,this.startControl=e,this.endControl=t,this.end=r}function $n(A){return 1===A.type}var As,es=function(A){var e=A.styles,t=A.bounds,r=(C=Be(e.borderTopLeftRadius,t.width,t.height))[0],B=C[1],n=(u=Be(e.borderTopRightRadius,t.width,t.height))[0],s=u[1],o=(F=Be(e.borderBottomRightRadius,t.width,t.height))[0],i=F[1],Q=(h=Be(e.borderBottomLeftRadius,t.width,t.height))[0],c=h[1];(d=[]).push((r+n)/t.width),d.push((Q+o)/t.width),d.push((B+c)/t.height),d.push((s+i)/t.height),1<(f=Math.max.apply(Math,d))&&(r/=f,B/=f,n/=f,s/=f,o/=f,i/=f,Q/=f,c/=f);var a=t.width-n,g=t.height-i,w=t.width-o,U=t.height-c,l=e.borderTopWidth,C=e.borderRightWidth,u=e.borderBottomWidth,F=e.borderLeftWidth,h=Ue(e.paddingTop,A.bounds.width),d=Ue(e.paddingRight,A.bounds.width),f=Ue(e.paddingBottom,A.bounds.width),A=Ue(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=0<r||0<B?ss(t.left+F/3,t.top+l/3,r-F/3,B-l/3,As.TOP_LEFT):new Zn(t.left+F/3,t.top+l/3),this.topRightBorderDoubleOuterBox=0<r||0<B?ss(t.left+a,t.top+l/3,n-C/3,s-l/3,As.TOP_RIGHT):new Zn(t.left+t.width-C/3,t.top+l/3),this.bottomRightBorderDoubleOuterBox=0<o||0<i?ss(t.left+w,t.top+g,o-C/3,i-u/3,As.BOTTOM_RIGHT):new Zn(t.left+t.width-C/3,t.top+t.height-u/3),this.bottomLeftBorderDoubleOuterBox=0<Q||0<c?ss(t.left+F/3,t.top+U,Q-F/3,c-u/3,As.BOTTOM_LEFT):new Zn(t.left+F/3,t.top+t.height-u/3),this.topLeftBorderDoubleInnerBox=0<r||0<B?ss(t.left+2*F/3,t.top+2*l/3,r-2*F/3,B-2*l/3,As.TOP_LEFT):new Zn(t.left+2*F/3,t.top+2*l/3),this.topRightBorderDoubleInnerBox=0<r||0<B?ss(t.left+a,t.top+2*l/3,n-2*C/3,s-2*l/3,As.TOP_RIGHT):new Zn(t.left+t.width-2*C/3,t.top+2*l/3),this.bottomRightBorderDoubleInnerBox=0<o||0<i?ss(t.left+w,t.top+g,o-2*C/3,i-2*u/3,As.BOTTOM_RIGHT):new Zn(t.left+t.width-2*C/3,t.top+t.height-2*u/3),this.bottomLeftBorderDoubleInnerBox=0<Q||0<c?ss(t.left+2*F/3,t.top+U,Q-2*F/3,c-2*u/3,As.BOTTOM_LEFT):new Zn(t.left+2*F/3,t.top+t.height-2*u/3),this.topLeftBorderStroke=0<r||0<B?ss(t.left+F/2,t.top+l/2,r-F/2,B-l/2,As.TOP_LEFT):new Zn(t.left+F/2,t.top+l/2),this.topRightBorderStroke=0<r||0<B?ss(t.left+a,t.top+l/2,n-C/2,s-l/2,As.TOP_RIGHT):new Zn(t.left+t.width-C/2,t.top+l/2),this.bottomRightBorderStroke=0<o||0<i?ss(t.left+w,t.top+g,o-C/2,i-u/2,As.BOTTOM_RIGHT):new Zn(t.left+t.width-C/2,t.top+t.height-u/2),this.bottomLeftBorderStroke=0<Q||0<c?ss(t.left+F/2,t.top+U,Q-F/2,c-u/2,As.BOTTOM_LEFT):new Zn(t.left+F/2,t.top+t.height-u/2),this.topLeftBorderBox=0<r||0<B?ss(t.left,t.top,r,B,As.TOP_LEFT):new Zn(t.left,t.top),this.topRightBorderBox=0<n||0<s?ss(t.left+a,t.top,n,s,As.TOP_RIGHT):new Zn(t.left+t.width,t.top),this.bottomRightBorderBox=0<o||0<i?ss(t.left+w,t.top+g,o,i,As.BOTTOM_RIGHT):new Zn(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=0<Q||0<c?ss(t.left,t.top+U,Q,c,As.BOTTOM_LEFT):new Zn(t.left,t.top+t.height),this.topLeftPaddingBox=0<r||0<B?ss(t.left+F,t.top+l,Math.max(0,r-F),Math.max(0,B-l),As.TOP_LEFT):new Zn(t.left+F,t.top+l),this.topRightPaddingBox=0<n||0<s?ss(t.left+Math.min(a,t.width-C),t.top+l,a>t.width+C?0:Math.max(0,n-C),Math.max(0,s-l),As.TOP_RIGHT):new Zn(t.left+t.width-C,t.top+l),this.bottomRightPaddingBox=0<o||0<i?ss(t.left+Math.min(w,t.width-F),t.top+Math.min(g,t.height-u),Math.max(0,o-C),Math.max(0,i-u),As.BOTTOM_RIGHT):new Zn(t.left+t.width-C,t.top+t.height-u),this.bottomLeftPaddingBox=0<Q||0<c?ss(t.left+F,t.top+Math.min(U,t.height-u),Math.max(0,Q-F),Math.max(0,c-u),As.BOTTOM_LEFT):new Zn(t.left+F,t.top+t.height-u),this.topLeftContentBox=0<r||0<B?ss(t.left+F+A,t.top+l+h,Math.max(0,r-(F+A)),Math.max(0,B-(l+h)),As.TOP_LEFT):new Zn(t.left+F+A,t.top+l+h),this.topRightContentBox=0<n||0<s?ss(t.left+Math.min(a,t.width+F+A),t.top+l+h,a>t.width+F+A?0:n-F+A,s-(l+h),As.TOP_RIGHT):new Zn(t.left+t.width-(C+d),t.top+l+h),this.bottomRightContentBox=0<o||0<i?ss(t.left+Math.min(w,t.width-(F+A)),t.top+Math.min(g,t.height+l+h),Math.max(0,o-(C+d)),i-(u+f),As.BOTTOM_RIGHT):new Zn(t.left+t.width-(C+d),t.top+t.height-(u+f)),this.bottomLeftContentBox=0<Q||0<c?ss(t.left+F+A,t.top+U,Math.max(0,Q-(F+A)),c-(u+f),As.BOTTOM_LEFT):new Zn(t.left+F+A,t.top+t.height-(u+f))};(he=As=As||{})[he.TOP_LEFT=0]="TOP_LEFT",he[he.TOP_RIGHT=1]="TOP_RIGHT",he[he.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",he[he.BOTTOM_LEFT=3]="BOTTOM_LEFT";function ts(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]}function rs(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]}function Bs(A){return 1===A.type}function ns(A,t){return A.length===t.length&&A.some(function(A,e){return A===t[e]})}var ss=function(A,e,t,r,B){var n=(Math.sqrt(2)-1)/3*4,s=t*n,o=r*n,i=A+t,Q=e+r;switch(B){case As.TOP_LEFT:return new jn(new Zn(A,Q),new Zn(A,Q-o),new Zn(i-s,e),new Zn(i,e));case As.TOP_RIGHT:return new jn(new Zn(A,e),new Zn(A+s,e),new Zn(i,Q-o),new Zn(i,Q));case As.BOTTOM_RIGHT:return new jn(new Zn(i,e),new Zn(i,e+o),new Zn(A+s,Q),new Zn(A,Q));default:As.BOTTOM_LEFT;return new jn(new Zn(i,Q),new Zn(i-s,Q),new Zn(A,e+o),new Zn(A,e))}},os=function(A,e,t){this.offsetX=A,this.offsetY=e,this.matrix=t,this.type=0,this.target=6},is=function(A,e){this.path=A,this.target=e,this.type=1},Qs=function(A){this.opacity=A,this.type=2,this.target=6},cs=function(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},as=(gs.prototype.getEffects=function(e){for(var A=-1===[2,3].indexOf(this.container.styles.position),t=this.parent,r=this.effects.slice(0);t;){var B,n,s=t.effects.filter(function(A){return!Bs(A)});A||0!==t.container.styles.position||!t.parent?(r.unshift.apply(r,s),A=-1===[2,3].indexOf(t.container.styles.position),0!==t.container.styles.overflowX&&(B=ts(t.curves),n=rs(t.curves),ns(B,n)||r.unshift(new is(n,6)))):r.unshift.apply(r,s),t=t.parent}return r.filter(function(A){return Pt(A.target,e)})},gs);function gs(A,e){var t,r;this.container=A,this.parent=e,this.effects=[],this.curves=new es(this.container),this.container.styles.opacity<1&&this.effects.push(new Qs(this.container.styles.opacity)),null!==this.container.styles.transform&&(e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,t=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform,this.effects.push(new os(e,t,r))),0!==this.container.styles.overflowX&&(t=ts(this.curves),r=rs(this.curves),ns(t,r)?this.effects.push(new is(t,6)):(this.effects.push(new is(t,2)),this.effects.push(new is(r,4))))}function ws(A,e){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);default:return Hs(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}}function Us(A){var e=A.bounds,A=A.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))}function ls(A){var e=A.styles,t=A.bounds,r=Ue(e.paddingLeft,t.width),B=Ue(e.paddingRight,t.width),n=Ue(e.paddingTop,t.width),A=Ue(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,n+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+B),-(e.borderTopWidth+e.borderBottomWidth+n+A))}function Cs(A,e,t){var r=(B=Es(A.styles.backgroundOrigin,e),n=A,0===B?n.bounds:(2===B?ls:Us)(n)),B=(s=Es(A.styles.backgroundClip,e),o=A,0===s?o.bounds:(2===s?ls:Us)(o)),n=ps(Es(A.styles.backgroundSize,e),t,r),s=n[0],o=n[1],t=Be(Es(A.styles.backgroundPosition,e),r.width-s,r.height-o);return[Is(Es(A.styles.backgroundRepeat,e),t,n,r,B),Math.round(r.left+t[0]),Math.round(r.top+t[1]),s,o]}function us(A){return _A(A)&&A.value===Ve.AUTO}function Fs(A){return"number"==typeof A}var hs=function(Q,c,a,g){Q.container.elements.forEach(function(A){var e=Pt(A.flags,4),t=Pt(A.flags,2),r=new as(A,Q);Pt(A.styles.display,2048)&&g.push(r);var B,n,s,o,i=Pt(A.flags,8)?[]:g;e||t?(B=e||A.styles.isPositioned()?a:c,t=new cs(r),A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()?(n=A.styles.zIndex.order)<0?(s=0,B.negativeZIndex.some(function(A,e){return n>A.element.container.styles.zIndex.order?(s=e,!1):0<s}),B.negativeZIndex.splice(s,0,t)):0<n?(o=0,B.positiveZIndex.some(function(A,e){return n>=A.element.container.styles.zIndex.order?(o=e+1,!1):0<o}),B.positiveZIndex.splice(o,0,t)):B.zeroOrAutoZIndexOrTransformedOrOpacity.push(t):(A.styles.isFloating()?B.nonPositionedFloats:B.nonPositionedInlineLevel).push(t),hs(r,t,e?t:a,i)):((A.styles.isInlineLevel()?c.inlineLevel:c.nonInlineLevel).push(r),hs(r,c,a,i)),Pt(A.flags,8)&&ds(A,i)})},ds=function(A,e){for(var t=A instanceof UB?A.start:1,r=A instanceof UB&&A.reversed,B=0;B<e.length;B++){var n=e[B];n.container instanceof aB&&"number"==typeof n.container.value&&0!==n.container.value&&(t=n.container.value),n.listValue=Fn(t,n.container.styles.listStyleType,!0),t+=r?-1:1}},fs=function(A,e){var t=[];return $n(A)?t.push(A.subdivide(.5,!1)):t.push(A),$n(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Hs=function(A,e,t,r){var B=[];return $n(A)?B.push(A.subdivide(.5,!1)):B.push(A),$n(t)?B.push(t.subdivide(.5,!0)):B.push(t),$n(r)?B.push(r.subdivide(.5,!0).reverse()):B.push(r),$n(e)?B.push(e.subdivide(.5,!1).reverse()):B.push(e),B},ps=function(A,e,t){var r=e[0],B=e[1],n=e[2],s=A[0],o=A[1];if(!s)return[0,0];if(te(s)&&o&&te(o))return[Ue(s,t.width),Ue(o,t.height)];var i=Fs(n);if(_A(s)&&(s.value===Ve.CONTAIN||s.value===Ve.COVER))return Fs(n)?t.width/t.height<n!=(s.value===Ve.COVER)?[t.width,t.width/n]:[t.height*n,t.height]:[t.width,t.height];var Q=Fs(r),e=Fs(B),A=Q||e;if(us(s)&&(!o||us(o)))return Q&&e?[r,B]:i||A?A&&i?[Q?r:B*n,e?B:r/n]:[Q?r:t.width,e?B:t.height]:[t.width,t.height];if(i){var c=0,a=0;return te(s)?c=Ue(s,t.width):te(o)&&(a=Ue(o,t.height)),us(s)?c=a*n:o&&!us(o)||(a=c/n),[c,a]}c=null,a=null;if(te(s)?c=Ue(s,t.width):o&&te(o)&&(a=Ue(o,t.height)),null!==(c=null!==(a=null!==c&&(!o||us(o))?Q&&e?c/r*B:t.height:a)&&us(s)?Q&&e?a/B*r:t.width:c)&&null!==a)return[c,a];throw new Error("Unable to calculate background-size for element")},Es=function(A,e){e=A[e];return void 0===e?A[0]:e},Is=function(A,e,t,r,B){var n=e[0],s=e[1],o=t[0],i=t[1];switch(A){case 2:return[new Zn(Math.round(r.left),Math.round(r.top+s)),new Zn(Math.round(r.left+r.width),Math.round(r.top+s)),new Zn(Math.round(r.left+r.width),Math.round(i+r.top+s)),new Zn(Math.round(r.left),Math.round(i+r.top+s))];case 3:return[new Zn(Math.round(r.left+n),Math.round(r.top)),new Zn(Math.round(r.left+n+o),Math.round(r.top)),new Zn(Math.round(r.left+n+o),Math.round(r.height+r.top)),new Zn(Math.round(r.left+n),Math.round(r.height+r.top))];case 1:return[new Zn(Math.round(r.left+n),Math.round(r.top+s)),new Zn(Math.round(r.left+n+o),Math.round(r.top+s)),new Zn(Math.round(r.left+n+o),Math.round(r.top+s+i)),new Zn(Math.round(r.left+n),Math.round(r.top+s+i))];default:return[new Zn(Math.round(B.left),Math.round(B.top)),new Zn(Math.round(B.left+B.width),Math.round(B.top)),new Zn(Math.round(B.left+B.width),Math.round(B.height+B.top)),new Zn(Math.round(B.left),Math.round(B.height+B.top))]}},ys="Hidden Text",Ks=(ms.prototype.parseMetrics=function(A,e){var t=this._document.createElement("div"),r=this._document.createElement("img"),B=this._document.createElement("span"),n=this._document.body;t.style.visibility="hidden",t.style.fontFamily=A,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",n.appendChild(t),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",B.style.fontFamily=A,B.style.fontSize=e,B.style.margin="0",B.style.padding="0",B.appendChild(this._document.createTextNode(ys)),t.appendChild(B),t.appendChild(r);e=r.offsetTop-B.offsetTop+2;t.removeChild(B),t.appendChild(this._document.createTextNode(ys)),t.style.lineHeight="normal",r.style.verticalAlign="super";r=r.offsetTop-t.offsetTop+2;return n.removeChild(t),{baseline:e,middle:r}},ms.prototype.getMetrics=function(A,e){var t=A+" "+e;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(A,e)),this._data[t]},ms);function ms(A){this._data={},this._document=A}var Ls,he=function(A,e){this.context=A,this.options=e},bs=(A(Ds,Ls=he),Ds.prototype.applyEffects=function(A){for(var e=this;this._activeEffects.length;)this.popEffect();A.forEach(function(A){return e.applyEffect(A)})},Ds.prototype.applyEffect=function(A){this.ctx.save(),2===A.type&&(this.ctx.globalAlpha=A.opacity),0===A.type&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),Bs(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},Ds.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},Ds.prototype.renderStack=function(e){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},Ds.prototype.renderNode=function(e){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return Pt(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return A.sent(),[4,this.renderNodeContent(e)];case 2:A.sent(),A.label=3;case 3:return[2]}})})},Ds.prototype.renderTextWithLetterSpacing=function(t,A,r){var B=this;0===A?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+r):Zr(t.text).reduce(function(A,e){return B.ctx.fillText(e,A,t.bounds.top+r),A+B.ctx.measureText(e).width},t.bounds.left)},Ds.prototype.createFontStyle=function(A){var e=A.fontVariant.filter(function(A){return"normal"===A||"small-caps"===A}).join(""),t=Gs(A.fontFamily).join(", "),r=WA(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,e,A.fontWeight,r,t].join(" "),t,r]},Ds.prototype.renderTextNode=function(i,Q){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o=this;return H(this,function(A){return r=this.createFontStyle(Q),e=r[0],t=r[1],r=r[2],this.ctx.font=e,this.ctx.direction=1===Q.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(t,r),B=r.baseline,n=r.middle,s=Q.paintOrder,i.textBounds.forEach(function(t){s.forEach(function(A){switch(A){case 0:o.ctx.fillStyle=ie(Q.color),o.renderTextWithLetterSpacing(t,Q.letterSpacing,B);var e=Q.textShadow;e.length&&t.text.trim().length&&(e.slice(0).reverse().forEach(function(A){o.ctx.shadowColor=ie(A.color),o.ctx.shadowOffsetX=A.offsetX.number*o.options.scale,o.ctx.shadowOffsetY=A.offsetY.number*o.options.scale,o.ctx.shadowBlur=A.blur.number,o.renderTextWithLetterSpacing(t,Q.letterSpacing,B)}),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0),Q.textDecorationLine.length&&(o.ctx.fillStyle=ie(Q.textDecorationColor||Q.color),Q.textDecorationLine.forEach(function(A){switch(A){case 1:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+B),t.bounds.width,1);break;case 2:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:o.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+n),t.bounds.width,1)}}));break;case 1:Q.webkitTextStrokeWidth&&t.text.trim().length&&(o.ctx.strokeStyle=ie(Q.webkitTextStrokeColor),o.ctx.lineWidth=Q.webkitTextStrokeWidth,o.ctx.lineJoin=window.chrome?"miter":"round",o.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+B)),o.ctx.strokeStyle="",o.ctx.lineWidth=0,o.ctx.lineJoin="miter"}})}),[2]})})},Ds.prototype.renderReplacedElement=function(A,e,t){var r;t&&0<A.intrinsicWidth&&0<A.intrinsicHeight&&(r=ls(A),e=rs(e),this.path(e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,A.intrinsicWidth,A.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore())},Ds.prototype.renderNodeContent=function(w){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g;return H(this,function(A){switch(A.label){case 0:this.applyEffects(w.getEffects(4)),e=w.container,t=w.curves,r=e.styles,B=0,n=e.textNodes,A.label=1;case 1:return B<n.length?(s=n[B],[4,this.renderTextNode(s,r)]):[3,4];case 2:A.sent(),A.label=3;case 3:return B++,[3,1];case 4:if(!(e instanceof tB))return[3,8];A.label=5;case 5:return A.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return Q=A.sent(),this.renderReplacedElement(e,t,Q),[3,8];case 7:return A.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof nB&&this.renderReplacedElement(e,t,e.canvas),!(e instanceof iB))return[3,12];A.label=9;case 9:return A.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return Q=A.sent(),this.renderReplacedElement(e,t,Q),[3,12];case 11:return A.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof vB&&e.tree?[4,new Ds(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:s=A.sent(),e.width&&e.height&&this.ctx.drawImage(s,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),A.label=14;case 14:if(e instanceof pB&&(i=Math.min(e.bounds.width,e.bounds.height),e.type===hB?e.checked&&(this.ctx.save(),this.path([new Zn(e.bounds.left+.39363*i,e.bounds.top+.79*i),new Zn(e.bounds.left+.16*i,e.bounds.top+.5549*i),new Zn(e.bounds.left+.27347*i,e.bounds.top+.44071*i),new Zn(e.bounds.left+.39694*i,e.bounds.top+.5649*i),new Zn(e.bounds.left+.72983*i,e.bounds.top+.23*i),new Zn(e.bounds.left+.84*i,e.bounds.top+.34085*i),new Zn(e.bounds.left+.39363*i,e.bounds.top+.79*i)]),this.ctx.fillStyle=ie(HB),this.ctx.fill(),this.ctx.restore()):e.type===dB&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+i/2,e.bounds.top+i/2,i/4,0,2*Math.PI,!0),this.ctx.fillStyle=ie(HB),this.ctx.fill(),this.ctx.restore())),xs(e)&&e.value.length){switch(c=this.createFontStyle(r),a=c[0],i=c[1],c=this.fontMetrics.getMetrics(a,i).baseline,this.ctx.font=a,this.ctx.fillStyle=ie(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ss(e.styles.textAlign),g=ls(e),o=0,e.styles.textAlign){case 1:o+=g.width/2;break;case 2:o+=g.width}i=g.add(o,0,0,-g.height/2+1),this.ctx.save(),this.path([new Zn(g.left,g.top),new Zn(g.left+g.width,g.top),new Zn(g.left+g.width,g.top+g.height),new Zn(g.left,g.top+g.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jr(e.value,i),r.letterSpacing,c),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pt(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(c=e.styles.listStyleImage).type)return[3,18];Q=void 0,c=c.url,A.label=15;case 15:return A.trys.push([15,17,,18]),[4,this.context.cache.match(c)];case 16:return Q=A.sent(),this.ctx.drawImage(Q,e.bounds.left-(Q.width+10),e.bounds.top),[3,18];case 17:return A.sent(),this.context.logger.error("Error loading list-style-image "+c),[3,18];case 18:return[3,20];case 19:w.listValue&&-1!==e.styles.listStyleType&&(a=this.createFontStyle(r)[0],this.ctx.font=a,this.ctx.fillStyle=ie(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",g=new d(e.bounds.left,e.bounds.top+Ue(e.styles.paddingTop,e.bounds.width),e.bounds.width,Ye(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jr(w.listValue,g),r.letterSpacing,Ye(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),A.label=20;case 20:return[2]}})})},Ds.prototype.renderStackContent=function(C){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g,w,U,l;return H(this,function(A){switch(A.label){case 0:return Pt(C.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(C.element)];case 1:A.sent(),e=0,t=C.negativeZIndex,A.label=2;case 2:return e<t.length?(l=t[e],[4,this.renderStack(l)]):[3,5];case 3:A.sent(),A.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(C.element)];case 6:A.sent(),r=0,B=C.nonInlineLevel,A.label=7;case 7:return r<B.length?(l=B[r],[4,this.renderNode(l)]):[3,10];case 8:A.sent(),A.label=9;case 9:return r++,[3,7];case 10:n=0,s=C.nonPositionedFloats,A.label=11;case 11:return n<s.length?(l=s[n],[4,this.renderStack(l)]):[3,14];case 12:A.sent(),A.label=13;case 13:return n++,[3,11];case 14:o=0,i=C.nonPositionedInlineLevel,A.label=15;case 15:return o<i.length?(l=i[o],[4,this.renderStack(l)]):[3,18];case 16:A.sent(),A.label=17;case 17:return o++,[3,15];case 18:Q=0,c=C.inlineLevel,A.label=19;case 19:return Q<c.length?(l=c[Q],[4,this.renderNode(l)]):[3,22];case 20:A.sent(),A.label=21;case 21:return Q++,[3,19];case 22:a=0,g=C.zeroOrAutoZIndexOrTransformedOrOpacity,A.label=23;case 23:return a<g.length?(l=g[a],[4,this.renderStack(l)]):[3,26];case 24:A.sent(),A.label=25;case 25:return a++,[3,23];case 26:w=0,U=C.positiveZIndex,A.label=27;case 27:return w<U.length?(l=U[w],[4,this.renderStack(l)]):[3,30];case 28:A.sent(),A.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},Ds.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},Ds.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},Ds.prototype.formatPath=function(A){var r=this;A.forEach(function(A,e){var t=$n(A)?A.start:A;0===e?r.ctx.moveTo(t.x,t.y):r.ctx.lineTo(t.x,t.y),$n(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},Ds.prototype.renderRepeat=function(A,e,t,r){this.path(A),this.ctx.fillStyle=e,this.ctx.translate(t,r),this.ctx.fill(),this.ctx.translate(-t,-r)},Ds.prototype.resizeImage=function(A,e,t){if(A.width===e&&A.height===t)return A;var r=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return r.width=Math.max(1,e),r.height=Math.max(1,t),r.getContext("2d").drawImage(A,0,0,A.width,A.height,0,0,e,t),r},Ds.prototype.renderBackgroundImage=function(f){return a(this,void 0,void 0,function(){var h,e,d,t,r,B;return H(this,function(A){switch(A.label){case 0:h=f.styles.backgroundImage.length-1,e=function(e){var t,r,B,n,s,o,i,Q,c,a,g,w,U,l,C,u,F;return H(this,function(A){switch(A.label){case 0:if(0!==e.type)return[3,5];t=void 0,r=e.url,A.label=1;case 1:return A.trys.push([1,3,,4]),[4,d.context.cache.match(r)];case 2:return t=A.sent(),[3,4];case 3:return A.sent(),d.context.logger.error("Error loading background-image "+r),[3,4];case 4:return t&&(B=Cs(f,h,[t.width,t.height,t.width/t.height]),o=B[0],g=B[1],w=B[2],c=B[3],a=B[4],s=d.ctx.createPattern(d.resizeImage(t,c,a),"repeat"),d.renderRepeat(o,s,g,w)),[3,6];case 5:1===e.type?(F=Cs(f,h,[null,null,null]),o=F[0],g=F[1],w=F[2],c=F[3],a=F[4],C=Ee(e.angle,c,a),l=C[0],B=C[1],i=C[2],u=C[3],Q=C[4],(F=document.createElement("canvas")).width=c,F.height=a,C=F.getContext("2d"),n=C.createLinearGradient(B,u,i,Q),pe(e.stops,l).forEach(function(A){return n.addColorStop(A.stop,ie(A.color))}),C.fillStyle=n,C.fillRect(0,0,c,a),0<c&&0<a&&(s=d.ctx.createPattern(F,"repeat"),d.renderRepeat(o,s,g,w))):2===e.type&&(u=Cs(f,h,[null,null,null]),o=u[0],i=u[1],Q=u[2],c=u[3],a=u[4],l=0===e.position.length?[ge]:e.position,g=Ue(l[0],c),w=Ue(l[l.length-1],a),C=function(A,e,t,r,B){var n,s,o,i,Q=0,c=0;switch(A.size){case 0:0===A.shape?Q=c=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-B)):1===A.shape&&(Q=Math.min(Math.abs(e),Math.abs(e-r)),c=Math.min(Math.abs(t),Math.abs(t-B)));break;case 2:0===A.shape?Q=c=Math.min(Ie(e,t),Ie(e,t-B),Ie(e-r,t),Ie(e-r,t-B)):1===A.shape&&(n=Math.min(Math.abs(t),Math.abs(t-B))/Math.min(Math.abs(e),Math.abs(e-r)),o=(s=ye(r,B,e,t,!0))[0],i=s[1],c=n*(Q=Ie(o-e,(i-t)/n)));break;case 1:0===A.shape?Q=c=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-B)):1===A.shape&&(Q=Math.max(Math.abs(e),Math.abs(e-r)),c=Math.max(Math.abs(t),Math.abs(t-B)));break;case 3:0===A.shape?Q=c=Math.max(Ie(e,t),Ie(e,t-B),Ie(e-r,t),Ie(e-r,t-B)):1===A.shape&&(n=Math.max(Math.abs(t),Math.abs(t-B))/Math.max(Math.abs(e),Math.abs(e-r)),o=(s=ye(r,B,e,t,!1))[0],i=s[1],c=n*(Q=Ie(o-e,(i-t)/n)))}return Array.isArray(A.size)&&(Q=Ue(A.size[0],r),c=2===A.size.length?Ue(A.size[1],B):Q),[Q,c]}(e,g,w,c,a),F=C[0],u=C[1],0<F&&0<u&&(U=d.ctx.createRadialGradient(i+g,Q+w,0,i+g,Q+w,F),pe(e.stops,2*F).forEach(function(A){return U.addColorStop(A.stop,ie(A.color))}),d.path(o),d.ctx.fillStyle=U,F!==u?(l=f.bounds.left+.5*f.bounds.width,C=f.bounds.top+.5*f.bounds.height,F=1/(u=u/F),d.ctx.save(),d.ctx.translate(l,C),d.ctx.transform(1,0,0,u,0,0),d.ctx.translate(-l,-C),d.ctx.fillRect(i,F*(Q-C)+C,c,a*F),d.ctx.restore()):d.ctx.fill())),A.label=6;case 6:return h--,[2]}})},d=this,t=0,r=f.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return t<r.length?(B=r[t],[5,e(B)]):[3,4];case 2:A.sent(),A.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},Ds.prototype.renderSolidBorder=function(e,t,r){return a(this,void 0,void 0,function(){return H(this,function(A){return this.path(ws(r,t)),this.ctx.fillStyle=ie(e),this.ctx.fill(),[2]})})},Ds.prototype.renderDoubleBorder=function(t,r,B,n){return a(this,void 0,void 0,function(){var e;return H(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,B,n)]:[3,2];case 1:return A.sent(),[2];case 2:return e=function(A,e){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return Hs(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);default:return Hs(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}}(n,B),this.path(e),this.ctx.fillStyle=ie(t),this.ctx.fill(),e=function(A,e){switch(e){case 0:return Hs(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);default:return Hs(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}}(n,B),this.path(e),this.ctx.fill(),[2]}})})},Ds.prototype.renderNodeBackgroundAndBorders=function(c){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q=this;return H(this,function(A){switch(A.label){case 0:return(this.applyEffects(c.getEffects(2)),e=c.container.styles,t=!oe(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],B=Ms(Es(e.backgroundClip,0),c.curves),t||e.boxShadow.length)?(this.ctx.save(),this.path(B),this.ctx.clip(),oe(e.backgroundColor)||(this.ctx.fillStyle=ie(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(c.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(A){Q.ctx.save();var t,r,B,n,e=ts(c.curves),s=A.inset?0:1e4,o=(t=-s+(A.inset?1:-1)*A.spread.number,r=(A.inset?1:-1)*A.spread.number,B=A.spread.number*(A.inset?-2:2),n=A.spread.number*(A.inset?-2:2),e.map(function(A,e){switch(e){case 0:return A.add(t,r);case 1:return A.add(t+B,r);case 2:return A.add(t+B,r+n);case 3:return A.add(t,r+n)}return A}));A.inset?(Q.path(e),Q.ctx.clip(),Q.mask(o)):(Q.mask(e),Q.ctx.clip(),Q.path(o)),Q.ctx.shadowOffsetX=A.offsetX.number+s,Q.ctx.shadowOffsetY=A.offsetY.number,Q.ctx.shadowColor=ie(A.color),Q.ctx.shadowBlur=A.blur.number,Q.ctx.fillStyle=A.inset?ie(A.color):"rgba(0,0,0,1)",Q.ctx.fill(),Q.ctx.restore()}),A.label=2;case 2:s=n=0,o=r,A.label=3;case 3:return s<o.length?0!==(i=o[s]).style&&!oe(i.color)&&0<i.width?2!==i.style?[3,5]:[4,this.renderDashedDottedBorder(i.color,i.width,n,c.curves,2)]:[3,11]:[3,13];case 4:return A.sent(),[3,11];case 5:return 3!==i.style?[3,7]:[4,this.renderDashedDottedBorder(i.color,i.width,n,c.curves,3)];case 6:return A.sent(),[3,11];case 7:return 4!==i.style?[3,9]:[4,this.renderDoubleBorder(i.color,i.width,n,c.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(i.color,n,c.curves)];case 10:A.sent(),A.label=11;case 11:n++,A.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},Ds.prototype.renderDashedDottedBorder=function(g,w,U,l,C){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a;return H(this,function(A){return this.ctx.save(),Q=function(A,e){switch(e){case 0:return fs(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return fs(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return fs(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);default:return fs(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}}(l,U),e=ws(l,U),2===C&&(this.path(e),this.ctx.clip()),s=$n(e[0])?(t=e[0].start.x,e[0].start.y):(t=e[0].x,e[0].y),o=$n(e[1])?(r=e[1].end.x,e[1].end.y):(r=e[1].x,e[1].y),B=0===U||2===U?Math.abs(t-r):Math.abs(s-o),this.ctx.beginPath(),3===C?this.formatPath(Q):this.formatPath(e.slice(0,2)),n=w<3?3*w:2*w,s=w<3?2*w:w,3===C&&(s=n=w),o=!0,B<=2*n?o=!1:B<=2*n+s?(n*=i=B/(2*n+s),s*=i):(Q=Math.floor((B+s)/(n+s)),i=(B-Q*n)/(Q-1),s=(Q=(B-(Q+1)*n)/Q)<=0||Math.abs(s-i)<Math.abs(s-Q)?i:Q),o&&(3===C?this.ctx.setLineDash([0,n+s]):this.ctx.setLineDash([n,s])),3===C?(this.ctx.lineCap="round",this.ctx.lineWidth=w):this.ctx.lineWidth=2*w+1.1,this.ctx.strokeStyle=ie(g),this.ctx.stroke(),this.ctx.setLineDash([]),2===C&&($n(e[0])&&(c=e[3],a=e[0],this.ctx.beginPath(),this.formatPath([new Zn(c.end.x,c.end.y),new Zn(a.start.x,a.start.y)]),this.ctx.stroke()),$n(e[1])&&(c=e[1],a=e[2],this.ctx.beginPath(),this.formatPath([new Zn(c.end.x,c.end.y),new Zn(a.start.x,a.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},Ds.prototype.render=function(B){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ie(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=new as(e=B,null),r=new cs(t),hs(t,r,r,e=[]),ds(t.container,e),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}var e,t,r})})},Ds);function Ds(A,e){A=Ls.call(this,A,e)||this;return A._activeEffects=[],A.canvas=e.canvas||document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),e.canvas||(A.canvas.width=Math.floor(e.width*e.scale),A.canvas.height=Math.floor(e.height*e.scale),A.canvas.style.width=e.width+"px",A.canvas.style.height=e.height+"px"),A.fontMetrics=new Ks(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-e.x,-e.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+e.width+"x"+e.height+") with scale "+e.scale),A}var vs,xs=function(A){return A instanceof LB||(A instanceof yB||A instanceof pB&&A.type!==dB&&A.type!==hB)},Ms=function(A,e){switch(A){case 0:return ts(e);case 2:return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox];default:return rs(e)}},Ss=function(A){switch(A){case 1:return"center";case 2:return"right";default:return"left"}},Ts=["-apple-system","system-ui"],Gs=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(A){return-1===Ts.indexOf(A)}):A},Os=(A(Vs,vs=he),Vs.prototype.render=function(t){return a(this,void 0,void 0,function(){var e;return H(this,function(A){switch(A.label){case 0:return e=Nr(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,ks(e)];case 1:return e=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ie(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(e,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},Vs);function Vs(A,e){A=vs.call(this,A,e)||this;return A.canvas=e.canvas||document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=e,A.canvas.width=Math.floor(e.width*e.scale),A.canvas.height=Math.floor(e.height*e.scale),A.canvas.style.width=e.width+"px",A.canvas.style.height=e.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-e.x,-e.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale),A}var ks=function(r){return new Promise(function(A,e){var t=new Image;t.onload=function(){A(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Rs=(Ns.prototype.debug=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.prototype.getTime=function(){return Date.now()-this.start},Ns.prototype.info=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,t([this.id,this.getTime()+"ms"],A))},Ns.prototype.warn=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.prototype.error=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.instances={},Ns);function Ns(A){var e=A.id,A=A.enabled;this.id=e,this.enabled=A,this.start=Date.now()}var Ps=(Xs.instanceCount=1,Xs);function Xs(A,e){this.windowBounds=e,this.instanceName="#"+Xs.instanceCount++,this.logger=new Rs({id:this.instanceName,enabled:A.logging}),this.cache=null!==(e=A.cache)&&void 0!==e?e:new On(this,A)}"undefined"!=typeof window&&Tn.setContext(window);var Js=function(u,F){return a(void 0,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g,w,U,l,C;return H(this,function(A){switch(A.label){case 0:if(!u||"object"!=typeof u)return[2,Promise.reject("Invalid element provided as first argument")];if(!(e=u.ownerDocument))throw new Error("Element is not attached to a Document");if(!(t=e.defaultView))throw new Error("Document is not attached to a Window");return w={allowTaint:null!==(U=F.allowTaint)&&void 0!==U&&U,imageTimeout:null!==(c=F.imageTimeout)&&void 0!==c?c:15e3,proxy:F.proxy,useCORS:null!==(a=F.useCORS)&&void 0!==a&&a},U=h({logging:null===(g=F.logging)||void 0===g||g,cache:F.cache},w),c={windowWidth:null!==(c=F.windowWidth)&&void 0!==c?c:t.innerWidth,windowHeight:null!==(a=F.windowHeight)&&void 0!==a?a:t.innerHeight,scrollX:null!==(g=F.scrollX)&&void 0!==g?g:t.pageXOffset,scrollY:null!==(w=F.scrollY)&&void 0!==w?w:t.pageYOffset},a=new d(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),g=new Ps(U,a),c=null!==(w=F.foreignObjectRendering)&&void 0!==w&&w,w={allowTaint:null!==(U=F.allowTaint)&&void 0!==U&&U,onclone:F.onclone,ignoreElements:F.ignoreElements,inlineImages:c,copyStyles:c},g.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),U=new dn(g,u,w),(w=U.clonedReferenceElement)?[4,U.toIFrame(e,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return(r=A.sent(),l=jB(w)||"HTML"===w.tagName?function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");A=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),t=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new d(0,0,A,t)}(w.ownerDocument):f(g,w),B=l.width,n=l.height,s=l.left,o=l.top,i=Ys(g,w,F.backgroundColor),l={canvas:F.canvas,backgroundColor:i,scale:null!==(l=null!==(l=F.scale)&&void 0!==l?l:t.devicePixelRatio)&&void 0!==l?l:1,x:(null!==(l=F.x)&&void 0!==l?l:0)+s,y:(null!==(l=F.y)&&void 0!==l?l:0)+o,width:null!==(l=F.width)&&void 0!==l?l:Math.ceil(B),height:null!==(l=F.height)&&void 0!==l?l:Math.ceil(n)},c)?(g.logger.debug("Document cloned, using foreign object rendering"),[4,new Os(g,l).render(w)]):[3,3];case 2:return Q=A.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+s+","+o+" with size "+B+"x"+n+" using computed rendering"),g.logger.debug("Starting DOM parsing"),C=kB(g,w),i===C.styles.backgroundColor&&(C.styles.backgroundColor=Le.TRANSPARENT),g.logger.debug("Starting renderer for element at "+l.x+","+l.y+" with size "+l.width+"x"+l.height),[4,new bs(g,l).render(C)];case 4:Q=A.sent(),A.label=5;case 5:return null!==(C=F.removeContainer)&&void 0!==C&&!C||dn.destroy(r)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),g.logger.debug("Finished rendering"),[2,Q]}})})},Ys=function(A,e,t){var r=e.ownerDocument,B=r.documentElement?fe(A,getComputedStyle(r.documentElement).backgroundColor):Le.TRANSPARENT,n=r.body?fe(A,getComputedStyle(r.body).backgroundColor):Le.TRANSPARENT,t="string"==typeof t?fe(A,t):null===t?Le.TRANSPARENT:4294967295;return e===r.documentElement?oe(B)?oe(n)?t:n:B:t};return function(A,e){return Js(A,e=void 0===e?{}:e)}});